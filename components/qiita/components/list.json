[
  {
    "rendered_body": "\n\u003ch1\u003e\n\u003cspan id=\"dockerでdocker-image-push-dockeridというコマンドを実行した時\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#docker%E3%81%A7docker-image-push-dockerid%E3%81%A8%E3%81%84%E3%81%86%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%9F%E6%99%82\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDockerで\u003ccode\u003edocker image push dockerID\u003c/code\u003eというコマンドを実行した時\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003edenied: requested access to the resource is denied\u003c/code\u003e\u003cbr\u003e\nこの様に表示された時はまず指定している\u003cstrong\u003edockerID\u003c/strong\u003eが自分dockerIDがあっているかを確認する。\u003c/p\u003e\n\n\u003cp\u003eこれでも解決されない時(preparingとwaitingまで出たけどまたdenitedが出た)は、\u003cbr\u003e\nおそらくpermissionの問題だと思うので、\u003cbr\u003e\n\u003ccode\u003edocker login\u003c/code\u003eというコマンドを叩いてログインすれば正しくpushできるはず。\u003c/p\u003e\n",
    "body": "#Dockerで```docker image push dockerID```というコマンドを実行した時\n```denied: requested access to the resource is denied```\nこの様に表示された時はまず指定している__dockerID__が自分dockerIDがあっているかを確認する。\n\nこれでも解決されない時(preparingとwaitingまで出たけどまたdenitedが出た)は、\nおそらくpermissionの問題だと思うので、\n```docker login```というコマンドを叩いてログインすれば正しくpushできるはず。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:28:33+09:00",
    "group": null,
    "id": "0fff0b7c89297e8d130b",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Docker",
        "versions": []
      },
      {
        "name": "DockerHub",
        "versions": []
      }
    ],
    "title": "Dockerでpush時にrequested access to the resource is deniedとなる時",
    "updated_at": "2020-11-17T22:28:33+09:00",
    "url": "https://qiita.com/Naruse__0/items/0fff0b7c89297e8d130b",
    "user": {
      "description": null,
      "facebook_id": null,
      "followees_count": 1,
      "followers_count": 0,
      "github_login_name": "naruse666",
      "id": "Naruse__0",
      "items_count": 2,
      "linkedin_id": null,
      "location": null,
      "name": "",
      "organization": null,
      "permanent_id": 722539,
      "profile_image_url": "https://secure.gravatar.com/avatar/81cbcee67f9adb4161bbedf01835d766",
      "team_only": false,
      "twitter_screen_name": "Naruse__ganbaru",
      "website_url": null
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eラズパイやJetsonでCustomVision推論するときに、時間かかるわエラーが出るわでなぜかonnxruntimeが入らないのでOpenCVでやってみようと思いました。その予行演習としてまずはWindowsノートPCで動かしてラズパイ＋Windowsで動かそうと思います。ちなみに、ノートPCで推論するなら普通にonnxruntime入れるほうが手っ取り早いです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ノートpcで推論\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8E%E3%83%BC%E3%83%88pc%E3%81%A7%E6%8E%A8%E8%AB%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eノートPCで推論\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003e環境\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ePython3.6(Anaconda)\u003c/li\u003e\n\u003cli\u003eOpenCV\u0026gt;=4.0.0\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e必要なライブラリは、OpenCVとpillowとnumpyです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003epip install pillow numpy opencv-python\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eOpenCVはバージョン4以降じゃないとだめかもです。\u003cbr\u003e\nCustomVisionのモデルは、ONNXでエクスポートしてダウンロードしておいてください。Compactドメインで学習して、パフォーマンスタブからエクスポートできます(\u003ca href=\"https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考\u003c/a\u003e)。\u003cbr\u003e\n展開したら以下のような構成になっていると思います。C#とPythonのサンプルコードがついてます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ tree /f\nE:.\n│  cvexport.manifest\n│  labels.txt\n│  LICENSE\n│  model.onnx\n│\n├─CSharp\n│      ObjectDetection.cs\n│\n└─python\n    │  cntk_predict.py\n    │  object_detection.py\n    │  onnxruntime_predict.py\n    │\n    └─__pycache__\n            object_detection.cpython-36.pyc\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003epythonというフォルダに移動して以下のコードを保存します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003einference.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ecv2\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eobject_detection\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eObjectDetection\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ePIL\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eImageDraw\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'test1.png'\u003c/span\u003e        \u003cspan class=\"c1\"\u003e# 推論したい画像のパス\n\u003c/span\u003e\u003cspan class=\"n\"\u003emodelname\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'../model.onnx'\u003c/span\u003e   \u003cspan class=\"c1\"\u003e# 推論に使うモデルのパス\n\u003c/span\u003e\u003cspan class=\"n\"\u003elabelpath\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'../labels.txt'\u003c/span\u003e   \u003cspan class=\"c1\"\u003e# エクスポートした中にあったlabels.txtへのパス\n\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eODbyCV2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eObjectDetection\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e__init__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emodel_filename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabels\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003esuper\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eODbyCV2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003e__init__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elabels\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ednn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereadNetFromONNX\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodelname\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003epredict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epil2cv\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshape\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esetInput\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ednn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eblobFromImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003eswapRB\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecrop\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eresults\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eforward\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esqueeze\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003etranspose\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"n\"\u003eastype\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efloat32\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003epil2cv\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edtype\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euint8\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003endim\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epass\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelif\u003c/span\u003e \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshape\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecvtColor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCOLOR_RGB2BGR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelif\u003c/span\u003e \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshape\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecvtColor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCOLOR_RGBA2BGRA\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003enew_image\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# ラベル読み込み\n\u003c/span\u003e\u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elabelpath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'r'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elabels\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003el\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estrip\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003el\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereadlines\u003c/span\u003e\u003cspan class=\"p\"\u003e()]\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003emodel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eODbyCV2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodelname\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elabels\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 推論\n\u003c/span\u003e\u003cspan class=\"n\"\u003eresults\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epredict_image\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 以下推論結果の表示\n\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimread\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003echannel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshape\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efont_face\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFONT_HERSHEY_DUPLEX\u003c/span\u003e\n\u003cspan class=\"n\"\u003efont_scale\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mf\"\u003e0.6\u003c/span\u003e\n\u003cspan class=\"n\"\u003efont_thickness\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]]:\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# if result['probability'] \u0026gt;= 0.3:\n\u003c/span\u003e    \u003cspan class=\"n\"\u003etext_str\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'tagName'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etext_w\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etext_h\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egetTextSize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etext_str\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_face\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_scale\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_thickness\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003escore_w\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003escore_h\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egetTextSize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'probability'\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e \u003cspan class=\"n\"\u003efont_face\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_scale\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_thickness\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ex1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'left'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'top'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ex2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'width'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'left'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'height'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'boundingBox'\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"s\"\u003e'top'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etext_pt\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey1\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etext_color\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ergb\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey1\u003c/span\u003e\u003cspan class=\"p\"\u003e),(\u003c/span\u003e\u003cspan class=\"n\"\u003ex2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ey2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003ergb\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey1\u003c/span\u003e\u003cspan class=\"p\"\u003e),(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003etext_w\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003etext_h\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003ergb\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey1\u003c/span\u003e\u003cspan class=\"p\"\u003e),(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003escore_w\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ey1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003escore_h\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003ergb\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eputText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etext_str\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etext_pt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_face\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_scale\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etext_color\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_thickness\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLINE_AA\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eputText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'probability'\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey1\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003escore_h\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003efont_face\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_scale\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etext_color\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efont_thickness\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLINE_AA\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimshow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'test'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewaitKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edestroyAllWindows\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eエクスポートしてきたときについているサンプルコードを参考にしました。object_detection.pyのObjectDetectionクラスを継承してpredict関数をオーバーライドしています。このコードを実行すると以下のような結果が得られます。8がtagName、0.72がprobabilityです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F685335%2F763bd8b5-676e-bfbc-9e20-14ac65d0121c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=aad23ed37abd5bc9c2930fd33efa885a\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F685335%2F763bd8b5-676e-bfbc-9e20-14ac65d0121c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=aad23ed37abd5bc9c2930fd33efa885a\" alt=\"result.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/685335/763bd8b5-676e-bfbc-9e20-14ac65d0121c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F685335%2F763bd8b5-676e-bfbc-9e20-14ac65d0121c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=05417ce0e7c3dc909cfaf98cc7e1a9a6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ラズパイwindows10で推論\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%82%BA%E3%83%91%E3%82%A4windows10%E3%81%A7%E6%8E%A8%E8%AB%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eラズパイ(Windows10)で推論\u003c/h1\u003e\n\n\u003cp\u003e結論からいうと上記と全く同じ流れでできます。しかし、NumpyがWindows＋Armに対応してないのか、import時に以下のようなwarningが出て、推論時にもたくさんwarningが出てきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:172: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-112)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:51: RuntimeWarning: divide by zero encountered in log10\n  self.precision = int(-log10(self.eps))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:52: RuntimeWarning: divide by zero encountered in power\n  self.resolution = float_to_float(float_conv(10) ** (-self.precision))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:184: RuntimeWarning: divide by zero encountered in exp2\n  epsneg_f80 = exp2(ld(-64))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:185: RuntimeWarning: divide by zero encountered in exp2\n  tiny_f80 = exp2(ld(-16382))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:199: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-63)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:212: RuntimeWarning: divide by zero encountered in nextafter\n  if hasattr(umath, 'nextafter')  # Missing on some platforms?\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:224: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-105)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:225: RuntimeWarning: divide by zero encountered in exp2\n  epsneg= exp2(ld(-106)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:227: RuntimeWarning: divide by zero encountered in exp2\n  tiny=exp2(ld(-1022)))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\__init__.py:316: RuntimeWarning: divide by zero encountered in subtract\n  if not abs(x.dot(x) - 2.0) \u0026lt; 1e-5:\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\__init__.py:316: RuntimeWarning: divide by zero encountered in absolute\n  if not abs(x.dot(x) - 2.0) \u0026lt; 1e-5:\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/numpy/numpy/issues/17747\" rel=\"nofollow noopener\" target=\"_blank\"\u003eここ\u003c/a\u003eに同じwarningが出るという報告がありますが解決策はわからず...。import時はともかく推論実行時に出るのでうまく推論できているのかもわからないです(同じような結果が得られるのでただしそうではありますが...)。解決策があれば教えてください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003eお疲れさまでした。opencvでCustomVisionのモデルの推論をしました。cv2.dnn.forward()の出力が何を表しているかもわかっていないので知っている方は教えていただければ幸いです。\u003c/p\u003e\n\n\u003cp\u003e間違い等ありましたらご指摘よろしくお願いします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/mkht/items/9d173334dc5b26bfef46\" id=\"reference-ae628a4bc665ceb86eae\"\u003eラズパイ4にWindows 10 on ARM64をインストールする\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/derodero24/items/f22c22b22451609908ee\" id=\"reference-eced326668686dfd0894\"\u003e【Python】Pillow ↔ OpenCV 変換\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n",
    "body": "# はじめに\n\nラズパイやJetsonでCustomVision推論するときに、時間かかるわエラーが出るわでなぜかonnxruntimeが入らないのでOpenCVでやってみようと思いました。その予行演習としてまずはWindowsノートPCで動かしてラズパイ＋Windowsで動かそうと思います。ちなみに、ノートPCで推論するなら普通にonnxruntime入れるほうが手っ取り早いです。\n\n# ノートPCで推論\n\n**環境**\n\n- Python3.6(Anaconda)\n- OpenCV\u003e=4.0.0\n\n\n必要なライブラリは、OpenCVとpillowとnumpyです。\n\n```\npip install pillow numpy opencv-python\n```\n\nOpenCVはバージョン4以降じゃないとだめかもです。\nCustomVisionのモデルは、ONNXでエクスポートしてダウンロードしておいてください。Compactドメインで学習して、パフォーマンスタブからエクスポートできます([参考](https://docs.microsoft.com/ja-jp/azure/cognitive-services/custom-vision-service/export-your-model))。\n展開したら以下のような構成になっていると思います。C#とPythonのサンプルコードがついてます。\n\n```\n$ tree /f\nE:.\n│  cvexport.manifest\n│  labels.txt\n│  LICENSE\n│  model.onnx\n│\n├─CSharp\n│      ObjectDetection.cs\n│\n└─python\n    │  cntk_predict.py\n    │  object_detection.py\n    │  onnxruntime_predict.py\n    │\n    └─__pycache__\n            object_detection.cpython-36.pyc\n```\n\npythonというフォルダに移動して以下のコードを保存します。\n\n```python:inference.py\nimport cv2\nimport numpy as np\nfrom object_detection import ObjectDetection\nfrom PIL import Image, ImageDraw\n\nfilename = 'test1.png'        # 推論したい画像のパス\nmodelname = '../model.onnx'   # 推論に使うモデルのパス\nlabelpath = '../labels.txt'   # エクスポートした中にあったlabels.txtへのパス\n\nclass ODbyCV2(ObjectDetection):\n    def __init__(self, model_filename, labels):\n        super(ODbyCV2, self).__init__(labels)\n        self.model = cv2.dnn.readNetFromONNX(modelname)\n    def predict(self, img):\n        img = self.pil2cv(img)\n        h,w,c = img.shape\n        self.model.setInput(cv2.dnn.blobFromImage(img,size=(w,h),swapRB=True,crop=False))\n        results = self.model.forward()\n        return np.squeeze(results).transpose((1,2,0)).astype(np.float32)\n    def pil2cv(self, image):\n        new_image = np.array(image, dtype=np.uint8)\n        if new_image.ndim == 2:\n            pass\n        elif new_image.shape[2] == 3:\n            new_image = cv2.cvtColor(new_image, cv2.COLOR_RGB2BGR)\n        elif new_image.shape[2] == 4:\n            new_image = cv2.cvtColor(new_image, cv2.COLOR_RGBA2BGRA)\n        return new_image\n\n# ラベル読み込み\nwith open(labelpath, 'r') as f:\n    labels = [l.strip() for l in f.readlines()]\n\nmodel = ODbyCV2(modelname,labels)\nimg = Image.open(filename)\n\n# 推論\nresults = model.predict_image(img)\nprint(results)\n\n# 以下推論結果の表示\nimg = cv2.imread(filename)\nheight,width,channel = img.shape\n\nfont_face = cv2.FONT_HERSHEY_DUPLEX\nfont_scale = 0.6\nfont_thickness = 1\nfor result in [results[0]]:\n    # if result['probability'] \u003e= 0.3:\n    text_str = str(int(result['tagName']))\n    text_w, text_h = cv2.getTextSize(text_str, font_face, font_scale, font_thickness)[0]\n    score_w, score_h = cv2.getTextSize(str(round(result['probability'],2)), font_face, font_scale, font_thickness)[0]\n    x1 = int(width*result['boundingBox']['left'])\n    y1 = int(height*result['boundingBox']['top'])\n    x2 = int(width*result['boundingBox']['width']+width*result['boundingBox']['left'])\n    y2 = int(height*result['boundingBox']['height']+height*result['boundingBox']['top'])\n    text_pt = (x1, y1 - 3)\n    text_color = [255,255,255]\n    rgb = [255,0,0]\n    cv2.rectangle(img, (x1, y1),(x2,y2),rgb,2)\n    cv2.rectangle(img, (x1, y1),(x1+text_w,y1-text_h-4),rgb,-1)\n    cv2.rectangle(img, (x1, y1),(x1+score_w,y1+score_h+4),rgb,-1)\n    cv2.putText(img, text_str, text_pt, font_face, font_scale, text_color, font_thickness, cv2.LINE_AA)\n    cv2.putText(img, str(round(result['probability'],2)), (x1, y1 +score_h), font_face, font_scale, text_color, font_thickness, cv2.LINE_AA)\n        \ncv2.imshow('test',img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n```\n\nエクスポートしてきたときについているサンプルコードを参考にしました。object_detection.pyのObjectDetectionクラスを継承してpredict関数をオーバーライドしています。このコードを実行すると以下のような結果が得られます。8がtagName、0.72がprobabilityです。\n\n![result.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/685335/763bd8b5-676e-bfbc-9e20-14ac65d0121c.png)\n\n# ラズパイ(Windows10)で推論\n\n結論からいうと上記と全く同じ流れでできます。しかし、NumpyがWindows＋Armに対応してないのか、import時に以下のようなwarningが出て、推論時にもたくさんwarningが出てきます。\n\n```\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:172: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-112)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:51: RuntimeWarning: divide by zero encountered in log10\n  self.precision = int(-log10(self.eps))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:52: RuntimeWarning: divide by zero encountered in power\n  self.resolution = float_to_float(float_conv(10) ** (-self.precision))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:184: RuntimeWarning: divide by zero encountered in exp2\n  epsneg_f80 = exp2(ld(-64))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:185: RuntimeWarning: divide by zero encountered in exp2\n  tiny_f80 = exp2(ld(-16382))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:199: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-63)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:212: RuntimeWarning: divide by zero encountered in nextafter\n  if hasattr(umath, 'nextafter')  # Missing on some platforms?\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:224: RuntimeWarning: divide by zero encountered in exp2\n  eps=exp2(ld(-105)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:225: RuntimeWarning: divide by zero encountered in exp2\n  epsneg= exp2(ld(-106)),\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\core\\getlimits.py:227: RuntimeWarning: divide by zero encountered in exp2\n  tiny=exp2(ld(-1022)))\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\__init__.py:316: RuntimeWarning: divide by zero encountered in subtract\n  if not abs(x.dot(x) - 2.0) \u003c 1e-5:\nC:\\Users\\pi\\anaconda3\\envs\\test\\lib\\site-packages\\numpy\\__init__.py:316: RuntimeWarning: divide by zero encountered in absolute\n  if not abs(x.dot(x) - 2.0) \u003c 1e-5:\n```\n\n[ここ](https://github.com/numpy/numpy/issues/17747)に同じwarningが出るという報告がありますが解決策はわからず...。import時はともかく推論実行時に出るのでうまく推論できているのかもわからないです(同じような結果が得られるのでただしそうではありますが...)。解決策があれば教えてください。\n\n\n# おわりに\nお疲れさまでした。opencvでCustomVisionのモデルの推論をしました。cv2.dnn.forward()の出力が何を表しているかもわかっていないので知っている方は教えていただければ幸いです。\n\n間違い等ありましたらご指摘よろしくお願いします。\n\n# 参考\n\n- [ラズパイ4にWindows 10 on ARM64をインストールする](https://qiita.com/mkht/items/9d173334dc5b26bfef46)\n- [【Python】Pillow ↔ OpenCV 変換](https://qiita.com/derodero24/items/f22c22b22451609908ee)\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:27:07+09:00",
    "group": null,
    "id": "2563d48bd2fb4637fccb",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "OpenCV",
        "versions": []
      },
      {
        "name": "RaspberryPi",
        "versions": []
      },
      {
        "name": "CustomVision",
        "versions": []
      }
    ],
    "title": "OpenCVでCustomVision推論",
    "updated_at": "2020-11-17T22:27:07+09:00",
    "url": "https://qiita.com/yosiiii/items/2563d48bd2fb4637fccb",
    "user": {
      "description": "大学院で制御工学を勉強しています。\r\n趣味はバイクに乗ることです。",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 0,
      "github_login_name": null,
      "id": "yosiiii",
      "items_count": 4,
      "linkedin_id": "",
      "location": "熊本",
      "name": "",
      "organization": "",
      "permanent_id": 685335,
      "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/685335/4d33f198913677e047436cbae520aca39cc407b3/large.png?1602159536",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e開発環境\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003emacOS Big Sur\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e下記の記事を参考に環境構築を行ったのですが、\u003cbr\u003e\nやれ\u003ccode\u003ewget\u003c/code\u003eコマンドが無いだの、\u003ccode\u003eapt-get\u003c/code\u003eコマンドが無いだの初心者の方への導入への障壁がいくつかあったため、\u003cbr\u003e\nそれを乗り越えるための記事にしたいと思います。（※注：下記の記事は決して悪くありません。）\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eタイトル\u003c/th\u003e\n\u003cth\u003eリンク\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e5分で作るLaravel＋Vue.js開発環境（docker-compose）\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://qiita.com/yusukeito58/items/37bd551560e495dbd1b8\" class=\"autolink\" id=\"reference-78c879742258b3fc1629\"\u003ehttps://qiita.com/yusukeito58/items/37bd551560e495dbd1b8\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apt-getコマンドインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apt-get%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eapt-get\u003c/code\u003eコマンドインストール\u003c/h1\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eタイトル\u003c/th\u003e\n\u003cth\u003eリンク\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eMac - wgetコマンドをインストール（使えるようにする）\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://qiita.com/th4inf/items/f85c1b91065d85af67b9\" class=\"autolink\" id=\"reference-62bbad6e8aee0d509ec6\"\u003ehttps://qiita.com/th4inf/items/f85c1b91065d85af67b9\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apt-getコマンドインストール-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apt-get%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eapt-get\u003c/code\u003eコマンドインストール\u003c/h1\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eタイトル\u003c/th\u003e\n\u003cth\u003eリンク\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003einstall apt-get to Mac\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://qiita.com/th4inf/items/f85c1b91065d85af67b9\" class=\"autolink\"\u003ehttps://qiita.com/th4inf/items/f85c1b91065d85af67b9\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n",
    "body": "|開発環境|\n|---|\n|macOS Big Sur|\n\n\n\n下記の記事を参考に環境構築を行ったのですが、\nやれ`wget`コマンドが無いだの、`apt-get`コマンドが無いだの初心者の方への導入への障壁がいくつかあったため、\nそれを乗り越えるための記事にしたいと思います。（※注：下記の記事は決して悪くありません。）\n\n|タイトル|リンク|\n|---|---|\n|5分で作るLaravel＋Vue.js開発環境（docker-compose）|https://qiita.com/yusukeito58/items/37bd551560e495dbd1b8|\n\n# `apt-get`コマンドインストール\n|タイトル|リンク|\n|---|---|\n|Mac - wgetコマンドをインストール（使えるようにする）|https://qiita.com/th4inf/items/f85c1b91065d85af67b9|\n\n# `apt-get`コマンドインストール\n|タイトル|リンク|\n|---|---|\n|install apt-get to Mac|https://qiita.com/th4inf/items/f85c1b91065d85af67b9|\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:26:07+09:00",
    "group": null,
    "id": "5c01042ad4f7481447af",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "PHP",
        "versions": []
      },
      {
        "name": "Laravel",
        "versions": []
      },
      {
        "name": "Docker",
        "versions": []
      },
      {
        "name": "Vue.js",
        "versions": []
      }
    ],
    "title": "5分で作るDocker＋Laravel PHP＋Vue.js開発環境構築",
    "updated_at": "2020-11-17T22:26:07+09:00",
    "url": "https://qiita.com/captainUmaru/items/5c01042ad4f7481447af",
    "user": {
      "description": "",
      "facebook_id": "profile.php?id=100004569888629",
      "followees_count": 0,
      "followers_count": 0,
      "github_login_name": null,
      "id": "captainUmaru",
      "items_count": 6,
      "linkedin_id": "",
      "location": "",
      "name": "Lightning Spring",
      "organization": "",
      "permanent_id": 394931,
      "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/394931/9e2fd3fbecbf8a32a5e85941ac53e14fba85487b/large.png?1605104726",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e個人的メモです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ダウンロードしたモデルの場所\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%97%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%A0%B4%E6%89%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eダウンロードしたモデルの場所\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F65b43b75-591d-de15-d2c1-eddc0f7eb037.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=33c5ca5d0fbb131459c611b391302104\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F65b43b75-591d-de15-d2c1-eddc0f7eb037.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=33c5ca5d0fbb131459c611b391302104\" alt=\"Screenshot from 2020-11-17 22-01-28.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/65b43b75-591d-de15-d2c1-eddc0f7eb037.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F65b43b75-591d-de15-d2c1-eddc0f7eb037.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a06ddb7ec8f528d5a88482fd0d4e0a73 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"yamlファイル内容\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#yaml%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%86%85%E5%AE%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eyamlファイル内容\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F01eb2583-ad1d-b60d-93d7-549175ae09c7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f73b31aba4419b08ec985402a0a37401\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F01eb2583-ad1d-b60d-93d7-549175ae09c7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f73b31aba4419b08ec985402a0a37401\" alt=\"Screenshot from 2020-11-17 22-03-22.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/01eb2583-ad1d-b60d-93d7-549175ae09c7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F01eb2583-ad1d-b60d-93d7-549175ae09c7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ff4bf170b2d09c76a1aa7fe759696974 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"stl表示サンプル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#stl%E8%A1%A8%E7%A4%BA%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSTL表示サンプル\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F82a1a84e-2232-7aeb-fbab-92b146d0688c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f1a13f9144430f21f7595d341db8106d\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F82a1a84e-2232-7aeb-fbab-92b146d0688c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f1a13f9144430f21f7595d341db8106d\" alt=\"Screenshot from 2020-11-17 22-11-44.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/82a1a84e-2232-7aeb-fbab-92b146d0688c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F512516%2F82a1a84e-2232-7aeb-fbab-92b146d0688c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d03117a65ee18a7fd02ecd104b7b0bd3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n",
    "body": "個人的メモです。\n\n##ダウンロードしたモデルの場所\n![Screenshot from 2020-11-17 22-01-28.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/65b43b75-591d-de15-d2c1-eddc0f7eb037.png)\n\n##yamlファイル内容\n![Screenshot from 2020-11-17 22-03-22.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/01eb2583-ad1d-b60d-93d7-549175ae09c7.png)\n\n##STL表示サンプル\n![Screenshot from 2020-11-17 22-11-44.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/512516/82a1a84e-2232-7aeb-fbab-92b146d0688c.png)\n\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:17:52+09:00",
    "group": null,
    "id": "7b561d6b4f0b2632c07a",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Gazebo",
        "versions": []
      },
      {
        "name": "Ignition",
        "versions": []
      }
    ],
    "title": "Ignition Gazebo モデル表示　メモ",
    "updated_at": "2020-11-17T22:18:25+09:00",
    "url": "https://qiita.com/moto4MBW/items/7b561d6b4f0b2632c07a",
    "user": {
      "description": null,
      "facebook_id": null,
      "followees_count": 1,
      "followers_count": 0,
      "github_login_name": null,
      "id": "moto4MBW",
      "items_count": 1,
      "linkedin_id": null,
      "location": null,
      "name": "",
      "organization": null,
      "permanent_id": 512516,
      "profile_image_url": "https://secure.gravatar.com/avatar/1bde3ccf590d427de12d8f7ed9661a8b",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": null
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e未経験からエンジニアになって2年目になるのですが、そろそろ何かしらの資格に挑戦してみようかなあと思い、SAAを受験してみました。\u003c/p\u003e\n\n\u003cp\u003e勉強期間、試験内容など、どんな感じだったかまとめていきたいと思います〜\u003c/p\u003e\n\n\u003cp\u003eSAAの試験の概要は\u003ca href=\"https://aws.amazon.com/jp/certification/certified-solutions-architect-associate/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"勉強時間勉強方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8B%89%E5%BC%B7%E6%99%82%E9%96%93%E5%8B%89%E5%BC%B7%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e勉強時間、勉強方法\u003c/h2\u003e\n\n\u003cp\u003e勉強期間はトータルして大体5週間ちょっとぐらいです。9月下旬に勉強を始めて、11月16日に試験を受けたので、期間としては2ヶ月程ありますが、サボったり、仕事が忙しかったり、ドラマにはまってしまったりwと勉強してない期間も結構あったので、そこは省いた期間となります。\u003c/p\u003e\n\n\u003cp\u003e教材は、Udemyで、\u003cbr\u003e\n- AWS認定ソリューションアーキテクト – アソシエイト試験突破講座\u003cbr\u003e\n- AWS認定ソリューションアーキテクト アソシエイト模擬試験問題集\u003c/p\u003e\n\n\u003cp\u003eこの２つを購入しました。\u003c/p\u003e\n\n\u003cp\u003e勉強方法としてはいたってシンプルで、\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e教材の動画をみて内容を理解\u003c/li\u003e\n\u003cli\u003e問題を解く。\u003c/li\u003e\n\u003cli\u003e解けるようになるまで繰り返す。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eこんな感じでやりました。\u003c/p\u003e\n\n\u003cp\u003e正直、これやっとけば全然受かるやろと調子こいてましたが、蓋を開けてみたら、合格ラインが720/1000のところ、741点とめっちゃギリギリで合格してました。。ひえ。。\u003c/p\u003e\n\n\u003cp\u003e今になってから言えることですが、結構ちゃんと勉強しないと受からない試験なんじゃないかなと思います。。\u003c/p\u003e\n\n\u003cp\u003e自分の場合、ただひたすら解いて覚えることに集中してしまい、\u003c/p\u003e\n\n\u003cp\u003e内容を根本から理解する、仕組みを理解する\u003c/p\u003e\n\n\u003cp\u003eといったことがちょっと甘くなってました。\u003c/p\u003e\n\n\u003cp\u003eこれが、あまり点数が取れなかった原因だと思ってます。\u003c/p\u003e\n\n\u003cp\u003eただ、このudemyの教材で、試験直前に復習していた内容が、ほぼほぼそのまま出たりもしました。(逆にそれがなかったら落ちてたんじゃないかとw)\u003c/p\u003e\n\n\u003cp\u003eなので、この教材はすごいおすすめです。\u003c/p\u003e\n\n\u003cp\u003e一つ言うなら、ちょっと解説が分かりにくいというか、足りないことがちょこちょこあるので、そういったところは、随時調べて意味を理解する、、という作業が必要になるかと思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"受験時の試験内容\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%97%E9%A8%93%E6%99%82%E3%81%AE%E8%A9%A6%E9%A8%93%E5%86%85%E5%AE%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e受験時の試験内容\u003c/h2\u003e\n\n\u003cp\u003e試験内容としては、主に\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eEBS, EFS, S3 \u003c/li\u003e\n\u003cli\u003eAuto Scaling, Ec2、CloudFrontあたりを使ったアーキテクチャ構成\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこの辺りの問題が結構出てきた印象でした。\u003c/p\u003e\n\n\u003cp\u003e試験を受けた後に、分野別にスコアと評価が見られるのですが、「高パフォーマンスアーキテクチャの設計」については、再学習した方が良いよーと書かれてました。やはり問題を解くだけでなく、特にアーキテクチャに関しては、自分で図を書いてみたり等、理解することに重点を置いた勉強も大事なのではないかと思いました。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"受験後の感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%97%E9%A8%93%E5%BE%8C%E3%81%AE%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e受験後の感想\u003c/h3\u003e\n\n\u003cp\u003e資格としては取得できたものの、\u003cbr\u003e\n知識としては曖昧な部分も結構多く、決してドヤ顔はできません。\u003c/p\u003e\n\n\u003cp\u003e実際に触ってなんぼ、なところもあるかなと思っているので、\u003cbr\u003e\n改めて、色々アプリを動かしてみながらインフラを触っていくことでもっとできるようになれればと思います〜\u003c/p\u003e\n",
    "body": "未経験からエンジニアになって2年目になるのですが、そろそろ何かしらの資格に挑戦してみようかなあと思い、SAAを受験してみました。\n\n\n勉強期間、試験内容など、どんな感じだったかまとめていきたいと思います〜\n\n\nSAAの試験の概要は[こちら](https://aws.amazon.com/jp/certification/certified-solutions-architect-associate/)\n\n\n## 勉強時間、勉強方法\n\n\n勉強期間はトータルして大体5週間ちょっとぐらいです。9月下旬に勉強を始めて、11月16日に試験を受けたので、期間としては2ヶ月程ありますが、サボったり、仕事が忙しかったり、ドラマにはまってしまったりwと勉強してない期間も結構あったので、そこは省いた期間となります。\n\n教材は、Udemyで、\n- AWS認定ソリューションアーキテクト – アソシエイト試験突破講座\n- AWS認定ソリューションアーキテクト アソシエイト模擬試験問題集\n\nこの２つを購入しました。\n\n勉強方法としてはいたってシンプルで、\n\n1. 教材の動画をみて内容を理解\n2. 問題を解く。\n3. 解けるようになるまで繰り返す。\n\nこんな感じでやりました。\n\n正直、これやっとけば全然受かるやろと調子こいてましたが、蓋を開けてみたら、合格ラインが720/1000のところ、741点とめっちゃギリギリで合格してました。。ひえ。。\n\n\n今になってから言えることですが、結構ちゃんと勉強しないと受からない試験なんじゃないかなと思います。。\n\n自分の場合、ただひたすら解いて覚えることに集中してしまい、\n\n内容を根本から理解する、仕組みを理解する\n\nといったことがちょっと甘くなってました。\n\n\nこれが、あまり点数が取れなかった原因だと思ってます。\n\n\nただ、このudemyの教材で、試験直前に復習していた内容が、ほぼほぼそのまま出たりもしました。(逆にそれがなかったら落ちてたんじゃないかとw)\n\n\nなので、この教材はすごいおすすめです。\n\n一つ言うなら、ちょっと解説が分かりにくいというか、足りないことがちょこちょこあるので、そういったところは、随時調べて意味を理解する、、という作業が必要になるかと思います。\n\n\n## 受験時の試験内容\n\n試験内容としては、主に\n\n- EBS, EFS, S3 \n- Auto Scaling, Ec2、CloudFrontあたりを使ったアーキテクチャ構成\n\n\nこの辺りの問題が結構出てきた印象でした。\n\n\n試験を受けた後に、分野別にスコアと評価が見られるのですが、「高パフォーマンスアーキテクチャの設計」については、再学習した方が良いよーと書かれてました。やはり問題を解くだけでなく、特にアーキテクチャに関しては、自分で図を書いてみたり等、理解することに重点を置いた勉強も大事なのではないかと思いました。\n\n\n### 受験後の感想\n\n資格としては取得できたものの、\n知識としては曖昧な部分も結構多く、決してドヤ顔はできません。\n\n実際に触ってなんぼ、なところもあるかなと思っているので、\n改めて、色々アプリを動かしてみながらインフラを触っていくことでもっとできるようになれればと思います〜\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:15:48+09:00",
    "group": null,
    "id": "a6df3f43d3bd4b4ffe00",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "AWS",
        "versions": []
      },
      {
        "name": "saa",
        "versions": []
      },
      {
        "name": "SAA-C02",
        "versions": []
      }
    ],
    "title": "SAAに合格したのでどんな感じだったか書いてみる",
    "updated_at": "2020-11-17T22:15:48+09:00",
    "url": "https://qiita.com/katsu_puchi/items/a6df3f43d3bd4b4ffe00",
    "user": {
      "description": "",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 0,
      "github_login_name": null,
      "id": "katsu_puchi",
      "items_count": 1,
      "linkedin_id": "",
      "location": "",
      "name": "カツ",
      "organization": "",
      "permanent_id": 399271,
      "profile_image_url": "https://pbs.twimg.com/profile_images/1210581518680088577/KVDMP6l6_bigger.jpg",
      "team_only": false,
      "twitter_screen_name": "katsu_puchi",
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003eコンテナ初学者の新人社員でk8sを勉強しています。\u003c/p\u003e\n\n\u003cp\u003e今回はAWSのEC2にMinikubeをインストールして、nginxのテストページが見れるまでの手順を記したいと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"開発環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開発環境\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eAWS EC2 t3.small\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e今回、Minikubeを利用する環境として、EC2のt3.smallを選択しました。\u003cbr\u003e\n2GB以上のメモリや20GB以上のディスクスペースがないとMinikubeをうまくインストールできないようです。\u003c/p\u003e\n\n\u003cp\u003e多少料金がかかってしまいます。試す場合は注意しましょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h1\u003e\n\n\u003cp\u003eEC2インスタンスを起動する手順までは省きます。私はやりなれているUbuntuをインストールしたEC2を選択しました。\u003c/p\u003e\n\n\u003cp\u003e以下のように入力して起動したEC2に接続します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ ssh -i test-key.pem ubuntu@xxx.xxx.xxx.xxx\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003etest-key.pem はEC2を作成した際にダウンロードした鍵のファイル名です。\u003cbr\u003e\nxxx.xxx.xxx.xxx はEC2のパブリックIPを指定します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"dockerのインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#docker%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDockerのインストール\u003c/h3\u003e\n\n\u003cp\u003e無事EC2に接続できたらDockerをインストールしましょう。\u003cbr\u003e\nほぼ\u003ca href=\"https://docs.docker.com/engine/install/ubuntu/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式の手順通り\u003c/a\u003eです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDockerのインストール\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eUbuntuのパッケージをアップデート\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get update\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e必要なパッケージのインストール\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get \u003cspan class=\"nb\"\u003einstall\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    apt-transport-https \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    ca-certificates \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    curl \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    gnupg-agent \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    software-properties-common\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eDockerの公式GPGキーの追加\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ecurl \u003cspan class=\"nt\"\u003e-fsSL\u003c/span\u003e https://download.docker.com/linux/ubuntu/gpg | \u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-key add -\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eDockerのダウンロードサイトをaptレポジトリに追加\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eadd-apt-repository \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n   \u003cspan class=\"s2\"\u003e\"deb [arch=amd64] https://download.docker.com/linux/ubuntu \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\u003c/span\u003e\u003cspan class=\"s2\"\u003e\n   \u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003elsb_release \u003cspan class=\"nt\"\u003e-cs\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\u003c/span\u003e\u003cspan class=\"s2\"\u003e\n   stable\"\u003c/span\u003e\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eDocker Engineのインストール\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get update\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get \u003cspan class=\"nb\"\u003einstall \u003c/span\u003edocker-ce docker-ce-cli containerd.io\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eバージョンが表示されればインストール成功\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003edocker \u003cspan class=\"nt\"\u003e--version\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"minikubeのインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#minikube%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMinikubeのインストール\u003c/h3\u003e\n\n\u003cp\u003e続いてMinikubeをインストールしましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eminikubeのダウンロードと実行権限の付与\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ecurl \u003cspan class=\"nt\"\u003e-Lo\u003c/span\u003e minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003echmod\u003c/span\u003e +x minikube\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eminikubeバイナリの移動\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo mv \u003c/span\u003eminikube /usr/local/bin/\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eバージョンが表示されればインストール成功\n\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eminikube version\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"kubectlのインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#kubectl%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ekubectlのインストール\u003c/h3\u003e\n\n\u003cp\u003eKubernetesはkubectlコマンドを使って操作するので、kubectlコマンドをインストールしていきます。\u003cbr\u003e\n\u003ca href=\"https://kubernetes.io/ja/docs/tasks/tools/install-kubectl/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式の手順\u003c/a\u003e通りです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e必要なパッケージのインストール\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get update \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get \u003cspan class=\"nb\"\u003einstall\u003c/span\u003e \u003cspan class=\"nt\"\u003e-y\u003c/span\u003e apt-transport-https gnupg2\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectlのパッケージを追加\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ecurl \u003cspan class=\"nt\"\u003e-s\u003c/span\u003e https://packages.cloud.google.com/apt/doc/apt-key.gpg | \u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-key add - \n\u003cspan class=\"go\"\u003e  echo \"deb https://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list\n\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectlのインストール\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get update\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt-get \u003cspan class=\"nb\"\u003einstall\u003c/span\u003e \u003cspan class=\"nt\"\u003e-y\u003c/span\u003e kubectl\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eバージョンが表示されればインストール成功\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl version \u003cspan class=\"nt\"\u003e--client\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e最後にMinikubeを起動します。\u003cbr\u003e\nエラーがなければ無事起動できています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eminikube start \u003cspan class=\"nt\"\u003e--vm-driver\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003enone\n\u003cspan class=\"go\"\u003e・\n・\n・\n💡  This can also be done automatically by setting the env var CHANGE_MINIKUBE_NONE_USER=true\n🔎  Verifying Kubernetes components...\n🌟  Enabled addons: storage-provisioner, default-storageclass\n🏄  Done! kubectl is now configured to use \"minikube\" by default\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"マニフェストファイルの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%83%8B%E3%83%95%E3%82%A7%E3%82%B9%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eマニフェストファイルの作成\u003c/h1\u003e\n\n\u003cp\u003ekubectlを用いてリソースの操作をするわけですが、リソースの設定値が多いので、kubectlの引数で細かく設定するのはあまり現実的ではありません。\u003cbr\u003e\nそのため、リソースの情報はファイルに記述しておいて、作成したファイルをkubectlに読み込ませるというやり方が一般的なようです。\u003c/p\u003e\n\n\u003cp\u003eリソースの情報を「マニフェスト」と呼び、それを記述したファイルのことを「マニフェストファイル」と呼びます。\u003cbr\u003e\nマニフェストファイルはJSON形式またはYAML形式で記述するのですが、読みやすいYAML形式で記述されているものがほとんどです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"pod作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#pod%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePod作成\u003c/h3\u003e\n\n\u003cp\u003eそれでは nginx のPodを作っていきましょう。\u003cbr\u003e\nPodのマニフェストファイルは以下のように記述しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003enginx.yaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"na\"\u003eapiVersion\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"na\"\u003ekind\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003ePod\u003c/span\u003e\n\u003cspan class=\"na\"\u003emetadata\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003etest-nginx\u003c/span\u003e \n\u003cspan class=\"na\"\u003espec\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003econtainers\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003emy-nginx-container\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eimage\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003enginx:latest\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003econtainerPort\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e80\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003ePodをつくりたいので、kindにはPodと指定しておきます。\u003cbr\u003e\nmetadataには、Podの名前を指定します。test-nginxとしました。\u003cbr\u003e\nspecでは、Podの詳細情報を記します。\u003cbr\u003e\ncontainerの項目では、nameにコンテナ名、imageにはイメージ名、portsではコンテナが使用するポート番号を指定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ePod作成\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl create \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e nginx.yaml\n\u003cspan class=\"go\"\u003epod/test-nginx created\n\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ePodの状態を確認\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl get pods\n\u003cspan class=\"go\"\u003eNAME         READY   STATUS    RESTARTS   AGE\ntest-nginx   1/1     Running   0          8s\n\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ePodの詳細情報の取得\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl describe pods my-pod\n\u003cspan class=\"go\"\u003eName:         test-nginx\nNamespace:    default\nPriority:     0\nNode:         ip-10-0-1-23/10.0.1.23\nStart Time:   Sat, 14 Nov 2020 10:28:37 +0000\n\u003c/span\u003e\u003cspan class=\"gp\"\u003eLabels:       \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003eAnnotations:  \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003eStatus:       Running\nIP:           172.17.0.3\nIPs:\n  IP:  172.17.0.3\nContainers:\n  my-nginx-container:\n    Container ID:   docker://a580525cc1eb22f7a237b2d3424f8899ba04cf17ec71a1c2810c6d7e9700ebfc\n    Image:          nginx:latest\n    Image ID:       docker-pullable://nginx@sha256:aeade65e99e5d5e7ce162833636f692354c227ff438556e5f3ed0335b7cc2f1b\n    Port:           80/TCP\n    Host Port:      0/TCP\n    State:          Running\n      Started:      Sat, 14 Nov 2020 10:28:42 +0000\n    Ready:          True\n    Restart Count:  0\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e    Environment:    \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003e    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-5qpwm (ro)\nConditions:\n  Type              Status\n  Initialized       True\n  Ready             True\n  ContainersReady   True\n  PodScheduled      True\nVolumes:\n  default-token-5qpwm:\n    Type:        Secret (a volume populated by a Secret)\n    SecretName:  default-token-5qpwm\n    Optional:    false\nQoS Class:       BestEffort\n\u003c/span\u003e\u003cspan class=\"gp\"\u003eNode-Selectors:  \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003eTolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\n                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\nEvents:\n  Type    Reason     Age    From               Message\n  ----    ------     ----   ----               -------\n  Normal  Scheduled  2m16s  default-scheduler  Successfully assigned default/test-nginx to ip-10-0-1-23\n  Normal  Pulling    2m16s  kubelet            Pulling image \"nginx:latest\"\n  Normal  Pulled     2m13s  kubelet            Successfully pulled image \"nginx:latest\" in 3.237396456s\n  Normal  Created    2m13s  kubelet            Created container my-nginx-container\n  Normal  Started    2m12s  kubelet            Started container my-nginx-container\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003ekubectl describe\u003c/code\u003e でPodのIPアドレスは \u003ccode\u003e172.17.0.3\u003c/code\u003eだということがわかりました。\u003cbr\u003e\ncurlコマンドを実行してみると、nginxが起動していることがわかります。\u003cbr\u003e\nただこのままだとテストページを見ることができません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ecurl 172.17.0.3\n\u003cspan class=\"gp\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;html\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;head\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;title\u0026gt;\u003c/span\u003eWelcome to nginx!\u0026lt;/title\u0026gt;\n\u003cspan class=\"gp\"\u003e\u0026lt;style\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003e    body {\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e        width: 35em;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e        margin: 0 auto;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e        font-family: Tahoma, Verdana, Arial, sans-serif;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003e    }\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;/style\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;body\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;h1\u0026gt;\u003c/span\u003eWelcome to nginx!\u0026lt;/h1\u0026gt;\n\u003cspan class=\"gp\"\u003e\u0026lt;p\u0026gt;\u003c/span\u003eIf you see this page, the nginx web server is successfully installed and\n\u003cspan class=\"gp\"\u003eworking. Further configuration is required.\u0026lt;/p\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;p\u0026gt;\u003c/span\u003eFor online documentation and support please refer to\n\u003cspan class=\"gp\"\u003e\u0026lt;a href=\"http://nginx.org/\"\u0026gt;\u003c/span\u003enginx.org\u0026lt;/a\u0026gt;.\u0026lt;br/\u0026gt;\n\u003cspan class=\"go\"\u003eCommercial support is available at\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;a href=\"http://nginx.com/\"\u0026gt;\u003c/span\u003enginx.com\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u003cspan class=\"go\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;p\u0026gt;\u003c/span\u003e\u0026lt;em\u0026gt;Thank you \u003cspan class=\"k\"\u003efor \u003c/span\u003eusing nginx.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u003cspan class=\"gp\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e\u0026lt;/html\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"テストページの確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテストページの確認\u003c/h1\u003e\n\n\u003cp\u003e今度はテストページが見れるようにするための設定をしていきましょう。\u003cbr\u003e\nあまり意味はないですが、複数Podの起動も合わせてやっていきましょう。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"deplymentの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#deplyment%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDeplymentの作成\u003c/h3\u003e\n\n\u003cp\u003eDeploymentを使って複数Podを作成できるようにします。\u003cbr\u003e\nDeploymentのマニフェストファイルは以下のように記述しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003edeployment.yaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"na\"\u003eapiVersion\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eapps/v1\u003c/span\u003e\n\u003cspan class=\"na\"\u003ekind\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eDeployment\u003c/span\u003e\n\u003cspan class=\"na\"\u003emetadata\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003emy-deploymnet\u003c/span\u003e\n\u003cspan class=\"na\"\u003espec\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003ereplicas\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eselector\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ematchLabels\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eapp\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003emy-nginx\u003c/span\u003e\n  \u003cspan class=\"na\"\u003etemplate\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003emetadata\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003elabels\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eapp\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003emy-nginx\u003c/span\u003e\n    \u003cspan class=\"na\"\u003espec\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003econtainers\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003etest-nginx\u003c/span\u003e\n          \u003cspan class=\"na\"\u003eimage\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003enginx:latest\u003c/span\u003e\n          \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003econtainerPort\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e80\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eDeploymentのAPIGROUPはappsなので、apiVersionを \u003ccode\u003eapps/v1\u003c/code\u003e とします。\u003ccode\u003ekubectl api-resources\u003c/code\u003e と実行すると確認できます。\u003cbr\u003e\nmetadataでは、Deploymentの名前を指定します。\u003cbr\u003e\nspecでは、Deploymentの詳細情報を記述していきます。\u003cbr\u003e\nReplicaSetでは、レプリカ数を指定します。このファイルの場合、同じ構成のPodを2つ作成するという意味になります。\u003cbr\u003e\nselectorでは、どのようなPodを作成するのかを指定します。app: my-nginxと指定しますが、すぐ下のtemplateで定義されたものを使用するという意味です。\u003cbr\u003e\ntemplateで具体的なPodの情報を記述します。selectorで選択してもらえるようにapp: my-nginx と設定します。\u003cbr\u003e\nそれ以外は \u003ccode\u003enginx.yaml\u003c/code\u003e と同じように記述します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"serviceの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#service%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eServiceの作成\u003c/h3\u003e\n\n\u003cp\u003e次はServiceを使って外部からアクセスできるようにします。\u003cbr\u003e\nServiceのマニフェストファイルは以下のように記述しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eservice.yaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"na\"\u003eapiVersion\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"na\"\u003ekind\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eService\u003c/span\u003e\n\u003cspan class=\"na\"\u003emetadata\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \n  \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003enginx-service\u003c/span\u003e\n\u003cspan class=\"na\"\u003espec\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003etype\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eNodePort\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003enodePort\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e30000\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eport\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e8080\u003c/span\u003e\n      \u003cspan class=\"na\"\u003etargetPort\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e80\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eprotocol\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eTCP\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eselector\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eapp\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003emy-nginx\u003c/span\u003e \n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eapiVersionでは、\u003ccode\u003ekubectl api-resources\u003c/code\u003eで確認したところ空欄なので\u003ccode\u003ev1\u003c/code\u003eとします。\u003cbr\u003e\nmetadataでは、Serviceの名前を指定します。\u003cbr\u003e\nspecでは、Serviceの詳細を記述していきます。\u003cbr\u003e\ntypeはServiceの種類を指定します。ここでは、ノード（今回だとEC2）のIPアドレスを通じてアクセスできるNodePortとしました。試してないですが、ほかの種類にしてもできるかもしれません。\u003cbr\u003e\nportsでは、ポートの設定を行います。\u003cbr\u003e\nnodePortはノードのポート番号、portはServiceのポート番号、targetPortはPodのポート番号です。\u003cbr\u003e\nノードがポート30000で通信を待ち受け、そこからServiceのポート8080に転送、最後にPodのポート80に転送というような流れとなります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"serviceを使ってnginxのテストページを確認する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#service%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6nginx%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eServiceを使ってnginxのテストページを確認する\u003c/h3\u003e\n\n\u003cp\u003eDeploymentとService オブジェクトを用いて、nginxのテストページを確認していきます。\u003cbr\u003e\nServiceのポートは8080、ノードのポートには30000が割り当てられていることがわかります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eDeploymentオブジェクトの作成\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl create \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e deployment.yaml\n\u003cspan class=\"go\"\u003edeployment.apps/my-deploymnet created\n\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eServiceオブジェクトの作成\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl create \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e service.yaml\n\u003cspan class=\"go\"\u003eservice/nginx-service created\n\n\u003c/span\u003e\u003cspan class=\"gp\"\u003e#\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003eServiceの状態を確認\n\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ekubectl get services\n\u003cspan class=\"go\"\u003eNAME            TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE\n\u003c/span\u003e\u003cspan class=\"gp\"\u003ekubernetes      ClusterIP   10.96.0.1       \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e443/TCP          11d\n\u003cspan class=\"gp\"\u003enginx-service   NodePort    10.110.191.26   \u0026lt;none\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e8080:30000/TCP   82s\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまだやることがあります。\u003cbr\u003e\nEC2のセキュリティグループの設定で30000ポートを許可してあげないとテストページが見れません。\u003cbr\u003e\n※初めてやったときにここでつまりました笑\u003c/p\u003e\n\n\u003cp\u003eAWSにログインして、EC2 \u0026gt; セキュリティグループでEC2に割り当てたセキュリティグループ名を選択し、インバウンドルールを編集というボタンがあるのでそのボタンをクリックします。\u003c/p\u003e\n\n\u003cp\u003e私は以下のように設定しました。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2F7c1d0d02-cf16-9eea-ae1a-fa3c2242673b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=466babcf3ecb92b949c986b7154d00b9\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2F7c1d0d02-cf16-9eea-ae1a-fa3c2242673b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=466babcf3ecb92b949c986b7154d00b9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/379397/7c1d0d02-cf16-9eea-ae1a-fa3c2242673b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2F7c1d0d02-cf16-9eea-ae1a-fa3c2242673b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4de0a4bf01aba21087eb7df0d776e88a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eブラウザで \u003ccode\u003exxx.xxx.xxx.xxx:30000\u003c/code\u003e（xxx.xxx.xxx.xxxはEC2のパブリックIP）に接続するとnginxのテストページを確認できました。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2Fad6d30bc-7b6f-d3b6-8f2e-ad4eb976ab64.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2ccb389bd8458517dd1a27ce5d068d5e\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2Fad6d30bc-7b6f-d3b6-8f2e-ad4eb976ab64.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2ccb389bd8458517dd1a27ce5d068d5e\" alt=\"キャプチャ.PNG\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/379397/ad6d30bc-7b6f-d3b6-8f2e-ad4eb976ab64.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F379397%2Fad6d30bc-7b6f-d3b6-8f2e-ad4eb976ab64.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=37735ab254f45b3ecc4696b2dbd9c8fe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e感想\u003c/h1\u003e\n\n\u003cp\u003e今回の検証を通して、Kubernetesの基本的な使い方をなんとなく知ることができました。\u003cbr\u003e\n手を動かしたほうが、理解が進んだような気がします。\u003c/p\u003e\n\n\u003cp\u003e今度は以前やったBIND, Unboundのマニフェスト化に取り組んでいけたらと思います。\u003c/p\u003e\n",
    "body": "コンテナ初学者の新人社員でk8sを勉強しています。\n\n今回はAWSのEC2にMinikubeをインストールして、nginxのテストページが見れるまでの手順を記したいと思います。\n\n#開発環境\n* AWS EC2 t3.small\n\n今回、Minikubeを利用する環境として、EC2のt3.smallを選択しました。\n2GB以上のメモリや20GB以上のディスクスペースがないとMinikubeをうまくインストールできないようです。\n\n多少料金がかかってしまいます。試す場合は注意しましょう。\n\n#準備\n\nEC2インスタンスを起動する手順までは省きます。私はやりなれているUbuntuをインストールしたEC2を選択しました。\n\n以下のように入力して起動したEC2に接続します。\n\n```\n$ ssh -i test-key.pem ubuntu@xxx.xxx.xxx.xxx\n```\n\ntest-key.pem はEC2を作成した際にダウンロードした鍵のファイル名です。\nxxx.xxx.xxx.xxx はEC2のパブリックIPを指定します。\n\n\n###Dockerのインストール\n無事EC2に接続できたらDockerをインストールしましょう。\nほぼ[公式の手順通り](https://docs.docker.com/engine/install/ubuntu/)です。\n\n```terminal:Dockerのインストール\n# Ubuntuのパッケージをアップデート\n$ sudo apt-get update\n\n# 必要なパッケージのインストール\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n\n# Dockerの公式GPGキーの追加\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n\n# Dockerのダウンロードサイトをaptレポジトリに追加\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n\n# Docker Engineのインストール\n$ sudo apt-get update\n$ sudo apt-get install docker-ce docker-ce-cli containerd.io\n\n# バージョンが表示されればインストール成功\n$ sudo docker --version\n```\n\n###Minikubeのインストール\n続いてMinikubeをインストールしましょう。\n\n```terminal\n# minikubeのダウンロードと実行権限の付与\n$ curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \\\n  \u0026\u0026 chmod +x minikube\n\n# minikubeバイナリの移動\n$ sudo mv minikube /usr/local/bin/\n\n# バージョンが表示されればインストール成功\n# minikube version\n```\n\n###kubectlのインストール\nKubernetesはkubectlコマンドを使って操作するので、kubectlコマンドをインストールしていきます。\n[公式の手順](https://kubernetes.io/ja/docs/tasks/tools/install-kubectl/)通りです。\n\n```terminal\n# 必要なパッケージのインストール\n$ sudo apt-get update \u0026\u0026 sudo apt-get install -y apt-transport-https gnupg2\n\n# kubectlのパッケージを追加\n$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add - \n  echo \"deb https://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list\n\n# kubectlのインストール\n$ sudo apt-get update\n$ sudo apt-get install -y kubectl\n\n# バージョンが表示されればインストール成功\n$ kubectl version --client\n```\n\n最後にMinikubeを起動します。\nエラーがなければ無事起動できています。\n\n```terminal\n$ sudo minikube start --vm-driver=none\n・\n・\n・\n💡  This can also be done automatically by setting the env var CHANGE_MINIKUBE_NONE_USER=true\n🔎  Verifying Kubernetes components...\n🌟  Enabled addons: storage-provisioner, default-storageclass\n🏄  Done! kubectl is now configured to use \"minikube\" by default\n```\n\n#マニフェストファイルの作成\nkubectlを用いてリソースの操作をするわけですが、リソースの設定値が多いので、kubectlの引数で細かく設定するのはあまり現実的ではありません。\nそのため、リソースの情報はファイルに記述しておいて、作成したファイルをkubectlに読み込ませるというやり方が一般的なようです。\n\nリソースの情報を「マニフェスト」と呼び、それを記述したファイルのことを「マニフェストファイル」と呼びます。\nマニフェストファイルはJSON形式またはYAML形式で記述するのですが、読みやすいYAML形式で記述されているものがほとんどです。\n\n###Pod作成\nそれでは nginx のPodを作っていきましょう。\nPodのマニフェストファイルは以下のように記述しました。\n\n```yaml:nginx.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-nginx \nspec:\n  containers:\n    - name: my-nginx-container\n      image: nginx:latest\n      ports:\n        - containerPort: 80\n```\nPodをつくりたいので、kindにはPodと指定しておきます。\nmetadataには、Podの名前を指定します。test-nginxとしました。\nspecでは、Podの詳細情報を記します。\ncontainerの項目では、nameにコンテナ名、imageにはイメージ名、portsではコンテナが使用するポート番号を指定します。\n\n```terminal\n# Pod作成\n$ kubectl create -f nginx.yaml\npod/test-nginx created\n\n# Podの状態を確認\n$ kubectl get pods\nNAME         READY   STATUS    RESTARTS   AGE\ntest-nginx   1/1     Running   0          8s\n\n# Podの詳細情報の取得\n$ kubectl describe pods my-pod\nName:         test-nginx\nNamespace:    default\nPriority:     0\nNode:         ip-10-0-1-23/10.0.1.23\nStart Time:   Sat, 14 Nov 2020 10:28:37 +0000\nLabels:       \u003cnone\u003e\nAnnotations:  \u003cnone\u003e\nStatus:       Running\nIP:           172.17.0.3\nIPs:\n  IP:  172.17.0.3\nContainers:\n  my-nginx-container:\n    Container ID:   docker://a580525cc1eb22f7a237b2d3424f8899ba04cf17ec71a1c2810c6d7e9700ebfc\n    Image:          nginx:latest\n    Image ID:       docker-pullable://nginx@sha256:aeade65e99e5d5e7ce162833636f692354c227ff438556e5f3ed0335b7cc2f1b\n    Port:           80/TCP\n    Host Port:      0/TCP\n    State:          Running\n      Started:      Sat, 14 Nov 2020 10:28:42 +0000\n    Ready:          True\n    Restart Count:  0\n    Environment:    \u003cnone\u003e\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-5qpwm (ro)\nConditions:\n  Type              Status\n  Initialized       True\n  Ready             True\n  ContainersReady   True\n  PodScheduled      True\nVolumes:\n  default-token-5qpwm:\n    Type:        Secret (a volume populated by a Secret)\n    SecretName:  default-token-5qpwm\n    Optional:    false\nQoS Class:       BestEffort\nNode-Selectors:  \u003cnone\u003e\nTolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\n                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\nEvents:\n  Type    Reason     Age    From               Message\n  ----    ------     ----   ----               -------\n  Normal  Scheduled  2m16s  default-scheduler  Successfully assigned default/test-nginx to ip-10-0-1-23\n  Normal  Pulling    2m16s  kubelet            Pulling image \"nginx:latest\"\n  Normal  Pulled     2m13s  kubelet            Successfully pulled image \"nginx:latest\" in 3.237396456s\n  Normal  Created    2m13s  kubelet            Created container my-nginx-container\n  Normal  Started    2m12s  kubelet            Started container my-nginx-container\n```\n\n`kubectl describe` でPodのIPアドレスは `172.17.0.3`だということがわかりました。\ncurlコマンドを実行してみると、nginxが起動していることがわかります。\nただこのままだとテストページを見ることができません。\n\n```terminal\n$ curl 172.17.0.3\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n\u003ctitle\u003eWelcome to nginx!\u003c/title\u003e\n\u003cstyle\u003e\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n\u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eWelcome to nginx!\u003c/h1\u003e\n\u003cp\u003eIf you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.\u003c/p\u003e\n\n\u003cp\u003eFor online documentation and support please refer to\n\u003ca href=\"http://nginx.org/\"\u003enginx.org\u003c/a\u003e.\u003cbr/\u003e\nCommercial support is available at\n\u003ca href=\"http://nginx.com/\"\u003enginx.com\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003e\u003cem\u003eThank you for using nginx.\u003c/em\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\n#テストページの確認\n今度はテストページが見れるようにするための設定をしていきましょう。\nあまり意味はないですが、複数Podの起動も合わせてやっていきましょう。\n\n###Deplymentの作成\nDeploymentを使って複数Podを作成できるようにします。\nDeploymentのマニフェストファイルは以下のように記述しました。\n\n```yaml:deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deploymnet\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: my-nginx\n  template:\n    metadata:\n      labels:\n        app: my-nginx\n    spec:\n      containers:\n        - name: test-nginx\n          image: nginx:latest\n          ports:\n            - containerPort: 80\n```\nDeploymentのAPIGROUPはappsなので、apiVersionを `apps/v1` とします。`kubectl api-resources` と実行すると確認できます。\nmetadataでは、Deploymentの名前を指定します。\nspecでは、Deploymentの詳細情報を記述していきます。\nReplicaSetでは、レプリカ数を指定します。このファイルの場合、同じ構成のPodを2つ作成するという意味になります。\nselectorでは、どのようなPodを作成するのかを指定します。app: my-nginxと指定しますが、すぐ下のtemplateで定義されたものを使用するという意味です。\ntemplateで具体的なPodの情報を記述します。selectorで選択してもらえるようにapp: my-nginx と設定します。\nそれ以外は `nginx.yaml` と同じように記述します。\n\n###Serviceの作成\n次はServiceを使って外部からアクセスできるようにします。\nServiceのマニフェストファイルは以下のように記述しました。\n\n```yaml:service.yaml\napiVersion: v1\nkind: Service\nmetadata: \n  name: nginx-service\nspec:\n  type: NodePort\n  ports:\n    - nodePort: 30000\n      port: 8080\n      targetPort: 80\n      protocol: TCP\n  selector:\n    app: my-nginx \n```\napiVersionでは、`kubectl api-resources`で確認したところ空欄なので`v1`とします。\nmetadataでは、Serviceの名前を指定します。\nspecでは、Serviceの詳細を記述していきます。\ntypeはServiceの種類を指定します。ここでは、ノード（今回だとEC2）のIPアドレスを通じてアクセスできるNodePortとしました。試してないですが、ほかの種類にしてもできるかもしれません。\nportsでは、ポートの設定を行います。\nnodePortはノードのポート番号、portはServiceのポート番号、targetPortはPodのポート番号です。\nノードがポート30000で通信を待ち受け、そこからServiceのポート8080に転送、最後にPodのポート80に転送というような流れとなります。\n\n###Serviceを使ってnginxのテストページを確認する\nDeploymentとService オブジェクトを用いて、nginxのテストページを確認していきます。\nServiceのポートは8080、ノードのポートには30000が割り当てられていることがわかります。\n\n```terminal\n# Deploymentオブジェクトの作成\n$ kubectl create -f deployment.yaml\ndeployment.apps/my-deploymnet created\n\n# Serviceオブジェクトの作成\n$ kubectl create -f service.yaml\nservice/nginx-service created\n\n# Serviceの状態を確認\n$ kubectl get services\nNAME            TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE\nkubernetes      ClusterIP   10.96.0.1       \u003cnone\u003e        443/TCP          11d\nnginx-service   NodePort    10.110.191.26   \u003cnone\u003e        8080:30000/TCP   82s\n```\n\nまだやることがあります。\nEC2のセキュリティグループの設定で30000ポートを許可してあげないとテストページが見れません。\n※初めてやったときにここでつまりました笑\n\nAWSにログインして、EC2 \u003e セキュリティグループでEC2に割り当てたセキュリティグループ名を選択し、インバウンドルールを編集というボタンがあるのでそのボタンをクリックします。\n\n私は以下のように設定しました。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/379397/7c1d0d02-cf16-9eea-ae1a-fa3c2242673b.png)\n\nブラウザで `xxx.xxx.xxx.xxx:30000`（xxx.xxx.xxx.xxxはEC2のパブリックIP）に接続するとnginxのテストページを確認できました。\n![キャプチャ.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/379397/ad6d30bc-7b6f-d3b6-8f2e-ad4eb976ab64.png)\n\n#感想\n今回の検証を通して、Kubernetesの基本的な使い方をなんとなく知ることができました。\n手を動かしたほうが、理解が進んだような気がします。\n\n今度は以前やったBIND, Unboundのマニフェスト化に取り組んでいけたらと思います。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:08:46+09:00",
    "group": null,
    "id": "cf48b593249a79fb6718",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "kubernetes",
        "versions": []
      },
      {
        "name": "minikube",
        "versions": []
      }
    ],
    "title": "Minikubeでk8sの基本操作を学ぶ",
    "updated_at": "2020-11-17T22:08:46+09:00",
    "url": "https://qiita.com/e_krecker/items/cf48b593249a79fb6718",
    "user": {
      "description": "都内のIT企業",
      "facebook_id": "",
      "followees_count": 4,
      "followers_count": 0,
      "github_login_name": "ekrecker",
      "id": "e_krecker",
      "items_count": 3,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 379397,
      "profile_image_url": "https://avatars0.githubusercontent.com/u/26991786?v=4",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch2\u003e\n\u003cspan id=\"目次\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%9B%AE%E6%AC%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e目次\u003c/h2\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\"\u003e前提条件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\"\u003eデータアップロードの仕組み\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E9%80%A3%E6%90%BA%E3%81%AE%E8%87%AA%E5%8B%95%E5%8C%96\"\u003eデータ連携の自動化\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\n\u003cp\u003e最近、\u003ca href=\"https://codeforafrica.org\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCode for Africa\u003c/a\u003eという団体が運営している\u003ca href=\"https://open.africa\" rel=\"nofollow noopener\" target=\"_blank\"\u003eopenAFRICA\u003c/a\u003eというアフリカのオープンデータのポータルサイトと、自身がルワンダの水道公社WASACと共同でメンテナンスしている水道ベクトルタイルデータの自動連携機能を、Pythonで実装した。\u003c/p\u003e\n\n\u003cp\u003e日本の自治体のオープンデータサイトでも多く使われていると思われるCKANというAPIを用いているので、自組織が持っているファイルなどのオープンデータをAPI経由で自動連携させたい場合に活用できると思うので、共有したいと思う。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"前提条件\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提条件\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://docs.ckan.org/en/2.7/api/#api-examples\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCKAN API\u003c/a\u003eを使っているオープンデータプラットフォームに自組織のアカウントを持っている\u003c/li\u003e\n\u003cli\u003eGithubでオープンデータを管理している\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこの記事を通して、Githubに置いてあるオープンデータを更新したタイミングで、Github Actionを用いて、CKAN経由でプラットフォーム上のデータを自動連携させるようにします。\u003c/p\u003e\n\n\u003cp\u003eちなみにルワンダの水道公社の水道ベクトルタイルのオープンデータのopenAFRICAのページは以下のリンクにあります。\u003cbr\u003e\n\u003ca href=\"https://open.africa/dataset/rw-water-vectortiles\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://open.africa/dataset/rw-water-vectortiles\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fb46451ae-dd33-af48-1927-63718068c6f8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=17286b83fabd02d5a128a80940ebaff1\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fb46451ae-dd33-af48-1927-63718068c6f8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=17286b83fabd02d5a128a80940ebaff1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/b46451ae-dd33-af48-1927-63718068c6f8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fb46451ae-dd33-af48-1927-63718068c6f8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f1a404a011104fff3b368002432abbb1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eまた水道ベクトルタイルのGithubリポジトリは以下のリンクにあり、毎週水道公社内のサーバーからGithubに自動更新されます。\u003cbr\u003e\n\u003ca href=\"https://github.com/WASAC/vt\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/WASAC/vt\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2F012139e2-6dfd-3244-d44e-fa8d0b57bb91.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4320c4ccfbe33e895fc0e07155f66078\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2F012139e2-6dfd-3244-d44e-fa8d0b57bb91.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4320c4ccfbe33e895fc0e07155f66078\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/012139e2-6dfd-3244-d44e-fa8d0b57bb91.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2F012139e2-6dfd-3244-d44e-fa8d0b57bb91.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=739f7d40dbebee98c5ef90d8f1b798a9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"データアップロードの仕組み\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデータアップロードの仕組み\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"リポジトリのダウンロードとインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%A8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリポジトリのダウンロードとインストール\u003c/h3\u003e\n\n\u003cp\u003epipenvがインストールされていない場合は、まず設定を行ってください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003egit clone https://github.com/watergis/open-africa-uploader\ncd open-africa-uploader\npipenv install\npipenv shell\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ckan-apiを用いたファイルのアップロードの仕組み\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ckan-api%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCKAN APIを用いたファイルのアップロードの仕組み\u003c/h3\u003e\n\n\u003cp\u003eまずリポジトリ内の\u003ccode\u003eOpenAfricaUploader.py\u003c/code\u003eのソースコード全文を載せます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eckanapi\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erequests\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOpanAfricaUploader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e__init__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapi_key\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Constructor\n\n    Args:\n        api_key (string): CKAN api key\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://africaopendata.org'\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapi_key\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eckanapi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRemoteCKAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapikey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"create new package if it does not exist yet.\n\n    Args:\n        url (str): the url of package eg. https://open.africa/dataset/{package url}\n        title (str): the title of package\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epackage_title\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Creating \"{package_title}\" package'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"nb\"\u003elocals\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                            \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_title\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                            \u003cspan class=\"n\"\u003eowner_org\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'water-and-sanitation-corporation-ltd-wasac'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eckanapi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_dict\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'__type'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e'Validation Error'\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e\n          \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_dict\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'That URL is already in use.'\u003c/span\u003e\u003cspan class=\"p\"\u003e]):\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'\"{package_title}\" package already exists'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"nb\"\u003elocals\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n            \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_show\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eraise\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapi\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/api/action/resource_create\"\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"create new resource, or update existing resource\n\n    Args:\n        data (object): data for creating resource. data must contain package_id, name, format, description. If you overwrite existing resource, id also must be included.\n        path (str): file path for uploading\n        api (str, optional): API url for creating or updating. Defaults to \"/api/action/resource_create\". If you want to update, please specify url for \"/api/action/resource_update\"\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapi_url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eapi\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Creating \"{}\"'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapi_url\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003eheaders\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"s\"\u003e'Authorization'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003efiles\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[(\u003c/span\u003e\u003cspan class=\"s\"\u003e'upload'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'rb'\u003c/span\u003e\u003cspan class=\"p\"\u003e))])\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estatus_code\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Error while creating resource: {0}'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Uploaded \"{}\" successfully'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eresource_update\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"update existing resource\n\n    Args:\n        data (object): data for creating resource. data must contain id, package_id, name, format, description.\n        path (str): file path for uploading\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/api/action/resource_update\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eupload_datasets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edescription\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"upload datasets under the package\n\n    Args:\n        path (str): file path for uploading\n        description (str): description for the dataset\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebasename\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eextension\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esplitext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e:].\u003c/span\u003e\u003cspan class=\"n\"\u003elower\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"s\"\u003e'package_id'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n      \u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"s\"\u003e'format'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eextension\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"s\"\u003e'description'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edescription\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eresources\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'resources'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresources\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n      \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nb\"\u003ereversed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresources\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n          \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\n          \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\n\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Resource \"{}\" already exists, it will be overwritten'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_update\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eOpenAfricaUploader.py\u003c/code\u003eを呼び出してファイルをアップロードするソースコードは以下のような感じです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eOpenAfricaUploader\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eOpanAfricaUploader\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003euploader\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOpanAfricaUploader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'rw-water-vectortiles'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e'Vector Tiles for rural water supply systems in Rwanda'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eupload_datasets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eabspath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'../data/rwss.mbtiles'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"s\"\u003e'mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003chr\u003e\n\n\u003cp\u003e一個ずつ説明していきます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"コンストラクタ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンストラクタ\u003c/h4\u003e\n\n\u003cp\u003eこのモジュールはあらかじめopenAFRICAにアップロードするためにベースとなるポータルサイトのURLをコンストラクタ内で設定しています。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eself.data_portal = 'https://africaopendata.org'\u003c/code\u003eの部分のURLを自組織が利用しているCKAN APIのURLと置き換えてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e__init__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapi_key\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Constructor\n\n    Args:\n        api_key (string): CKAN api key\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://africaopendata.org'\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapi_key\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eckanapi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRemoteCKAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapikey\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコンストラクタの呼び出しは次のようになります。\u003ccode\u003eargs.key\u003c/code\u003eにご自身のアカウントのCKAN APIキーを指定してください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003euploader\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOpanAfricaUploader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"パッケージの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージの作成\u003c/h4\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.ckan.org/en/2.7/api/index.html?highlight=package_create#module-ckan.logic.action.create\" rel=\"nofollow noopener\" target=\"_blank\"\u003epackage_create\u003c/a\u003eというAPIを利用してパッケージを作成します。その際引数には以下を指定します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ename=ここで指定した文字列がパッケージのURLになります\u003c/li\u003e\n\u003cli\u003etitle=パッケージのタイトルです\u003c/li\u003e\n\u003cli\u003eowner_org=CKANのポータル上の対象組織のIDです\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e作成に成功すると、パッケージ情報が戻り値として返って来ます。既にある場合はエラーになるため、例外処理の中で既存のパッケージ情報を取得する処理を書いています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"create new package if it does not exist yet.\n\n    Args:\n        url (str): the url of package eg. https://open.africa/dataset/{package url}\n        title (str): the title of package\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epackage_title\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Creating \"{package_title}\" package'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"nb\"\u003elocals\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                            \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_title\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                            \u003cspan class=\"n\"\u003eowner_org\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'water-and-sanitation-corporation-ltd-wasac'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eckanapi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_dict\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'__type'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e'Validation Error'\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e\n          \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_dict\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'That URL is already in use.'\u003c/span\u003e\u003cspan class=\"p\"\u003e]):\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'\"{package_title}\" package already exists'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"nb\"\u003elocals\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n            \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eckan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_show\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eid\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epackage_name\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eraise\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの関数の呼び出し方は以下の通りになります\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'rw-water-vectortiles'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e'Vector Tiles for rural water supply systems in Rwanda'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"リソースの作成及び更新\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90%E5%8F%8A%E3%81%B3%E6%9B%B4%E6%96%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリソースの作成及び更新\u003c/h4\u003e\n\n\u003cp\u003eリソースの作成は\u003ccode\u003eresource_create\u003c/code\u003eという関数で行っています。\u003ccode\u003e/api/action/resource_create\u003c/code\u003eというREST APIを使用して、アップロード対象のバイナリデータやファイル情報などもろもろを渡してあげれば良いです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eapi\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/api/action/resource_create\"\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapi_url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata_portal\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eapi\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Creating \"{}\"'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapi_url\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003eheaders\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"s\"\u003e'Authorization'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIKEY\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                      \u003cspan class=\"n\"\u003efiles\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[(\u003c/span\u003e\u003cspan class=\"s\"\u003e'upload'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'rb'\u003c/span\u003e\u003cspan class=\"p\"\u003e))])\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estatus_code\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Error while creating resource: {0}'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Uploaded \"{}\" successfully'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e但し、\u003ccode\u003eresource_create\u003c/code\u003eだけだとリソースの追加だけしかできず、更新するたびにどんどん数が増えてしまいますので、\u003ccode\u003e/api/action/resource_update\u003c/code\u003eというAPIを使って、既存のリソースがあったら更新してあげるようにします。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eresource_update\u003c/code\u003eの使い方は基本的に\u003ccode\u003eresource_create\u003c/code\u003eと同じで、違いは\u003ccode\u003edata\u003c/code\u003eのなかに\u003ccode\u003eresource_id\u003c/code\u003eがあるかないかだけです\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eresource_update\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/api/action/resource_update\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eresource_create\u003c/code\u003eと\u003ccode\u003eresource_update\u003c/code\u003eをいい感じに組み合わせて、既存のリソースがあったら更新し、なかったら新規作成するという処理にしたのが\u003ccode\u003eupload_datasets\u003c/code\u003eという関数です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eupload_datasets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edescription\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# ファイル名を拡張子と分離します\n\u003c/span\u003e    \u003cspan class=\"n\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebasename\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eextension\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esplitext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e:].\u003c/span\u003e\u003cspan class=\"n\"\u003elower\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# リソース作成用のデータを作ります\n\u003c/span\u003e    \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"s\"\u003e'package_id'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"c1\"\u003e#パッケージのID\n\u003c/span\u003e      \u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e                 \u003cspan class=\"c1\"\u003e#更新対象のファイル名\n\u003c/span\u003e      \u003cspan class=\"s\"\u003e'format'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eextension\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e              \u003cspan class=\"c1\"\u003e#フォーマット（ここでは拡張子にしています）\n\u003c/span\u003e      \u003cspan class=\"s\"\u003e'description'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edescription\u003c/span\u003e        \u003cspan class=\"c1\"\u003e#ファイルの説明\n\u003c/span\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# 既にパッケージ内にリソースがあった場合はアップロード対象のファイル名と同じ名前のリソースがあるかないかチェックする。\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eresources\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'resources'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresources\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n      \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nb\"\u003ereversed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresources\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n          \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\n          \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\n\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e# 同じ名前のリソースがない場合はresource_createを呼び出す\n\u003c/span\u003e        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e# リソースがある場合はdataにIDを設定してresource_updateを呼び出す\n\u003c/span\u003e        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Resource \"{}\" already exists, it will be overwritten'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'name'\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etarget_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'id'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_update\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e# リソースがない場合はresource_createを呼び出す\n\u003c/span\u003e      \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresource_create\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eupload_datasets\u003c/code\u003e関数の呼び出し方は以下のようになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e \u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eupload_datasets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eabspath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'../data/rwss.mbtiles'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"s\"\u003e'mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"アップロードのソースをコマンドラインから呼べるようにする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%92%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89%E5%91%BC%E3%81%B9%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアップロードのソースをコマンドラインから呼べるようにする\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eupload2openafrica.py\u003c/code\u003eでコマンドラインから呼べるようにしています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eargparse\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eOpenAfricaUploader\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eOpanAfricaUploader\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_args\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eprog\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"upload2openafrica.py\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eusage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"%(prog)s [options]\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eargparse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArgumentParser\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprog\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eprog\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eusage\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eusage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd_argument\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--key\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edest\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"key\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehelp\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Your CKAN api key\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd_argument\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--pkg\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edest\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"package\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehelp\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Target url of your package\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd_argument\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--title\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edest\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"title\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehelp\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Title of your package\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd_argument\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--file\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edest\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"file\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehelp\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Relative path of file which you would like to upload\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd_argument\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--desc\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edest\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehelp\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"any description for your file\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eargs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eparse_args\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003e__name__\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"__main__\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eargs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eget_args\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003euploader\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOpanAfricaUploader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epackage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003euploader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eupload_datasets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eabspath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edescription\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e実際に使う際は以下のような感じになります。\u003ccode\u003eupload_mbtiles.sh\u003c/code\u003eというシェルスクリプトを作っています。環境変数に\u003ccode\u003eCKAN_API_KEY\u003c/code\u003eを設定するようにしてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"bash\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\n\u003cspan class=\"c\"\u003e#!/bin/bash\u003c/span\u003e\n\npipenv run python upload2openafrica.py \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e--key\u003c/span\u003e \u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCKAN_API_KEY\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e--pkg\u003c/span\u003e rw-water-vectortiles \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e--title\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Vector Tiles for rural water supply systems in Rwanda\"\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e--file\u003c/span\u003e ../data/rwss.mbtiles \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e--desc\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.\"\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでCKAN APIを使ってオープンデータをアップロードできるようになりました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"データ連携の自動化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E9%80%A3%E6%90%BA%E3%81%AE%E8%87%AA%E5%8B%95%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデータ連携の自動化\u003c/h2\u003e\n\n\u003cp\u003eでも毎回手動でCKANと連携するのは面倒なので、Github Actionで自動化します。ワークフローファイルは以下のような感じです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eopenAFRICA upload\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003eon\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003epush\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ebranches\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"pi\"\u003e[\u003c/span\u003e \u003cspan class=\"nv\"\u003emaster\u003c/span\u003e \u003cspan class=\"pi\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# ここではdataフォルダ以下が更新された場合にワークフローが走るようにしています\u003c/span\u003e\n    \u003cspan class=\"na\"\u003epaths\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003edata/**\"\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003ejobs\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003ebuild\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n\n    \u003cspan class=\"na\"\u003eruns-on\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eubuntu-latest\u003c/span\u003e\n\n    \u003cspan class=\"na\"\u003esteps\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003euses\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eactions/checkout@v2\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eSet up Python \u003c/span\u003e\u003cspan class=\"m\"\u003e3.8\u003c/span\u003e\n      \u003cspan class=\"na\"\u003euses\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eactions/setup-python@v2\u003c/span\u003e\n      \u003cspan class=\"na\"\u003ewith\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"na\"\u003epython-version\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e3.8\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eInstall dependencies\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e# ここでまずPipenvの初期設定をします\u003c/span\u003e\n      \u003cspan class=\"na\"\u003erun\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"pi\"\u003e|\u003c/span\u003e\n        \u003cspan class=\"s\"\u003ecd scripts\u003c/span\u003e\n        \u003cspan class=\"s\"\u003epip install pipenv\u003c/span\u003e\n        \u003cspan class=\"s\"\u003epipenv install\u003c/span\u003e\n    \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eupload to openAFRICA\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e# GithubのリポジトリのSettingsページのSecretsでCKAN_API_KEYという名前で登録しておけば次のようにして環境変数を使うことができます\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eenv\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eCKAN_API_KEY\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e${{secrets.CKAN_API_KEY}}\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e# その上で、シェルスクリプトを呼んであげるようにします\u003c/span\u003e\n      \u003cspan class=\"na\"\u003erun\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"pi\"\u003e|\u003c/span\u003e\n        \u003cspan class=\"s\"\u003ecd scripts\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e./upload_mbtiles.sh\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれだけでGithubにファイルがアップロードされたらオープンデータプラットフォームに自動連携できるようになりました。次の画像はルワンダの水道公社のGithub Acitonが実行された際の画面です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fa6cd15c0-878c-468d-eaa4-be7d7c3762cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e42c7ba37106ac947b761b9c82b59c04\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fa6cd15c0-878c-468d-eaa4-be7d7c3762cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e42c7ba37106ac947b761b9c82b59c04\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/a6cd15c0-878c-468d-eaa4-be7d7c3762cf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F858331%2Fa6cd15c0-878c-468d-eaa4-be7d7c3762cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=32a15816b4a358a801972ccdcb48162a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003eCKAN APIは国内外の様々なオープンソースプラットフォームで使用されています。そのCKAN APIはPythonを用いることで比較的簡単にデータ連携を実装することが可能です。またオープンデータを管理しているのがGithub上なら、Github Actionを用いてさらに容易に自動連携することができます。\u003c/p\u003e\n\n\u003cp\u003e今回openAFRICA向けに作成したモジュールが国内外の他のCKANを使ったオープンデータの利活用に役に立つことを願っています。\u003c/p\u003e\n",
    "body": "## 目次\n\n1. [概要](#概要)\n1. [前提条件](#前提条件)\n1. [データアップロードの仕組み](#データアップロードの仕組み)\n1. [データ連携の自動化](#データ連携の自動化)\n1. [まとめ](#まとめ)\n\n## 概要\n\n最近、[Code for Africa](https://codeforafrica.org)という団体が運営している[openAFRICA](https://open.africa)というアフリカのオープンデータのポータルサイトと、自身がルワンダの水道公社WASACと共同でメンテナンスしている水道ベクトルタイルデータの自動連携機能を、Pythonで実装した。\n\n日本の自治体のオープンデータサイトでも多く使われていると思われるCKANというAPIを用いているので、自組織が持っているファイルなどのオープンデータをAPI経由で自動連携させたい場合に活用できると思うので、共有したいと思う。\n\n## 前提条件\n\n- [CKAN API](https://docs.ckan.org/en/2.7/api/#api-examples)を使っているオープンデータプラットフォームに自組織のアカウントを持っている\n- Githubでオープンデータを管理している\n\nこの記事を通して、Githubに置いてあるオープンデータを更新したタイミングで、Github Actionを用いて、CKAN経由でプラットフォーム上のデータを自動連携させるようにします。\n\nちなみにルワンダの水道公社の水道ベクトルタイルのオープンデータのopenAFRICAのページは以下のリンクにあります。\nhttps://open.africa/dataset/rw-water-vectortiles\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/b46451ae-dd33-af48-1927-63718068c6f8.png)\n\nまた水道ベクトルタイルのGithubリポジトリは以下のリンクにあり、毎週水道公社内のサーバーからGithubに自動更新されます。\nhttps://github.com/WASAC/vt\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/012139e2-6dfd-3244-d44e-fa8d0b57bb91.png)\n\n\n## データアップロードの仕組み\n\n### リポジトリのダウンロードとインストール\n\npipenvがインストールされていない場合は、まず設定を行ってください。\n\n```\ngit clone https://github.com/watergis/open-africa-uploader\ncd open-africa-uploader\npipenv install\npipenv shell\n```\n\n### CKAN APIを用いたファイルのアップロードの仕組み\n\nまずリポジトリ内の`OpenAfricaUploader.py`のソースコード全文を載せます。\n\n```python\nimport os\nimport ckanapi\nimport requests\n\n\nclass OpanAfricaUploader(object):\n  def __init__(self, api_key):\n    \"\"\"Constructor\n\n    Args:\n        api_key (string): CKAN api key\n    \"\"\"\n    self.data_portal = 'https://africaopendata.org'\n    self.APIKEY = api_key\n    self.ckan = ckanapi.RemoteCKAN(self.data_portal, apikey=self.APIKEY)\n\n  def create_package(self, url, title):\n    \"\"\"create new package if it does not exist yet.\n\n    Args:\n        url (str): the url of package eg. https://open.africa/dataset/{package url}\n        title (str): the title of package\n    \"\"\"\n    package_name = url\n    package_title = title\n    try:\n        print ('Creating \"{package_title}\" package'.format(**locals()))\n        self.package = self.ckan.action.package_create(name=package_name,\n                                            title=package_title,\n                                            owner_org = 'water-and-sanitation-corporation-ltd-wasac')\n    except (ckanapi.ValidationError) as e:\n        if (e.error_dict['__type'] == 'Validation Error' and\n          e.error_dict['name'] == ['That URL is already in use.']):\n            print ('\"{package_title}\" package already exists'.format(**locals()))\n            self.package = self.ckan.action.package_show(id=package_name)\n        else:\n            raise\n\n  def resource_create(self, data, path, api=\"/api/action/resource_create\"):\n    \"\"\"create new resource, or update existing resource\n\n    Args:\n        data (object): data for creating resource. data must contain package_id, name, format, description. If you overwrite existing resource, id also must be included.\n        path (str): file path for uploading\n        api (str, optional): API url for creating or updating. Defaults to \"/api/action/resource_create\". If you want to update, please specify url for \"/api/action/resource_update\"\n    \"\"\"\n    self.api_url = self.data_portal + api\n    print ('Creating \"{}\"'.format(data['name']))\n    r = requests.post(self.api_url,\n                      data=data,\n                      headers={'Authorization': self.APIKEY},\n                      files=[('upload', open(path, 'rb'))])\n\n    if r.status_code != 200:\n        print ('Error while creating resource: {0}'.format(r.content))\n    else:\n      print ('Uploaded \"{}\" successfully'.format(data['name']))\n\n  def resource_update(self, data, path):\n    \"\"\"update existing resource\n\n    Args:\n        data (object): data for creating resource. data must contain id, package_id, name, format, description.\n        path (str): file path for uploading\n    \"\"\"\n    self.resource_create(data, path, \"/api/action/resource_update\")\n\n  def upload_datasets(self, path, description):\n    \"\"\"upload datasets under the package\n\n    Args:\n        path (str): file path for uploading\n        description (str): description for the dataset\n    \"\"\"\n    filename = os.path.basename(path)\n    extension = os.path.splitext(filename)[1][1:].lower()\n    \n    data = {\n      'package_id': self.package['id'],\n      'name': filename,\n      'format': extension,\n      'description': description\n    }\n\n    resources = self.package['resources']\n    if len(resources) \u003e 0:\n      target_resource = None\n      for resource in reversed(resources):\n        if filename == resource['name']:\n          target_resource = resource\n          break\n\n      if target_resource == None:\n        self.resource_create(data, path)\n      else:\n        print ('Resource \"{}\" already exists, it will be overwritten'.format(target_resource['name']))\n        data['id'] = target_resource['id']\n        self.resource_update(data, path)\n    else:\n      self.resource_create(data, path)\n```\n\n`OpenAfricaUploader.py`を呼び出してファイルをアップロードするソースコードは以下のような感じです。\n\n```python\nimport os\nfrom OpenAfricaUploader import OpanAfricaUploader\n\nuploader = OpanAfricaUploader(args.key)\nuploader.create_package('rw-water-vectortiles','Vector Tiles for rural water supply systems in Rwanda')\nuploader.upload_datasets(os.path.abspath('../data/rwss.mbtiles'), 'mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.')\n```\n\n---\n\n一個ずつ説明していきます。\n\n#### コンストラクタ\n\nこのモジュールはあらかじめopenAFRICAにアップロードするためにベースとなるポータルサイトのURLをコンストラクタ内で設定しています。\n\n`self.data_portal = 'https://africaopendata.org'`の部分のURLを自組織が利用しているCKAN APIのURLと置き換えてください。\n\n```python\n  def __init__(self, api_key):\n    \"\"\"Constructor\n\n    Args:\n        api_key (string): CKAN api key\n    \"\"\"\n    self.data_portal = 'https://africaopendata.org'\n    self.APIKEY = api_key\n    self.ckan = ckanapi.RemoteCKAN(self.data_portal, apikey=self.APIKEY)\n```\n\nコンストラクタの呼び出しは次のようになります。`args.key`にご自身のアカウントのCKAN APIキーを指定してください。\n\n```python\nuploader = OpanAfricaUploader(args.key)\n```\n\n#### パッケージの作成\n\n[package_create](https://docs.ckan.org/en/2.7/api/index.html?highlight=package_create#module-ckan.logic.action.create)というAPIを利用してパッケージを作成します。その際引数には以下を指定します。\n\n- name=ここで指定した文字列がパッケージのURLになります\n- title=パッケージのタイトルです\n- owner_org=CKANのポータル上の対象組織のIDです\n\n作成に成功すると、パッケージ情報が戻り値として返って来ます。既にある場合はエラーになるため、例外処理の中で既存のパッケージ情報を取得する処理を書いています。\n\n```python\n  def create_package(self, url, title):\n    \"\"\"create new package if it does not exist yet.\n\n    Args:\n        url (str): the url of package eg. https://open.africa/dataset/{package url}\n        title (str): the title of package\n    \"\"\"\n    package_name = url\n    package_title = title\n    try:\n        print ('Creating \"{package_title}\" package'.format(**locals()))\n        self.package = self.ckan.action.package_create(name=package_name,\n                                            title=package_title,\n                                            owner_org = 'water-and-sanitation-corporation-ltd-wasac')\n    except (ckanapi.ValidationError) as e:\n        if (e.error_dict['__type'] == 'Validation Error' and\n          e.error_dict['name'] == ['That URL is already in use.']):\n            print ('\"{package_title}\" package already exists'.format(**locals()))\n            self.package = self.ckan.action.package_show(id=package_name)\n        else:\n            raise\n```\n\nこの関数の呼び出し方は以下の通りになります\n\n```python\nuploader.create_package('rw-water-vectortiles','Vector Tiles for rural water supply systems in Rwanda')\n```\n\n#### リソースの作成及び更新\n\nリソースの作成は`resource_create`という関数で行っています。`/api/action/resource_create`というREST APIを使用して、アップロード対象のバイナリデータやファイル情報などもろもろを渡してあげれば良いです。\n\n```python\ndef resource_create(self, data, path, api=\"/api/action/resource_create\"):\n    self.api_url = self.data_portal + api\n    print ('Creating \"{}\"'.format(data['name']))\n    r = requests.post(self.api_url,\n                      data=data,\n                      headers={'Authorization': self.APIKEY},\n                      files=[('upload', open(path, 'rb'))])\n\n    if r.status_code != 200:\n        print ('Error while creating resource: {0}'.format(r.content))\n    else:\n      print ('Uploaded \"{}\" successfully'.format(data['name']))\n```\n\n但し、`resource_create`だけだとリソースの追加だけしかできず、更新するたびにどんどん数が増えてしまいますので、`/api/action/resource_update`というAPIを使って、既存のリソースがあったら更新してあげるようにします。\n\n`resource_update`の使い方は基本的に`resource_create`と同じで、違いは`data`のなかに`resource_id`があるかないかだけです\n\n```python\ndef resource_update(self, data, path):\n    self.resource_create(data, path, \"/api/action/resource_update\")\n```\n\n`resource_create`と`resource_update`をいい感じに組み合わせて、既存のリソースがあったら更新し、なかったら新規作成するという処理にしたのが`upload_datasets`という関数です。\n\n```python\ndef upload_datasets(self, path, description):\n    # ファイル名を拡張子と分離します\n    filename = os.path.basename(path)\n    extension = os.path.splitext(filename)[1][1:].lower()\n    \n    # リソース作成用のデータを作ります\n    data = {\n      'package_id': self.package['id'], #パッケージのID\n      'name': filename,                 #更新対象のファイル名\n      'format': extension,              #フォーマット（ここでは拡張子にしています）\n      'description': description        #ファイルの説明\n    }\n\n    # 既にパッケージ内にリソースがあった場合はアップロード対象のファイル名と同じ名前のリソースがあるかないかチェックする。\n    resources = self.package['resources']\n    if len(resources) \u003e 0:\n      target_resource = None\n      for resource in reversed(resources):\n        if filename == resource['name']:\n          target_resource = resource\n          break\n\n      if target_resource == None:\n        # 同じ名前のリソースがない場合はresource_createを呼び出す\n        self.resource_create(data, path)\n      else:\n        # リソースがある場合はdataにIDを設定してresource_updateを呼び出す\n        print ('Resource \"{}\" already exists, it will be overwritten'.format(target_resource['name']))\n        data['id'] = target_resource['id']\n        self.resource_update(data, path)\n    else:\n      # リソースがない場合はresource_createを呼び出す\n      self.resource_create(data, path)\n```\n\n`upload_datasets`関数の呼び出し方は以下のようになります。\n\n```python\n uploader.upload_datasets(os.path.abspath('../data/rwss.mbtiles'), 'mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.')\n```\n\n### アップロードのソースをコマンドラインから呼べるようにする\n\n`upload2openafrica.py`でコマンドラインから呼べるようにしています。\n\n```python\nimport os\nimport argparse\nfrom OpenAfricaUploader import OpanAfricaUploader\n\ndef get_args():\n  prog = \"upload2openafrica.py\"\n  usage = \"%(prog)s [options]\"\n  parser = argparse.ArgumentParser(prog=prog, usage=usage)\n  parser.add_argument(\"--key\", dest=\"key\", help=\"Your CKAN api key\", required=True)\n  parser.add_argument(\"--pkg\", dest=\"package\", help=\"Target url of your package\", required=True)\n  parser.add_argument(\"--title\", dest=\"title\", help=\"Title of your package\", required=True)\n  parser.add_argument(\"--file\", dest=\"file\", help=\"Relative path of file which you would like to upload\", required=True)\n  parser.add_argument(\"--desc\", dest=\"description\", help=\"any description for your file\", required=True)\n  args = parser.parse_args()\n\n  return args\n\nif __name__ == \"__main__\":\n  args = get_args()\n\n  uploader = OpanAfricaUploader(args.key)\n  uploader.create_package(args.package,args.title)\n  uploader.upload_datasets(os.path.abspath(args.file), args.description)\n```\n\n実際に使う際は以下のような感じになります。`upload_mbtiles.sh`というシェルスクリプトを作っています。環境変数に`CKAN_API_KEY`を設定するようにしてください。\n\n```bash\n\n#!/bin/bash\n\npipenv run python upload2openafrica.py \\\n  --key ${CKAN_API_KEY} \\\n  --pkg rw-water-vectortiles \\\n  --title \"Vector Tiles for rural water supply systems in Rwanda\" \\\n  --file ../data/rwss.mbtiles \\\n  --desc \"mbtiles format of Mapbox Vector Tiles which was created by tippecanoe.\"\n```\n\nこれでCKAN APIを使ってオープンデータをアップロードできるようになりました。\n\n## データ連携の自動化\n\nでも毎回手動でCKANと連携するのは面倒なので、Github Actionで自動化します。ワークフローファイルは以下のような感じです。\n\n```yaml\nname: openAFRICA upload\n\non:\n  push:\n    branches: [ master ]\n    # ここではdataフォルダ以下が更新された場合にワークフローが走るようにしています\n    paths:\n      - \"data/**\"\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v2\n    - name: Set up Python 3.8\n      uses: actions/setup-python@v2\n      with:\n        python-version: 3.8\n    - name: Install dependencies\n      # ここでまずPipenvの初期設定をします\n      run: |\n        cd scripts\n        pip install pipenv\n        pipenv install\n    - name: upload to openAFRICA\n      # GithubのリポジトリのSettingsページのSecretsでCKAN_API_KEYという名前で登録しておけば次のようにして環境変数を使うことができます\n      env:\n        CKAN_API_KEY: ${{secrets.CKAN_API_KEY}}\n      # その上で、シェルスクリプトを呼んであげるようにします\n      run: |\n        cd scripts\n        ./upload_mbtiles.sh\n```\n\nこれだけでGithubにファイルがアップロードされたらオープンデータプラットフォームに自動連携できるようになりました。次の画像はルワンダの水道公社のGithub Acitonが実行された際の画面です。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/858331/a6cd15c0-878c-468d-eaa4-be7d7c3762cf.png)\n\n\n## まとめ\n\nCKAN APIは国内外の様々なオープンソースプラットフォームで使用されています。そのCKAN APIはPythonを用いることで比較的簡単にデータ連携を実装することが可能です。またオープンデータを管理しているのがGithub上なら、Github Actionを用いてさらに容易に自動連携することができます。\n\n今回openAFRICA向けに作成したモジュールが国内外の他のCKANを使ったオープンデータの利活用に役に立つことを願っています。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:06:45+09:00",
    "group": null,
    "id": "b773aa998e96459cb696",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Python",
        "versions": []
      },
      {
        "name": "opendata",
        "versions": []
      },
      {
        "name": "civictech",
        "versions": []
      },
      {
        "name": "ckan",
        "versions": []
      },
      {
        "name": "GitHubActions",
        "versions": []
      }
    ],
    "title": "PythonでCKAN APIを使ってオープンデータとしてアップロード\u0026Github Actionsで自動連携する",
    "updated_at": "2020-11-17T22:24:12+09:00",
    "url": "https://qiita.com/JinIgarashi/items/b773aa998e96459cb696",
    "user": {
      "description": "GIS Software Developer",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 1,
      "github_login_name": "JinIgarashi",
      "id": "JinIgarashi",
      "items_count": 2,
      "linkedin_id": "jinigarashi",
      "location": "Kanagawa",
      "name": "Jin IGARASHI ",
      "organization": "MIERUNE Inc",
      "permanent_id": 858331,
      "profile_image_url": "https://avatars1.githubusercontent.com/u/2639701?v=4",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": "https://docs.water-gis.com"
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e\u003c/p\u003e\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eペンギンの「ペンペン」が現れて何かしゃべるところまで。\u003ca href=\"https://twitter.com/hashtag/protoout?src=hash\u0026amp;ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e#protoout\u003c/a\u003e \u003ca href=\"https://twitter.com/hashtag/AR?src=hash\u0026amp;ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e#AR\u003c/a\u003e \u003ca href=\"https://t.co/mew6weQHUA\" rel=\"nofollow noopener\" target=\"_blank\"\u003epic.twitter.com/mew6weQHUA\u003c/a\u003e\u003c/p\u003e— 3do. (@3doHi) \u003ca href=\"https://twitter.com/3doHi/status/1328597873378914305?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNovember 17, 2020\u003c/a\u003e\n\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"イヤイヤ期を解決する子育てサポートwebarアプリケーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%A4%E3%82%A4%E3%83%A4%E6%9C%9F%E3%82%92%E8%A7%A3%E6%B1%BA%E3%81%99%E3%82%8B%E5%AD%90%E8%82%B2%E3%81%A6%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88webar%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e「イヤイヤ期」を解決する子育てサポートWebARアプリケーション\u003c/h1\u003e\n\n\u003cp\u003e　現在、イヤイヤ期を迎えたこどもを持つパパ/ママ向けの子育てサポートWebアプリケーションを作成中です。\u003c/p\u003e\n\n\u003cp\u003e　試作の状態のため、「アプリケーションを作ろうと思った背景」や、「プロダクトの全体像」、「解決しようとしている課題とその狙い」などの詳細説明は、本記事では割愛しますが、\u003cb\u003e制作の状況や、完成品はQiitaにも都度アップデート出来ればと思っていますので、ご興味あれば引き続き記事のチェックお願いします！\u003c/b\u003e\u003c/p\u003e\n\n\u003cp\u003e　ざっくり言うと、\u003cb\u003eこどもの『ごはんのイヤイヤ（最後まで食べずに遊びたい）と、その後のお風呂のイヤイヤ（お風呂入りたくない）を、お風呂場にあるおもちゃのARコンテンツで解決したい』\u003c/b\u003eと思っています！\u003c/p\u003e\n\n\u003cp\u003e　現時点で出来ている下記2点までで、娘に使ってもらうテストをしてみましたので、その様子と、見えてきた改善点などを記事にしてみたいと思います。\u003cbr\u003e\n・ARマーカーを読み取りマーカー上にモデルを出現させる\u003cbr\u003e\n・モデルを画面に出現させたタイミングでmp3音源を再生する\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"娘に使ってもらいその様子を観察した\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%A8%98%E3%81%AB%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%82%E3%82%89%E3%81%84%E3%81%9D%E3%81%AE%E6%A7%98%E5%AD%90%E3%82%92%E8%A6%B3%E5%AF%9F%E3%81%97%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e娘に使ってもらい、その様子を観察した\u003c/h1\u003e\n\n\u003cp\u003e\u003cb\u003e１．使用感\u003c/b\u003e\u003cbr\u003e\n　1才11か月の娘には\u003cb\u003eARの世界観を理解してもらえるか（怖がったりしないか）、不安なところもありました\u003c/b\u003eが、スマホをかざすと、現実には存在しないペンギンが現れることに\u003cb\u003eかなり興味を示し、楽しんでる様子でした！\u003c/b\u003eスマホの中を覗き込んだり、スマホの外からマーカーを直接見たりしながら、「現実にあるようで無い」世界観をニヤニヤしながら楽しんでいました。\u003cbr\u003e\n　一方で、よっぽど楽しいのか何度も何度も「スマホをかずす」→「やめる」の繰り返しとなり、終わりのない感じになってしまいました。この点は、\u003cb\u003eアプリケーションとしての「終わり」を準備してあげる必要性を感じました。\u003c/b\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2F132d067c-8a8d-a113-bee1-61728e5151a2.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0829b938a5a933990810a0b638838db5\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2F132d067c-8a8d-a113-bee1-61728e5151a2.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0829b938a5a933990810a0b638838db5\" alt=\"IMG_9587.PNG\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/737339/132d067c-8a8d-a113-bee1-61728e5151a2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2F132d067c-8a8d-a113-bee1-61728e5151a2.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=83ee93ddea49bb7c4df83b28cc114ca7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003cb\u003e２．効果\u003c/b\u003e\u003cbr\u003e\n　ペンギンのARが出現したタイミングで、アプリケーション内で流れる「●●ちゃん、お風呂に入ろう！」という音声については、「･･･お風呂」と小さな声で呟いていたので、「お風呂」というキーワードは認識してくれたと思います。さらに妻が「ペンペン(←我が家のペンギンの愛称)がお風呂で待ってるってよ～」と促すと、\u003cb\u003eいつもよりスムーズにお風呂場に向かってくれました。\u003c/b\u003eそして、洗面台にいるペンペンに対面したときは\u003cb\u003e「あーペンペンだー！」\u003c/b\u003eと言って、嬉しそうにペンギンのおもちゃを手にしていましたので、お風呂に入りたくないという\u003cb\u003eイヤイヤの改善効果はある程度見込めるのではないかと思いました！\u003c/b\u003e\u003cbr\u003e\n　ただし、初めてだったので、\u003cb\u003e目新しもあり、良い反応を示したということもある\u003c/b\u003eと思いましたので、継続して利用してもらえるように、ペンギンだけでなく「今日は誰がお風呂で待ってくれてるだろう感」が必要な気がしました。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2Fd17de963-c22b-be62-2994-7d6e7cd00288.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=326bb67c66bf8f03effeb54b1af25eb7\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2Fd17de963-c22b-be62-2994-7d6e7cd00288.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=326bb67c66bf8f03effeb54b1af25eb7\" alt=\"IMG_9588.PNG\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/737339/d17de963-c22b-be62-2994-7d6e7cd00288.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F737339%2Fd17de963-c22b-be62-2994-7d6e7cd00288.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f8c9cb58851f8ac315ca70c2abe6ddf5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cb\u003e３．妻へのヒアリング\u003c/b\u003e\u003cbr\u003e\n　娘の反応は結構いいね！という同じ評価をもらえましたが、下記3点の指摘ももらいました。\u003cbr\u003e\n・ARモデルのペンペン(ペンギン)がリアルすぎてお風呂にいるおもちゃとギャップある。\u003cbr\u003e\n・娘の操作だと、スマホが固定できずARマーカーの読み取りが途中で切れてしまうことが何度かあった。音声が途中で途切れてしまうと、「お風呂に入ろう！」というキーワードまで辿りつかないこともあった。\u003cbr\u003e\n・うちの娘以外の反応も見てみた方がいいのではないか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ということで今後考えたい改善点\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A8%E3%81%84%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7%E4%BB%8A%E5%BE%8C%E8%80%83%E3%81%88%E3%81%9F%E3%81%84%E6%94%B9%E5%96%84%E7%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eということで、今後考えたい改善点\u003c/h1\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e見えた課題\u003c/th\u003e\n\u003cth\u003e対策\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eARが楽しくて終わりがない\u003c/td\u003e\n\u003ctd\u003e音声再生が終わったらペンペン(←我が家のペンギンの愛称)が自ら立ち去るようにしたい\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e継続して利用してもらえるかわからない\u003c/td\u003e\n\u003ctd\u003eペンギンだけでないARモデルも準備したい\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eARモデルのペンペンがリアルすぎてお風呂にいるおもちゃとギャップある\u003c/td\u003e\n\u003ctd\u003eもう少しデフォルメされたペンギンのARモデルを探す\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e娘の操作だと、スマホが固定できずARマーカーの読み取りが途中で切れて、音声が途切れてしまう\u003c/td\u003e\n\u003ctd\u003e対策検討中（持ちやすそうなカメラ型のスマホケース買ってみたので次はそれでテスト予定）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e我が子以外のこどもの反応が悪い可能性がある\u003c/td\u003e\n\u003ctd\u003e検証に協力してくれる人を探して、色んなフィードバックをもらう\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"今回は以上引き続き頑張ります\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%8A%E5%9B%9E%E3%81%AF%E4%BB%A5%E4%B8%8A%E5%BC%95%E3%81%8D%E7%B6%9A%E3%81%8D%E9%A0%91%E5%BC%B5%E3%82%8A%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e今回は以上。引き続き頑張ります！\u003c/h1\u003e\n\n\u003cp\u003e　とりあえずはベースとなる機能と簡単な検証は成功したとと思うので、今回見えた課題の改善に取り組み、より良いモノを引き続き目指していきたいです！！\u003c/p\u003e\n\n\u003cp\u003e続く。\u003c/p\u003e\n",
    "body": "\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eペンギンの「ペンペン」が現れて何かしゃべるところまで。\u003ca href=\"https://twitter.com/hashtag/protoout?src=hash\u0026amp;ref_src=twsrc%5Etfw\"\u003e#protoout\u003c/a\u003e \u003ca href=\"https://twitter.com/hashtag/AR?src=hash\u0026amp;ref_src=twsrc%5Etfw\"\u003e#AR\u003c/a\u003e \u003ca href=\"https://t.co/mew6weQHUA\"\u003epic.twitter.com/mew6weQHUA\u003c/a\u003e\u003c/p\u003e\u0026mdash; 3do. (@3doHi) \u003ca href=\"https://twitter.com/3doHi/status/1328597873378914305?ref_src=twsrc%5Etfw\"\u003eNovember 17, 2020\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n#「イヤイヤ期」を解決する子育てサポートWebARアプリケーション\n　現在、イヤイヤ期を迎えたこどもを持つパパ/ママ向けの子育てサポートWebアプリケーションを作成中です。\n\n　試作の状態のため、「アプリケーションを作ろうと思った背景」や、「プロダクトの全体像」、「解決しようとしている課題とその狙い」などの詳細説明は、本記事では割愛しますが、\u003cB\u003e制作の状況や、完成品はQiitaにも都度アップデート出来ればと思っていますので、ご興味あれば引き続き記事のチェックお願いします！\u003c/B\u003e\n\n　ざっくり言うと、\u003cB\u003eこどもの『ごはんのイヤイヤ（最後まで食べずに遊びたい）と、その後のお風呂のイヤイヤ（お風呂入りたくない）を、お風呂場にあるおもちゃのARコンテンツで解決したい』\u003c/B\u003eと思っています！\n\n　現時点で出来ている下記2点までで、娘に使ってもらうテストをしてみましたので、その様子と、見えてきた改善点などを記事にしてみたいと思います。\n・ARマーカーを読み取りマーカー上にモデルを出現させる\n・モデルを画面に出現させたタイミングでmp3音源を再生する\n\n#娘に使ってもらい、その様子を観察した\n\n\u003cB\u003e１．使用感\u003c/B\u003e\n　1才11か月の娘には\u003cB\u003eARの世界観を理解してもらえるか（怖がったりしないか）、不安なところもありました\u003c/B\u003eが、スマホをかざすと、現実には存在しないペンギンが現れることに\u003cB\u003eかなり興味を示し、楽しんでる様子でした！\u003c/B\u003eスマホの中を覗き込んだり、スマホの外からマーカーを直接見たりしながら、「現実にあるようで無い」世界観をニヤニヤしながら楽しんでいました。\n　一方で、よっぽど楽しいのか何度も何度も「スマホをかずす」→「やめる」の繰り返しとなり、終わりのない感じになってしまいました。この点は、\u003cB\u003eアプリケーションとしての「終わり」を準備してあげる必要性を感じました。\u003c/B\u003e\n![IMG_9587.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/737339/132d067c-8a8d-a113-bee1-61728e5151a2.png)\n\u003cB\u003e２．効果\u003c/B\u003e\n　ペンギンのARが出現したタイミングで、アプリケーション内で流れる「●●ちゃん、お風呂に入ろう！」という音声については、「･･･お風呂」と小さな声で呟いていたので、「お風呂」というキーワードは認識してくれたと思います。さらに妻が「ペンペン(←我が家のペンギンの愛称)がお風呂で待ってるってよ～」と促すと、\u003cB\u003eいつもよりスムーズにお風呂場に向かってくれました。\u003c/B\u003eそして、洗面台にいるペンペンに対面したときは\u003cB\u003e「あーペンペンだー！」\u003c/B\u003eと言って、嬉しそうにペンギンのおもちゃを手にしていましたので、お風呂に入りたくないという\u003cB\u003eイヤイヤの改善効果はある程度見込めるのではないかと思いました！\u003c/B\u003e\n　ただし、初めてだったので、\u003cB\u003e目新しもあり、良い反応を示したということもある\u003c/B\u003eと思いましたので、継続して利用してもらえるように、ペンギンだけでなく「今日は誰がお風呂で待ってくれてるだろう感」が必要な気がしました。\n![IMG_9588.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/737339/d17de963-c22b-be62-2994-7d6e7cd00288.png)\n\n\u003cB\u003e３．妻へのヒアリング\u003c/B\u003e\n　娘の反応は結構いいね！という同じ評価をもらえましたが、下記3点の指摘ももらいました。\n・ARモデルのペンペン(ペンギン)がリアルすぎてお風呂にいるおもちゃとギャップある。\n・娘の操作だと、スマホが固定できずARマーカーの読み取りが途中で切れてしまうことが何度かあった。音声が途中で途切れてしまうと、「お風呂に入ろう！」というキーワードまで辿りつかないこともあった。\n・うちの娘以外の反応も見てみた方がいいのではないか？\n\n#ということで、今後考えたい改善点\n\n|見えた課題|対策                  |\n|------------|--------------------------|\n|ARが楽しくて終わりがない|音声再生が終わったらペンペン(←我が家のペンギンの愛称)が自ら立ち去るようにしたい|\n|継続して利用してもらえるかわからない|ペンギンだけでないARモデルも準備したい|\n|ARモデルのペンペンがリアルすぎてお風呂にいるおもちゃとギャップある|もう少しデフォルメされたペンギンのARモデルを探す|\n|娘の操作だと、スマホが固定できずARマーカーの読み取りが途中で切れて、音声が途切れてしまう|対策検討中（持ちやすそうなカメラ型のスマホケース買ってみたので次はそれでテスト予定）|\n|我が子以外のこどもの反応が悪い可能性がある|検証に協力してくれる人を探して、色んなフィードバックをもらう|\n#今回は以上。引き続き頑張ります！\n　とりあえずはベースとなる機能と簡単な検証は成功したとと思うので、今回見えた課題の改善に取り組み、より良いモノを引き続き目指していきたいです！！\n\n続く。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:06:03+09:00",
    "group": null,
    "id": "47d2eb8d9a092e168685",
    "likes_count": 1,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "JavaScript",
        "versions": []
      },
      {
        "name": "AR",
        "versions": []
      },
      {
        "name": "A-Frame",
        "versions": []
      },
      {
        "name": "Netlify",
        "versions": []
      },
      {
        "name": "Poly",
        "versions": []
      }
    ],
    "title": "子育てサポートWebARアプリケーションを作成中！プログラム初心者パパの挑戦",
    "updated_at": "2020-11-17T22:26:47+09:00",
    "url": "https://qiita.com/m3do/items/47d2eb8d9a092e168685",
    "user": {
      "description": "",
      "facebook_id": "",
      "followees_count": 7,
      "followers_count": 20,
      "github_login_name": null,
      "id": "m3do",
      "items_count": 15,
      "linkedin_id": "",
      "location": "東京都文京区",
      "name": "三戸 誠",
      "organization": "",
      "permanent_id": 737339,
      "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/737339/6bf2bc9e72f199792e56ec850cebdcd0ac8888d9/large.png?1602845702",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e\u003cstrong\u003eimage_picker\u003c/strong\u003eで、ライブラリからの画像選択、カメラを起動・撮影した画像の利用が可能。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージの導入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E5%B0%8E%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージの導入\u003c/h2\u003e\n\n\u003cp\u003epubspec.yamlにimage_pickerを追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003epubspec.yaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"na\"\u003edependencies\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eflutter\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003esdk\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eflutter\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eimage_picker\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e^0.6.7+14\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"image_pickerを用いた画像選択処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#image_picker%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E7%94%BB%E5%83%8F%E9%81%B8%E6%8A%9E%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eimage_pickerを用いた画像選択処理\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"dart\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003euser_icon_photo_page.dart\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"s\"\u003e'dart:io'\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"s\"\u003e'package:flutter/material.dart'\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"s\"\u003e'package:image_picker/image_picker.dart'\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"s\"\u003e'package:project_name/widgets/custom_button_text.dart'\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUserIconPhotoPage\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"n\"\u003eStatefulWidget\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nd\"\u003e@override\u003c/span\u003e\n  \u003cspan class=\"n\"\u003e_UserIconPhotoPageState\u003c/span\u003e \u003cspan class=\"n\"\u003ecreateState\u003c/span\u003e\u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_UserIconPhotoPageState\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003e_UserIconPhotoPageState\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"n\"\u003eState\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUserIconPhotoPage\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eFile\u003c/span\u003e \u003cspan class=\"n\"\u003e_image\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003efinal\u003c/span\u003e \u003cspan class=\"n\"\u003e_picker\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eImagePicker\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003eFuture\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_getImage\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eImageSource\u003c/span\u003e \u003cspan class=\"kn\"\u003esource\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003easync\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003efinal\u003c/span\u003e \u003cspan class=\"n\"\u003epickedFile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_picker\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetImage\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"kn\"\u003esource\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kn\"\u003esource\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003esetState\u003c/span\u003e\u003cspan class=\"o\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epickedFile\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_image\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eFile\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epickedFile\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003epath\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eprint\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'画像が選択されていません'\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"nd\"\u003e@override\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eWidget\u003c/span\u003e \u003cspan class=\"n\"\u003ebuild\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBuildContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eScaffold\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003ebody:\u003c/span\u003e \u003cspan class=\"n\"\u003eCenter\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"nl\"\u003echild:\u003c/span\u003e \u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n          \u003cspan class=\"nl\"\u003emainAxisAlignment:\u003c/span\u003e \u003cspan class=\"n\"\u003eMainAxisAlignment\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ecenter\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"nl\"\u003echildren:\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_image\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003efile\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_image\u003c/span\u003e\u003cspan class=\"o\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 画像選択後、画像が表示される\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRaisedButton\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"n\"\u003eColors\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egrey\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003eshape:\u003c/span\u003e \u003cspan class=\"n\"\u003eStadiumBorder\u003c/span\u003e\u003cspan class=\"o\"\u003e(),\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003eonPressed:\u003c/span\u003e \u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_getImage\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eImageSource\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egallery\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n              \u003cspan class=\"o\"\u003e},\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003echild:\u003c/span\u003e \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomButtonText\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nl\"\u003ebuttonText:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ライブラリから選択\"\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eSizedBox\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003eheight:\u003c/span\u003e \u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRaisedButton\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"n\"\u003eColors\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egrey\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003eshape:\u003c/span\u003e \u003cspan class=\"n\"\u003eStadiumBorder\u003c/span\u003e\u003cspan class=\"o\"\u003e(),\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003eonPressed:\u003c/span\u003e \u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_getImage\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eImageSource\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ecamera\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n              \u003cspan class=\"o\"\u003e},\u003c/span\u003e\n              \u003cspan class=\"nl\"\u003echild:\u003c/span\u003e \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomButtonText\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nl\"\u003ebuttonText:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"写真を撮影する\"\u003c/span\u003e\u003cspan class=\"o\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n          \u003cspan class=\"o\"\u003e],\u003c/span\u003e\n        \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e※ RaisedButtonに利用するテキストを別Widgetに切り出しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"dart\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ecustom_button_text.dart\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"s\"\u003e'package:flutter/material.dart'\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCustomButtonText\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"n\"\u003eStatelessWidget\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003efinal\u003c/span\u003e \u003cspan class=\"n\"\u003ebuttonText\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomButtonText\u003c/span\u003e\u003cspan class=\"o\"\u003e({\u003c/span\u003e\u003cspan class=\"n\"\u003eKey\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ebuttonText\u003c/span\u003e\u003cspan class=\"o\"\u003e})\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003esuper\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nl\"\u003ekey:\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"nd\"\u003e@override\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eWidget\u003c/span\u003e \u003cspan class=\"n\"\u003ebuild\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBuildContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eContainer\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003ewidth:\u003c/span\u003e \u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003eheight:\u003c/span\u003e \u003cspan class=\"mi\"\u003e40\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003echild:\u003c/span\u003e \u003cspan class=\"n\"\u003eCenter\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"nl\"\u003echild:\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n          \u003cspan class=\"n\"\u003ebuttonText\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"nl\"\u003estyle:\u003c/span\u003e \u003cspan class=\"n\"\u003eTextStyle\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"nl\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"n\"\u003eColors\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ewhite\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nl\"\u003efontSize:\u003c/span\u003e \u003cspan class=\"mi\"\u003e18\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eimage_picker : \u003ca href=\"https://pub.dev/packages/image_picker\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://pub.dev/packages/image_picker\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n",
    "body": "**image_picker**で、ライブラリからの画像選択、カメラを起動・撮影した画像の利用が可能。\n\n## パッケージの導入\npubspec.yamlにimage_pickerを追加\n\n```pubspec.yaml\ndependencies:\n  flutter:\n    sdk: flutter\n  image_picker: ^0.6.7+14\n```\n\n## image_pickerを用いた画像選択処理\n\n```user_icon_photo_page.dart\nimport 'dart:io';\nimport 'package:flutter/material.dart';\nimport 'package:image_picker/image_picker.dart';\nimport 'package:project_name/widgets/custom_button_text.dart';\n\n\nclass UserIconPhotoPage extends StatefulWidget {\n  @override\n  _UserIconPhotoPageState createState() =\u003e _UserIconPhotoPageState();\n}\n\nclass _UserIconPhotoPageState extends State\u003cUserIconPhotoPage\u003e {\n  File _image;\n  final _picker = ImagePicker();\n\n  Future\u003cvoid\u003e _getImage(ImageSource source) async {\n    final pickedFile = await _picker.getImage(source: source);\n\n    setState(() {\n      if (pickedFile != null) {\n        _image = File(pickedFile.path);\n      } else {\n        print('画像が選択されていません');\n      }\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: [\n            if (_image != null) Image.file(_image), // 画像選択後、画像が表示される\n            RaisedButton(\n              color: Colors.grey,\n              shape: StadiumBorder(),\n              onPressed: () {\n                _getImage(ImageSource.gallery);\n              },\n              child: const CustomButtonText(buttonText: \"ライブラリから選択\")\n            ),\n            const SizedBox(\n              height: 20,\n            ),\n            RaisedButton(\n              color: Colors.grey,\n              shape: StadiumBorder(),\n              onPressed: () {\n                _getImage(ImageSource.camera);\n              },\n              child: const CustomButtonText(buttonText: \"写真を撮影する\"),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n``` \n\n※ RaisedButtonに利用するテキストを別Widgetに切り出しています。\n\n```custom_button_text.dart\nimport 'package:flutter/material.dart';\n\nclass CustomButtonText extends StatelessWidget {\n  final buttonText;\n\n  const CustomButtonText({Key key, this.buttonText}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      width: 200,\n      height: 40,\n      child: Center(\n        child: Text(\n          buttonText,\n          style: TextStyle(\n            color: Colors.white,\n            fontSize: 18,\n          ),\n        ),\n      ),\n    );\n  }\n}\n```\n\n## 参考\n- image_picker : https://pub.dev/packages/image_picker\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T22:05:32+09:00",
    "group": null,
    "id": "0242481d92b04653ce86",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Flutter",
        "versions": []
      }
    ],
    "title": "【Flutter】image_pickerを利用した画像選択処理（カメラ撮影・ギャラリーから選択）",
    "updated_at": "2020-11-17T22:05:32+09:00",
    "url": "https://qiita.com/kedev01/items/0242481d92b04653ce86",
    "user": {
      "description": null,
      "facebook_id": null,
      "followees_count": 0,
      "followers_count": 0,
      "github_login_name": null,
      "id": "kedev01",
      "items_count": 1,
      "linkedin_id": null,
      "location": null,
      "name": "",
      "organization": null,
      "permanent_id": 681808,
      "profile_image_url": "https://abs.twimg.com/sticky/default_profile_images/default_profile_bigger.png",
      "team_only": false,
      "twitter_screen_name": "kedev01",
      "website_url": null
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch2\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\n\u003cp\u003eコンテナを立ち上げるときにエラーが起きたので、その対処法とコマンドをまとめておきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"エラー文\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E6%96%87\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eエラー文\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eターミナル\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"go\"\u003eError response from daemon: Conflict. The container name \"コンテナ名\" is already in use by container \"コンテナID\". You have to remove (or rename) that container to be able to reuse that name.\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eコンテナがすでにあるので、名前を変更するか削除するかしてください。要するに同じコンテナ名は複数つくれないということですね！！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"仮説\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%AE%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e仮説\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e動作しているコンテナ一覧を見る。\u003c/li\u003e\n\u003cli\u003e動作を止め、コンテナ削除。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"必要になるコマンド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BF%85%E8%A6%81%E3%81%AB%E3%81%AA%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e必要になるコマンド\u003c/h2\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003eDockerコマンド\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e備考\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003ccode\u003edocker ps\u003c/code\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e動作中コンテナ一覧\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003edocker ps -a     　\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eコンテナ一覧\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003edocker stop コンテナID\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e動作しているコンテナをストップ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003edocker rm (-f) コンテナID\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e停止しているコンテナを削除 ※-fオプションを付けると強制削除\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e注意が必要なのが、コンテナをストップしてからでないとコンテナ削除ができないこと。\u003cbr\u003e動作しているコンテナを停止コマンドで停止させたあと、\u003cstrong\u003e\u003cem\u003eそのまま削除するのではなく、動作していたコンテナが停止できたのか？を確認をしてから削除\u003c/em\u003e\u003c/strong\u003eする。また、\u003cstrong\u003e\u003cem\u003e削除に成功したあとも削除できたのか確認する。\u003c/em\u003e\u003c/strong\u003e\u003cbr\u003e\nもしくは\u003ccode\u003e-f\u003c/code\u003eオプションで強制的に削除してしまえばコンテナ起動中でも削除可能。\u003cbr\u003e\n\u003cbr\u003e\u003cstrong\u003e\u003cem\u003eこのようにいちいち確認する癖をつけておけば後で痛い目に合う確率が減ると思いました。\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"再度コンテナ作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%8D%E5%BA%A6%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e再度コンテナ作成\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F88d42501ee7e603343c145b24f7e30b7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bcef5e734dbb3bae715587c964483ffc\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F88d42501ee7e603343c145b24f7e30b7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bcef5e734dbb3bae715587c964483ffc\" alt=\"image.png\" data-canonical-src=\"https://i.gyazo.com/88d42501ee7e603343c145b24f7e30b7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F88d42501ee7e603343c145b24f7e30b7.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=be98689c7c86c5208ab7537d1c78eea7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eCookieが大きいというエラー。読み取るとおそらくCookieが溜まってるから削除して！！という感じだと思います。\u003cbr\u003e\n早速溜まったCookieを削除し挙動を確認。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F34d41a3d38669caf2b3d130d6eca0cce.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4e40b057eb7a38dad2d5591048582d5c\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F34d41a3d38669caf2b3d130d6eca0cce.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4e40b057eb7a38dad2d5591048582d5c\" alt=\"image.png\" data-canonical-src=\"https://i.gyazo.com/34d41a3d38669caf2b3d130d6eca0cce.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F34d41a3d38669caf2b3d130d6eca0cce.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=585232d5acfd341db623ecedca8c756e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e仮説通りnginxコンテナを実行することができました！！\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eコンテナは同じ名前のものを作ることができない。\u003c/li\u003e\n\u003cli\u003eコンテナ削除とイメージ削除で少しコマンドが違う(\u003ccode\u003ermi\u003c/code\u003e か　\u003ccode\u003erm\u003c/code\u003e)ので削除に失敗しても落ち着く。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ermi\u003c/code\u003eの\u003ccode\u003ei\u003c/code\u003eはイメージのことで\u003ccode\u003ei\u003c/code\u003eを\u003ccode\u003eremoving\u003c/code\u003e（取り除く）ということ。\u003c/li\u003e\n\u003cli\u003eコマンドを打ったあと挙動が正しいか確認する癖をつける。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"参考文献\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考文献\u003c/h2\u003e\n\n\u003cp\u003eこの記事は以下の情報を参考にして執筆しました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/tifa2chan/items/e9aa408244687a63a0ae\" id=\"reference-2be55bc5b57dea0d0283\"\u003eDockerイメージとコンテナの削除方法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://hokoxjouhou.blog105.fc2.com/blog-entry-1548.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eChromeに「 400 Bad Request Header Or Cookie Too Large 」が出たときの対処方法\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n",
    "body": "## 概要\nコンテナを立ち上げるときにエラーが起きたので、その対処法とコマンドをまとめておきます。\n\n## エラー文\n\n```terminal:ターミナル\nError response from daemon: Conflict. The container name \"コンテナ名\" is already in use by container \"コンテナID\". You have to remove (or rename) that container to be able to reuse that name.\n```\n\nコンテナがすでにあるので、名前を変更するか削除するかしてください。要するに同じコンテナ名は複数つくれないということですね！！\n\n## 仮説\n- 動作しているコンテナ一覧を見る。\n- 動作を止め、コンテナ削除。\n\n## 必要になるコマンド\n\n| Dockerコマンド | 備考 |\n|:-:|:-:|\n| `docker ps`           |  動作中コンテナ一覧 |\n|  docker ps -a     　  | コンテナ一覧  |\n|  docker stop コンテナID |   動作しているコンテナをストップ |\n| docker rm (-f) コンテナID    | 停止しているコンテナを削除 ※-fオプションを付けると強制削除 |\n\n注意が必要なのが、コンテナをストップしてからでないとコンテナ削除ができないこと。\u003cbr\u003e動作しているコンテナを停止コマンドで停止させたあと、***そのまま削除するのではなく、動作していたコンテナが停止できたのか？を確認をしてから削除***する。また、***削除に成功したあとも削除できたのか確認する。***\nもしくは`-f`オプションで強制的に削除してしまえばコンテナ起動中でも削除可能。\n\u003cbr\u003e***このようにいちいち確認する癖をつけておけば後で痛い目に合う確率が減ると思いました。***\n\n## 再度コンテナ作成\n![image.png](https://i.gyazo.com/88d42501ee7e603343c145b24f7e30b7.png)\n\nCookieが大きいというエラー。読み取るとおそらくCookieが溜まってるから削除して！！という感じだと思います。\n早速溜まったCookieを削除し挙動を確認。\n\n![image.png](https://i.gyazo.com/34d41a3d38669caf2b3d130d6eca0cce.png)\n\n***仮説通りnginxコンテナを実行することができました！！***\n\n## まとめ\n- コンテナは同じ名前のものを作ることができない。\n- コンテナ削除とイメージ削除で少しコマンドが違う(`rmi` か　`rm`)ので削除に失敗しても落ち着く。\n- `rmi`の`i`はイメージのことで`i`を`removing`（取り除く）ということ。\n- コマンドを打ったあと挙動が正しいか確認する癖をつける。\n\n\n## 参考文献\n\nこの記事は以下の情報を参考にして執筆しました。\n\n- [Dockerイメージとコンテナの削除方法](https://qiita.com/tifa2chan/items/e9aa408244687a63a0ae)\n- [Chromeに「 400 Bad Request Header Or Cookie Too Large 」が出たときの対処方法](http://hokoxjouhou.blog105.fc2.com/blog-entry-1548.html)\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:58:29+09:00",
    "group": null,
    "id": "069f4517bd9a0d2ac704",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Docker",
        "versions": []
      },
      {
        "name": "container",
        "versions": []
      }
    ],
    "title": "Error response from daemon: conflict: Dockerコンテナを作成しようとしたらコンフリクトが起きたので解決法",
    "updated_at": "2020-11-17T21:59:32+09:00",
    "url": "https://qiita.com/suzu12/items/069f4517bd9a0d2ac704",
    "user": {
      "description": "プログラミング学習中です。主にRailsを中心に学習しております。\r\nエラーが出たときの対処法や思考の整理の場として活用、また活用してもらったら幸いです！\r\n間違いなどあればぜひ、コメントお願いいたします。\r\nよろしくお願いいたします！",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 0,
      "github_login_name": "suzu12",
      "id": "suzu12",
      "items_count": 4,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 647973,
      "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/647973/98013b20d6e3671518c2bfb1c82cb742d10c2dcb/x_large.png?1604881442",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003eはいどうも！\u003cbr\u003e\n某プログラミングスクールに通い始めた37歳のおっさんです。\u003cbr\u003e\nプログラミングは完全に未経験。\u003cbr\u003e\nそんなおっさんが転職するまでの軌跡（奇跡？）をぼちぼち綴っていこうと思います。\u003c/p\u003e\n\n\u003cp\u003e投稿は今日が初めてですがスクールは今日で9日目。\u003cbr\u003e\nHTML＆CSSをやってRubyに入り、Railsをやって試験を受けて、というところです。\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e簡単に私の経歴を\u003cbr\u003e\n↪️\u003cbr\u003e\n地方出身、東京の文系私立大学卒、東京で就職し営業職(toC \u0026amp; toB)でマネジメント経験あり。\u003cbr\u003e\nインディーズですが学生時代にやっていたバンドでCDを1枚だけ出しています。\u003cbr\u003e\nキャンプとジム通い、音楽掘りが趣味。\u003cbr\u003e\nジャンルはRock、JazzからEDMまで幅広く聴きます。\u003cbr\u003e\n今はちょっと難しくなってしまいましたが海外旅行もそこそこ行きました。\u003cbr\u003e\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\nなぜプログラミングを始めたのか、どうして転職を決意したのかなどは後々ゆっくりとupしていこうと思います。\u003cbr\u003e\nとりあえずまだ始めたばかりですが感想としては\u003cbr\u003e\n「めちゃくちゃやることがいっぱいある」\u003cbr\u003e\n「勉強すること、覚えることが今までやってきたことの比じゃないレベルで多い」\u003cbr\u003e\nこの二つですね。\u003cbr\u003e\n日々思ったこと、できなかったこと、疑問点などなど\u003cbr\u003e\n自分が見返した時に\u003cbr\u003e\n「あ〜こんなことあったな」とか、\u003cbr\u003e\n「こんなことで悩んでたんだな」とかとか、\u003cbr\u003e\nあとはこれを読んだ他の方に少しでも役に立てればなと思います。\u003c/p\u003e\n\n\u003cp\u003eそんな具合ですが本日は頭がパンクしているのでこれにて\u003cimg alt=\":wave_tone1:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44b-1f3fb.png\" title=\":wave_tone1:\" width=\"20\" loading=\"lazy\"\u003e\u003c/p\u003e\n",
    "body": "はいどうも！\n某プログラミングスクールに通い始めた37歳のおっさんです。\nプログラミングは完全に未経験。\nそんなおっさんが転職するまでの軌跡（奇跡？）をぼちぼち綴っていこうと思います。\n\n投稿は今日が初めてですがスクールは今日で9日目。\nHTML＆CSSをやってRubyに入り、Railsをやって試験を受けて、というところです。\u003cbr\u003e\u003cbr\u003e\n\n\n\n\n簡単に私の経歴を\n↪️\n地方出身、東京の文系私立大学卒、東京で就職し営業職(toC \u0026 toB)でマネジメント経験あり。\nインディーズですが学生時代にやっていたバンドでCDを1枚だけ出しています。\nキャンプとジム通い、音楽掘りが趣味。\nジャンルはRock、JazzからEDMまで幅広く聴きます。\n今はちょっと難しくなってしまいましたが海外旅行もそこそこ行きました。\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\nなぜプログラミングを始めたのか、どうして転職を決意したのかなどは後々ゆっくりとupしていこうと思います。\nとりあえずまだ始めたばかりですが感想としては\n「めちゃくちゃやることがいっぱいある」\n「勉強すること、覚えることが今までやってきたことの比じゃないレベルで多い」\nこの二つですね。\n日々思ったこと、できなかったこと、疑問点などなど\n自分が見返した時に\n「あ〜こんなことあったな」とか、\n「こんなことで悩んでたんだな」とかとか、\nあとはこれを読んだ他の方に少しでも役に立てればなと思います。\n\nそんな具合ですが本日は頭がパンクしているのでこれにて:wave_tone1:\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:58:10+09:00",
    "group": null,
    "id": "807122fb311031c44c59",
    "likes_count": 1,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Ruby",
        "versions": []
      },
      {
        "name": "HTML",
        "versions": []
      },
      {
        "name": "CSS",
        "versions": []
      },
      {
        "name": "Rails",
        "versions": []
      }
    ],
    "title": "未経験のおっさんがプログラミングを学ぶまで",
    "updated_at": "2020-11-17T21:58:10+09:00",
    "url": "https://qiita.com/bon_hxg/items/807122fb311031c44c59",
    "user": {
      "description": "37歳未経験のおっさんが\r\nエンジニアになるまでの道のり",
      "facebook_id": "",
      "followees_count": 1,
      "followers_count": 1,
      "github_login_name": null,
      "id": "bon_hxg",
      "items_count": 1,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 887559,
      "profile_image_url": "https://lh3.googleusercontent.com/a-/AOh14GjLrzgp7LGDi7ZGQ5soGORBI3fW6rZbV_m49xCF2g=s50",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch2\u003e\n\u003cspan id=\"問題\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%95%8F%E9%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e問題\u003c/h2\u003e\n\n\u003cp\u003eAnaconda で　install したはずの　パッケージが使用できず　下記のようなエラーが発生しました．\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eModuleNotFoundError: No module named 'selenium'\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e今回はselenium をinstall したはずなのに　上記のようなエラーが出ました．\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"原因\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8E%9F%E5%9B%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e原因\u003c/h2\u003e\n\n\u003cp\u003eanacondaプロンプトで python プログラム(****.py) を動作するときにpy.exeを使用していた．\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"対策\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AF%BE%E7%AD%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e対策\u003c/h2\u003e\n\n\u003cp\u003e起動するときに　以下のように記述した．\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"前-py-py-エラーが出た\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D-py-py-%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E5%87%BA%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前: py *********.py (エラーが出た)\u003c/h3\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"後-python-py--動いた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BE%8C-python-py--%E5%8B%95%E3%81%84%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e後: python *********.py  (動いた)\u003c/h3\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e感想\u003c/h2\u003e\n\n\u003cp\u003epyrhon.exe と　py.exe 2種は違うものだと知った(今までは同じだと思っていた)\u003cbr\u003e\n py.exe とはいったい何なのか，新たな疑問が生まれた\u003cbr\u003e\n 解決してみれば非常に単純な問題だが，時間がかかった\u003cbr\u003e\n 単純なミス過ぎて，ネットで検索しても出てこなかった．この記事が誰かの役に立とうれしいです．\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"解決までの道\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E3%81%BE%E3%81%A7%E3%81%AE%E9%81%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解決までの道\u003c/h2\u003e\n\n\u003cp\u003e自分に対するメモです\u003cbr\u003e\n1.問題に気づく\u003cbr\u003e\n2.py と　python パッケージをどこからimportしているか調べる\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eimport sys,pprint\npprint.pprint(sys.path)\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"結果が違うことに気づく計2時間程度\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%90%E6%9E%9C%E3%81%8C%E9%81%95%E3%81%86%E3%81%93%E3%81%A8%E3%81%AB%E6%B0%97%E3%81%A5%E3%81%8F%E8%A8%882%E6%99%82%E9%96%93%E7%A8%8B%E5%BA%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e結果が違うことに気づく!!(計　2時間程度)\u003c/h3\u003e\n\n\u003cp\u003e3.解決 (力尽きて作業進まず)\u003c/p\u003e\n",
    "body": "##問題\nAnaconda で　install したはずの　パッケージが使用できず　下記のようなエラーが発生しました．\n\n```\nModuleNotFoundError: No module named 'selenium'\n```\n今回はselenium をinstall したはずなのに　上記のようなエラーが出ました．\n##原因\n anacondaプロンプトで python プログラム(****.py) を動作するときにpy.exeを使用していた．\n\n##対策\n起動するときに　以下のように記述した．\n\n###前: py *********.py (エラーが出た)\n###後: python *********.py  (動いた)\n\n##感想\n pyrhon.exe と　py.exe 2種は違うものだと知った(今までは同じだと思っていた)\n py.exe とはいったい何なのか，新たな疑問が生まれた\n 解決してみれば非常に単純な問題だが，時間がかかった\n 単純なミス過ぎて，ネットで検索しても出てこなかった．この記事が誰かの役に立とうれしいです．\n\n\n##解決までの道\n自分に対するメモです\n1.問題に気づく\n2.py と　python パッケージをどこからimportしているか調べる\n\n```\nimport sys,pprint\npprint.pprint(sys.path)\n```\n###結果が違うことに気づく!!(計　2時間程度)\n3.解決 (力尽きて作業進まず)\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:57:22+09:00",
    "group": null,
    "id": "77454cbcbc989415d784",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Python",
        "versions": []
      },
      {
        "name": "Anaconda",
        "versions": []
      }
    ],
    "title": "Anaconda で　conda install したはずの　パッケージが import できない",
    "updated_at": "2020-11-17T22:08:22+09:00",
    "url": "https://qiita.com/tzks1/items/77454cbcbc989415d784",
    "user": {
      "description": "",
      "facebook_id": "",
      "followees_count": 3,
      "followers_count": 0,
      "github_login_name": null,
      "id": "tzks1",
      "items_count": 2,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 550504,
      "profile_image_url": "https://lh6.googleusercontent.com/-NuMrlH6iPR4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX5To8qg2-9lVJV1wYHpHSPpc64w/s50/photo.jpg",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch2\u003e\n\u003cspan id=\"起こった事\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B5%B7%E3%81%93%E3%81%A3%E3%81%9F%E4%BA%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e起こった事\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003ego run ***.go\u003c/code\u003eでサーバーを立ちあげた後にエディターでgoファイルを編集すると\u003ccode\u003egocode-gomod\u003c/code\u003eがかなりCPUを食いエディターがフリーズ＆PCが落ちてしまう、、、、\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e環境\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003ego 1.15.3\u003c/li\u003e\n\u003cli\u003edocker\u003c/li\u003e\n\u003cli\u003eVSCode\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"解決策\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解決策\u003c/h2\u003e\n\n\u003cp\u003e設定ファイル(\u003ccode\u003esetting.json\u003c/code\u003e)を開き以下のコードを追記すると治るそう\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"json\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esetting.json\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"go.useLanguageServer\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"原因\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8E%9F%E5%9B%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e原因\u003c/h2\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/golang/vscode-go/issues/249#issuecomment-647902730\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/golang/vscode-go/issues/249#issuecomment-647902730\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ccode\u003ego\u003c/code\u003eの候補表示してくれる\u003ccode\u003egocode-gomod\u003c/code\u003eは現在メモリをかなり食ってしまうようになっているらしくメンテナンス中かつ開発がストップしているそう、、\u003cbr\u003e\nなので、変わりに\u003ccode\u003egopls\u003c/code\u003eを使ってくれとの事でした！\u003c/p\u003e\n\n\u003cp\u003eこれでgoでの開発に集中できる^^\u003c/p\u003e\n",
    "body": "## 起こった事\n`go run ***.go`でサーバーを立ちあげた後にエディターでgoファイルを編集すると`gocode-gomod`がかなりCPUを食いエディターがフリーズ＆PCが落ちてしまう、、、、\n\n## 環境\n- go 1.15.3\n- docker\n- VSCode\n\n\n## 解決策\n設定ファイル(`setting.json`)を開き以下のコードを追記すると治るそう\n\n```json:setting.json\n{\n  \"go.useLanguageServer\": true,\n}\n```\n\n\n## 原因\n\u003ehttps://github.com/golang/vscode-go/issues/249#issuecomment-647902730\n\n`go`の候補表示してくれる`gocode-gomod`は現在メモリをかなり食ってしまうようになっているらしくメンテナンス中かつ開発がストップしているそう、、\nなので、変わりに`gopls`を使ってくれとの事でした！\n\nこれでgoでの開発に集中できる^^\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:56:47+09:00",
    "group": null,
    "id": "e64b16ca8ad1b62c6f27",
    "likes_count": 1,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Go",
        "versions": []
      },
      {
        "name": "Docker",
        "versions": []
      },
      {
        "name": "VSCode",
        "versions": []
      }
    ],
    "title": "goでサーバーを立ちあげたらVSCodeがフリーズ＆PCが落ちる",
    "updated_at": "2020-11-17T22:01:16+09:00",
    "url": "https://qiita.com/uta3chame/items/e64b16ca8ad1b62c6f27",
    "user": {
      "description": "つよつよエンジニアになるまでの成長日記、、、",
      "facebook_id": "",
      "followees_count": 16,
      "followers_count": 5,
      "github_login_name": "chameleon333",
      "id": "uta3chame",
      "items_count": 9,
      "linkedin_id": "",
      "location": "",
      "name": "yusei kaneta",
      "organization": "",
      "permanent_id": 335593,
      "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/335593/profile-images/1582621616",
      "team_only": false,
      "twitter_screen_name": "uta3chame",
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003eこの記事では、OCIのマネージドTerraform環境であるリソース・マネージャを使って、MySQL Database Serviceを作成してみたことを紹介します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"リソースマネージャとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%9E%E3%83%8D%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリソース・マネージャとは\u003c/h1\u003e\n\n\u003cp\u003eOracle Cloud Infrastructureリソースをプロビジョニングするプロセスを自動化できるOracle Cloud Infrastructureサービス\u003cbr\u003e\n「infrastructure-as-code」モデルを使用してリソースをインストール、構成、および管理するのに役立つTerraformのマネージド環境\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"リソースマネージャの機能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%9E%E3%83%8D%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%AE%E6%A9%9F%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリソース・マネージャの機能\u003c/h2\u003e\n\n\u003cp\u003eリソース・マネージャは以下のような特徴、機能があります（2020/11/15時点）\u003cbr\u003e\n- インフラストラクチャの自動化と標準化、環境のレプリケーションを容易に行う\u003cbr\u003e\n- Terraform エンジンのフルマネージドサービス\u003cbr\u003e\n- 指定したコンパートメントのリソースをTerraform構成ファイルの生成（Resource Discovery）\u003cbr\u003e\n- GitLabで管理されたTerraform構成ファイルからリソース・マネージャスタックの作成（構成ソース・プロバイダ）\u003cbr\u003e\n- スタックの最後に実行された構成と実際(現在)のインフラストラクチャの状態との差分抽出（ドリフト検出）\u003cbr\u003e\n- サンプル構成を使った環境構築\u003cbr\u003e\n- 使用できる Terraform フォーマットは v0.11/v0.12/v0.13\u003c/p\u003e\n\n\u003cp\u003e以下のサンプルは Terraform v0.12 フォーマットで記載しています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"mysql-database-service-作成サンプル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mysql-database-service-%E4%BD%9C%E6%88%90%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMYSQL Database Service 作成サンプル\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"使用している変数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E5%A4%89%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用している変数\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003emysql_configuration_id：MYSQL Database ServiceのコンフィグレーションID\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2F9eff2800-1d5b-cb7a-f48f-679c3a3d8717.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dc9e75ff4a02271a4fb90d30f90d7faa\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2F9eff2800-1d5b-cb7a-f48f-679c3a3d8717.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dc9e75ff4a02271a4fb90d30f90d7faa\" alt=\"zu05.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/9eff2800-1d5b-cb7a-f48f-679c3a3d8717.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2F9eff2800-1d5b-cb7a-f48f-679c3a3d8717.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a1cf6dad3a5051f9806bde329334cc14 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003emysql_password    ：管理者ユーザパスワード\u003c/li\u003e\n\u003cli\u003emysql_shape       ：MYSQL Database Serviceで利用するシェイプ\u003c/li\u003e\n\u003cli\u003eprivateSubnet_id  ：サブネットOCID\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"指定している名前\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E5%90%8D%E5%89%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e指定している名前\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eadmin_username    ：管理者ユーザ名（admin）\u003c/li\u003e\n\u003cli\u003ehostname_label/display_name：ホスト名（mysql1）\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"そのほかはデフォルト設定を指定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E3%81%BB%E3%81%8B%E3%81%AF%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E8%A8%AD%E5%AE%9A%E3%82%92%E6%8C%87%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eそのほかはデフォルト設定を指定\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"hcl\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003emysql.tf\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nx\"\u003eresource\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_mysql_mysql_db_system\u003c/span\u003e \u003cspan class=\"nx\"\u003eexport_MySQL1\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eadmin_password\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emysql_password\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eadmin_username\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"admin\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eavailability_domain\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoci_identity_availability_domain\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eTGjA\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eAD\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ebackup_policy\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eis_enabled\u003c/span\u003e        \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"true\"\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eretention_in_days\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"7\"\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ewindow_start_time\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"00:00\"\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e          \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003econfiguration_id\u003c/span\u003e        \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emysql_configuration_id\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edata_storage_size_in_gb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"50\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edisplay_name\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"MySQL1\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003efault_domain\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"FAULT-DOMAIN-1\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ehostname_label\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"mysql1\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003emaintenance\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ewindow_start_time\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"WEDNESDAY 04:22\"\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  mysql_version = \"8.0.22-u2-cloud\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eport\u003c/span\u003e          \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"3306\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eport_x\u003c/span\u003e        \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"33060\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eshape_name\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emysql_shape\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003estate\u003c/span\u003e     \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ACTIVE\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003esubnet_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprivateSubnet_id\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003elifecycle\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eignore_changes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eadmin_password\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eadmin_username\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_identity_availability_domain\u003c/span\u003e \u003cspan class=\"nx\"\u003eexport_TGjA\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eAD\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ead_number\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"1\"\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"サンプル環境の作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E7%92%B0%E5%A2%83%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプル環境の作成\u003c/h1\u003e\n\n\u003cp\u003eMySQL Database Serviceを構築する例として以下の構成を作成\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff54467dc-441f-c4d5-8f32-dd19f7709d53.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac39590dc19fb36f5deeae343386a4b4\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff54467dc-441f-c4d5-8f32-dd19f7709d53.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac39590dc19fb36f5deeae343386a4b4\" alt=\"zu01.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/f54467dc-441f-c4d5-8f32-dd19f7709d53.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff54467dc-441f-c4d5-8f32-dd19f7709d53.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d55d86d78613a5df3a2deafa67d3d445 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nコンピュートインスタンスにnginxとphpをインストールし、wordpressモジュールを展開、MySQL Database ServiceにDatabaseとユーザを作成しています。\u003cbr\u003e\nTerraform構成ファイルは\u003ca href=\"https://github.com/kenwatan/terraform_OCIRM_sample_wordpress\" rel=\"nofollow noopener\" target=\"_blank\"\u003egithub\u003c/a\u003eからダウンロード可能です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"環境構築の実行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%81%AE%E5%AE%9F%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e環境構築の実行\u003c/h1\u003e\n\n\u003cp\u003e1.Webコンソールのメニューから「リソース・マネージャ」＞「スタック」を開き「スタックの作成」をクリック\u003cbr\u003e\n2.githubから入手したtfファイルを圧縮したZIPファイルもしくはフォルダを指定してリソース・マネージャスタックを作成\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff86ea1f6-9fa7-30dd-df20-d8e221de6e11.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b632bcf2bde0dca2f86f3c144242a568\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff86ea1f6-9fa7-30dd-df20-d8e221de6e11.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b632bcf2bde0dca2f86f3c144242a568\" alt=\"zu03.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/f86ea1f6-9fa7-30dd-df20-d8e221de6e11.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Ff86ea1f6-9fa7-30dd-df20-d8e221de6e11.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=08e7985e68f1f1997d896ecb2f4aeb81 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n3. 計画ジョブ・適用ジョブを実行\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"サンプルファイルの補足\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%A3%9C%E8%B6%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルファイルの補足\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"予約済パブリックipの使用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%88%E7%B4%84%E6%B8%88%E3%83%91%E3%83%96%E3%83%AA%E3%83%83%E3%82%AFip%E3%81%AE%E4%BD%BF%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e予約済パブリックIPの使用\u003c/h2\u003e\n\n\u003cp\u003eコンピュートインスタンスとロード・バランサには、それぞれ予約済パブリックIPを割り当ててみた\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"予約済パブリックipの生成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%88%E7%B4%84%E6%B8%88%E3%83%91%E3%83%96%E3%83%AA%E3%83%83%E3%82%AFip%E3%81%AE%E7%94%9F%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e予約済パブリックIPの生成\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"hcl\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003epublicip.tf\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nx\"\u003eresource\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_public_ip\u003c/span\u003e \u003cspan class=\"nx\"\u003epublicip_lb\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edisplay_name\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"lb01\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003elifetime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"RESERVED\"\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"コンピュートインスタンスへの割り当て\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%88%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%81%B8%E3%81%AE%E5%89%B2%E3%82%8A%E5%BD%93%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンピュートインスタンスへの割り当て\u003c/h3\u003e\n\n\u003cp\u003eパブリックIPを割り当てるVNIC、プライベートIPのOCIDを取得し、予約済パブリックIPを割り当てる\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"hcl\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003epublicip_compute.tf\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_identity_availability_domain\u003c/span\u003e \u003cspan class=\"nx\"\u003eAD\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ead_number\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"1\"\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_vnic_attachments\u003c/span\u003e \u003cspan class=\"nx\"\u003einstance1_vnics\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eavailability_domain\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoci_identity_availability_domain\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAD\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003einstance_id\u003c/span\u003e         \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_instance\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eap1\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_vnic\u003c/span\u003e \u003cspan class=\"nx\"\u003einstance1_primary_vnic\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003evnic_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoci_core_vnic_attachments\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einstance1_vnics\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003evnic_attachments\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003evnic_id\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_private_ips\u003c/span\u003e \u003cspan class=\"nx\"\u003einstance1_ip\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003evnic_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoci_core_vnic\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einstance1_primary_vnic\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eresource\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_public_ip\u003c/span\u003e \u003cspan class=\"nx\"\u003epublicip_ap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edisplay_name\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ap01\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003elifetime\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"RESERVED\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eprivate_ip_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoci_core_private_ips\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einstance1_ip\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprivate_ips\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ロードバランサへの割り当て\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%81%B8%E3%81%AE%E5%89%B2%E3%82%8A%E5%BD%93%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eロード・バランサへの割り当て\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"hcl\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003epublicip_lb.tf\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nx\"\u003eresource\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_load_balancer_load_balancer\u003c/span\u003e \u003cspan class=\"nx\"\u003eLB1\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecompartment_id\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003evar\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecompartment_ocid\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edisplay_name\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"LB1\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eip_mode\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"IPV4\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eis_private\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"false\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ereserved_ips\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eid\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eoci_core_public_ip\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003epublicip_lb\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003enetwork_security_group_ids\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eoci_core_network_security_group\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexport_Network\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eSecurity\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eGroup\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003efor\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eAP\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eshape\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"100Mbps\"\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003esubnet_ids\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eoci_core_subnet\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexport_PublicSubnet\u003c/span\u003e\u003cspan class=\"err\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"適用ジョブログ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%A9%E7%94%A8%E3%82%B8%E3%83%A7%E3%83%96%E3%83%AD%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e適用ジョブログ\u003c/h2\u003e\n\n\u003cp\u003e適用ジョブのログに、ロードバランサ、APサーバのパブリックIPアドレスとAPサーバへのsshログイン用秘密鍵ファイル内容が出力される\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd7d14641-4682-676c-e540-9c9f070456a1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4d8af30b901447a62735c6251e4c09e1\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd7d14641-4682-676c-e540-9c9f070456a1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4d8af30b901447a62735c6251e4c09e1\" alt=\"zu04.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/d7d14641-4682-676c-e540-9c9f070456a1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd7d14641-4682-676c-e540-9c9f070456a1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=81e8534e4331b942dc7fe5fff1980c84 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"wordpressの初期設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#wordpress%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ewordpressの初期設定\u003c/h2\u003e\n\n\u003cp\u003eコンピュートインスタンスのパブリックIPアドレスに ブラウザで httpアクセスすることで wordpress 初期画面が表示されることを確認\u003cbr\u003e\nhttp://\u0026lt;コンピュートインスタンスパブリックIPアドレス\u0026gt;/\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd5a79762-c0c8-b24e-8fec-dab031258d13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=26d49dab2500d9d4d9bfd2aee93a588f\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd5a79762-c0c8-b24e-8fec-dab031258d13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=26d49dab2500d9d4d9bfd2aee93a588f\" alt=\"zu02.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/d5a79762-c0c8-b24e-8fec-dab031258d13.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F108635%2Fd5a79762-c0c8-b24e-8fec-dab031258d13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cd3f3b1ba7611dff96638d0908eafafe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003eOCIの Terraform マネージドサービスのリソース・マネージャを使用して MySQL Database Serviceおよびそれにアクセスするコンピュートインスタンスにwordpress環境をデプロイしてみた。\u003c/p\u003e\n",
    "body": "\nこの記事では、OCIのマネージドTerraform環境であるリソース・マネージャを使って、MySQL Database Serviceを作成してみたことを紹介します。\n\n# リソース・マネージャとは\nOracle Cloud Infrastructureリソースをプロビジョニングするプロセスを自動化できるOracle Cloud Infrastructureサービス\n「infrastructure-as-code」モデルを使用してリソースをインストール、構成、および管理するのに役立つTerraformのマネージド環境\n\n## リソース・マネージャの機能\nリソース・マネージャは以下のような特徴、機能があります（2020/11/15時点）\n- インフラストラクチャの自動化と標準化、環境のレプリケーションを容易に行う\n- Terraform エンジンのフルマネージドサービス\n- 指定したコンパートメントのリソースをTerraform構成ファイルの生成（Resource Discovery）\n- GitLabで管理されたTerraform構成ファイルからリソース・マネージャスタックの作成（構成ソース・プロバイダ）\n- スタックの最後に実行された構成と実際(現在)のインフラストラクチャの状態との差分抽出（ドリフト検出）\n- サンプル構成を使った環境構築\n- 使用できる Terraform フォーマットは v0.11/v0.12/v0.13\n\n以下のサンプルは Terraform v0.12 フォーマットで記載しています。\n\n# MYSQL Database Service 作成サンプル\n## 使用している変数\n- mysql_configuration_id：MYSQL Database ServiceのコンフィグレーションID![zu05.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/9eff2800-1d5b-cb7a-f48f-679c3a3d8717.png)\n- mysql_password\t：管理者ユーザパスワード\n- mysql_shape\t\t：MYSQL Database Serviceで利用するシェイプ\n- privateSubnet_id\t：サブネットOCID\n\n## 指定している名前\n- admin_username\t：管理者ユーザ名（admin）\n- hostname_label/display_name：ホスト名（mysql1）\n\n## そのほかはデフォルト設定を指定\n\n```mysql.tf\nresource oci_mysql_mysql_db_system export_MySQL1 {\n  admin_password      = var.mysql_password\n  admin_username      = \"admin\"\n  availability_domain = data.oci_identity_availability_domain.TGjA-AD-1.name\n  backup_policy {\n    is_enabled        = \"true\"\n    retention_in_days = \"7\"\n    window_start_time = \"00:00\"\n  }\n  compartment_id          = var.compartment_ocid\n  configuration_id        = var.mysql_configuration_id\n  data_storage_size_in_gb = \"50\"\n  display_name = \"MySQL1\"\n  fault_domain = \"FAULT-DOMAIN-1\"\n  hostname_label = \"mysql1\"\n  maintenance {\n    window_start_time = \"WEDNESDAY 04:22\"\n  }\n#  mysql_version = \"8.0.22-u2-cloud\"\n  port          = \"3306\"\n  port_x        = \"33060\"\n  shape_name    = var.mysql_shape\n  state     = \"ACTIVE\"\n  subnet_id = var.privateSubnet_id\n\n  lifecycle {\n    ignore_changes = [admin_password, admin_username]\n  }\n}\ndata oci_identity_availability_domain export_TGjA-AD-1 {\n  compartment_id = var.compartment_ocid\n  ad_number      = \"1\"\n}\n```\n\n# サンプル環境の作成\nMySQL Database Serviceを構築する例として以下の構成を作成\n![zu01.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/f54467dc-441f-c4d5-8f32-dd19f7709d53.gif)\nコンピュートインスタンスにnginxとphpをインストールし、wordpressモジュールを展開、MySQL Database ServiceにDatabaseとユーザを作成しています。\nTerraform構成ファイルは[github](https://github.com/kenwatan/terraform_OCIRM_sample_wordpress)からダウンロード可能です。\n\n\n\n# 環境構築の実行\n\n1.Webコンソールのメニューから「リソース・マネージャ」＞「スタック」を開き「スタックの作成」をクリック\n2.githubから入手したtfファイルを圧縮したZIPファイルもしくはフォルダを指定してリソース・マネージャスタックを作成![zu03.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/f86ea1f6-9fa7-30dd-df20-d8e221de6e11.png)\n3. 計画ジョブ・適用ジョブを実行\n\n# サンプルファイルの補足\n## 予約済パブリックIPの使用\nコンピュートインスタンスとロード・バランサには、それぞれ予約済パブリックIPを割り当ててみた\n\n### 予約済パブリックIPの生成\n\n```publicip.tf\nresource oci_core_public_ip publicip_lb {\n  compartment_id = var.compartment_ocid\n  display_name = \"lb01\"\n  lifetime = \"RESERVED\"\n}\n```\n\n### コンピュートインスタンスへの割り当て\nパブリックIPを割り当てるVNIC、プライベートIPのOCIDを取得し、予約済パブリックIPを割り当てる\n\n```publicip_compute.tf\ndata oci_identity_availability_domain AD-1 {\n  compartment_id = var.compartment_ocid\n  ad_number      = \"1\"\n}\ndata oci_core_vnic_attachments instance1_vnics {\n  availability_domain = data.oci_identity_availability_domain.AD-1.name\n  compartment_id      = var.compartment_ocid\n  instance_id         = oci_core_instance.ap1.id\n}\n\ndata oci_core_vnic instance1_primary_vnic {\n    vnic_id = data.oci_core_vnic_attachments.instance1_vnics.vnic_attachments[0].vnic_id\n}\n\ndata oci_core_private_ips instance1_ip {\n    vnic_id = data.oci_core_vnic.instance1_primary_vnic.id\n}\nresource oci_core_public_ip publicip_ap {\n  compartment_id = var.compartment_ocid\n  display_name = \"ap01\"\n  lifetime      = \"RESERVED\"\n  private_ip_id = data.oci_core_private_ips.instance1_ip.private_ips[0].id\n}\n```\n\n### ロード・バランサへの割り当て\n```publicip_lb.tf\nresource oci_load_balancer_load_balancer LB1 {\n  compartment_id = var.compartment_ocid\n  display_name = \"LB1\"\n  ip_mode    = \"IPV4\"\n  is_private = \"false\"\n  reserved_ips {\n    id = oci_core_public_ip.publicip_lb.id\n  }\n  network_security_group_ids = [\n    oci_core_network_security_group.export_Network-Security-Group-for-AP.id,\n  ]\n  shape = \"100Mbps\"\n  subnet_ids = [\n    oci_core_subnet.export_PublicSubnet.id,\n  ]\n}\n```\n\n## 適用ジョブログ\n適用ジョブのログに、ロードバランサ、APサーバのパブリックIPアドレスとAPサーバへのsshログイン用秘密鍵ファイル内容が出力される\n![zu04.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/d7d14641-4682-676c-e540-9c9f070456a1.png)\n\n\n## wordpressの初期設定\nコンピュートインスタンスのパブリックIPアドレスに ブラウザで httpアクセスすることで wordpress 初期画面が表示されることを確認\nhttp://\u003cコンピュートインスタンスパブリックIPアドレス\u003e/\n![zu02.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/108635/d5a79762-c0c8-b24e-8fec-dab031258d13.png)\n\n\n# おわりに\nOCIの Terraform マネージドサービスのリソース・マネージャを使用して MySQL Database Serviceおよびそれにアクセスするコンピュートインスタンスにwordpress環境をデプロイしてみた。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:53:27+09:00",
    "group": null,
    "id": "a7dde25954c5f1f5d92b",
    "likes_count": 1,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "MySQL",
        "versions": []
      },
      {
        "name": "Terraform",
        "versions": []
      },
      {
        "name": "oci",
        "versions": []
      },
      {
        "name": "ResourceManager",
        "versions": []
      }
    ],
    "title": "[OCI]リソース・マネージャを使って、MYSQL Database Serviceを作成してみた (2020/11/15)",
    "updated_at": "2020-11-17T22:25:00+09:00",
    "url": "https://qiita.com/kenwatan/items/a7dde25954c5f1f5d92b",
    "user": {
      "description": "Database 好き",
      "facebook_id": "",
      "followees_count": 6,
      "followers_count": 24,
      "github_login_name": null,
      "id": "kenwatan",
      "items_count": 30,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "日本オラクル株式会社",
      "permanent_id": 108635,
      "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/108635/profile-images/1473710616",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e自作PCの自動起動を好きにカスタムできる良い感じのアプリが無いので、自分で製作を考えている。試しにobnizを利用してWebアプリから電源ONを試作。　※今回は電源ONの代わりにLED点灯を試す。\u003cbr\u003e\nちょっと分かり辛いが、電源ONクリックするとLEDが１秒点灯して消える。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2F18d24f32-0fcf-eaa8-7ef0-19cf9e4d9d60.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b78d9a9c2fe8b29ffc7366ab7149bd12\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2F18d24f32-0fcf-eaa8-7ef0-19cf9e4d9d60.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b78d9a9c2fe8b29ffc7366ab7149bd12\" width=\"200\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/18d24f32-0fcf-eaa8-7ef0-19cf9e4d9d60.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2F18d24f32-0fcf-eaa8-7ef0-19cf9e4d9d60.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b934524162aad4080160b00aaa017c20 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"webアプリ画面\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#web%E3%82%A2%E3%83%97%E3%83%AA%E7%94%BB%E9%9D%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eWebアプリ画面\u003c/h1\u003e\n\n\u003cp\u003e曜日別に起動時間を設定したいので、曜日別時間設定画面を設けた。データベース保存はまだ実装出来ていない。\u003ca href=\"https://codepen.io/pmanrabbit/pen/jOrJOjr\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCodePenはコチラから\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fbf72e907-8cda-f2b3-841d-37067e08a152.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2b82f3d3e62fc9176d01488ea31fbaf6\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fbf72e907-8cda-f2b3-841d-37067e08a152.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2b82f3d3e62fc9176d01488ea31fbaf6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/bf72e907-8cda-f2b3-841d-37067e08a152.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fbf72e907-8cda-f2b3-841d-37067e08a152.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=17c68b0e5e32e05621228fb89976fbba 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコード\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e.html\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"cp\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;html\u003c/span\u003e \u003cspan class=\"na\"\u003elang=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"jp\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;head\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003echarset=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"UTF-8\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;title\u0026gt;\u003c/span\u003eHPC-accede\u003cspan class=\"nt\"\u003e\u0026lt;/title\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"viewport\"\u003c/span\u003e \u003cspan class=\"na\"\u003econtent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width=device-width, initial-scale=1\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;link\u003c/span\u003e \u003cspan class=\"na\"\u003erel=\u003c/span\u003e\u003cspan class=\"s\"\u003e'stylesheet'\u003c/span\u003e \u003cspan class=\"na\"\u003ehref=\u003c/span\u003e\u003cspan class=\"s\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;body\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c\"\u003e\u0026lt;!-- 全体をVue.js有効にする --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"app\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"container text-white bg-dark p-1\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!-- タイトル --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"row text-center\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-sm-6 mx-auto\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;h1\u0026gt;\u003c/span\u003eHPC-accede\u003cspan class=\"nt\"\u003e\u0026lt;/h1\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"c\"\u003e\u0026lt;!-- 設定 --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group my-3 mx-4\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"border-bottom col-sm-12\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;h5\u0026gt;\u003c/span\u003eObniz ID\u003cspan class=\"nt\"\u003e\u0026lt;/h5\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group form-inline my-3 mx-5\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ObnizID[0]\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"text\"\u003c/span\u003e \u003cspan class=\"na\"\u003emaxlength=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"4\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:80px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e-\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ObnizID[1]\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"text\"\u003c/span\u003e \u003cspan class=\"na\"\u003emaxlength=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"4\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:80px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e  \n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!-- 即時電源ON --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group my-3 mx-4\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"border-bottom col-sm-12\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;h5\u0026gt;\u003c/span\u003e即時起動\u003cspan class=\"nt\"\u003e\u0026lt;/h5\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group my-3 mx-5\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;button\u003c/span\u003e \u003cspan class=\"na\"\u003ev-on:click=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"PowerON\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"btn btn-success\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e電源ON\u003cspan class=\"nt\"\u003e\u0026lt;/button\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!-- 曜日指定 --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group my-3 mx-4\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"border-bottom col-sm-12\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;h5\u0026gt;\u003c/span\u003e曜日別時間設定\u003cspan class=\"nt\"\u003e\u0026lt;/h5\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-group form-inline col-sm-12\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 日曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e日曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Sun']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 月曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e月曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Mon']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 火曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e火曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Tue']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 水曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e水曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Wed']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 木曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e木曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Thu']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 金曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e金曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Fri']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- 土曜 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-inline col-sm-4 mb-2\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;label\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"control-label mx-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e土曜：\u003cspan class=\"nt\"\u003e\u0026lt;/label\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;input\u003c/span\u003e \u003cspan class=\"na\"\u003ev-model:value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"WeekTime['Sat']\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control\"\u003c/span\u003e \u003cspan class=\"na\"\u003etype=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003estep=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width:130px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e\u0026lt;!-- CDN --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js'\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e'https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js'\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e'https://unpkg.com/obniz@3.9.0/obniz.js'\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/script\u0026gt;\u0026lt;script  \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"./script.js\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/html\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003escript.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e// 任意の秒数待つことができる関数\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esleep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emsec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003esetTimeout\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003emsec\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// Obniz関数\u003c/span\u003e\n\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Obniz呼び出し関数\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003econnect\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eob\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econnectionState\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Obnizへの接続を確認\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econnectionState\u003c/span\u003e \u003cspan class=\"o\"\u003e===\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003econnected\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003econnect\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eapp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eVue\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e#app\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Vueが管理する一番外側のDOM要素\u003c/span\u003e\n  \u003cspan class=\"na\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// Vue内部で利用する変数定義\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eObnizID\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e0000\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e0000\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eWeekTime\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSun\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eMon\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eTue\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eWed\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eThu\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eFri\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSat\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e00:00:00\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e],\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\n  \u003cspan class=\"na\"\u003emethods\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 関数はココに記述\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ePowerON\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e// LED ON\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e// Obniz ID 指定\u003c/span\u003e\n      \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eobnizid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eObnizID\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]}\u003c/span\u003e\u003cspan class=\"err\"\u003e-\u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eObnizID\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eobnizid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n      \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eObniz\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eobnizid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n      \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eme\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// thisを関数内で使えないので変数に代入\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e// connect関数を呼んで、connect関数内で以下のFunctionを実行\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003econnect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eled\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eme\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ewired\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eLED\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eanode\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ecathode\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eme\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclear\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eme\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eON\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eled\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003esleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"nx\"\u003eled\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eoff\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// LED点灯 1s\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eme\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclear\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eobniz\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"弟に使い勝手とかを聞いてみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BC%9F%E3%81%AB%E4%BD%BF%E3%81%84%E5%8B%9D%E6%89%8B%E3%81%A8%E3%81%8B%E3%82%92%E8%81%9E%E3%81%84%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e弟に使い勝手とかを聞いてみた\u003c/h1\u003e\n\n\u003cp\u003e今回はLED点灯だが、完成後はPCが起動するようになるイメージを持ってもらったうえで使ってもらった。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"操作面\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%93%8D%E4%BD%9C%E9%9D%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e操作面\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e初回実行時のLED点灯の動作がちょっとおかしい。　※コーディングミスってるかも。\u003c/li\u003e\n\u003cli\u003e初期設定（ObnizID）は別メニューの方が良いと思う。\u003c/li\u003e\n\u003cli\u003e電源ON を押したらすぐ起動しちゃうの？間違えて起動とか考慮したら？\u003c/li\u003e\n\u003cli\u003e毎日を同じ時間にしたい場合、一つずつ設定するのは面倒では？\u003c/li\u003e\n\u003cli\u003e電源OFF は出来ないんだよね？（聞いてみただけみたい。）\u003c/li\u003e\n\u003cli\u003eこの日だけ臨時で時間設定とか出来たら良いのでは？\u003c/li\u003e\n\u003cli\u003eプリセット登録（パターンを予め設定できる）とかどう？\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"企画面\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BC%81%E7%94%BB%E9%9D%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e企画面\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e自作PCじゃないから使わないな。（自作PCでしか出来ない？）\u003c/li\u003e\n\u003cli\u003e同じ仕組みで遠隔起動出来ると良いかもしれないけど、思いつかないね。（私も思いつかない。）\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"なぜ自動起動したいか補足\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%81%9C%E8%87%AA%E5%8B%95%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%9F%E3%81%84%E3%81%8B%E8%A3%9C%E8%B6%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなぜ自動起動したいか（補足）\u003c/h1\u003e\n\n\u003cp\u003ePCでTV録画しているからって理由。毎日同じ時間で起動はBIOSで設定できるけど、もう少し起動時間をフレキシブルに変更したいっていう私のわがまま。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"想定イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%83%B3%E5%AE%9A%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e想定イメージ\u003c/h1\u003e\n\n\u003cp\u003e今回はWebアプリとObnizの連携部分のみの実装。\u003cstrong\u003eLED部分をリレーと置き換え、自作PCのPowerSWと置き換えてショートさせれば電源ON出来る想定。（たぶん。）\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fb52cdc08-5878-4805-1737-80a5f82f9a40.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6e3783c39159114381608cdd1a488aaf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fb52cdc08-5878-4805-1737-80a5f82f9a40.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6e3783c39159114381608cdd1a488aaf\" width=\"450\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/b52cdc08-5878-4805-1737-80a5f82f9a40.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F725039%2Fb52cdc08-5878-4805-1737-80a5f82f9a40.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=13714baf7628c9e3443a11330a6e3496 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n",
    "body": "自作PCの自動起動を好きにカスタムできる良い感じのアプリが無いので、自分で製作を考えている。試しにobnizを利用してWebアプリから電源ONを試作。　※今回は電源ONの代わりにLED点灯を試す。\nちょっと分かり辛いが、電源ONクリックするとLEDが１秒点灯して消える。\n\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/18d24f32-0fcf-eaa8-7ef0-19cf9e4d9d60.gif\" width=\"200\"\u003e\n\n#Webアプリ画面\n曜日別に起動時間を設定したいので、曜日別時間設定画面を設けた。データベース保存はまだ実装出来ていない。[CodePenはコチラから](https://codepen.io/pmanrabbit/pen/jOrJOjr)\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/bf72e907-8cda-f2b3-841d-37067e08a152.png)\n\n#コード\n```html:.html\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"jp\" \u003e\n\u003chead\u003e\n  \u003cmeta charset=\"UTF-8\"\u003e\n  \u003ctitle\u003eHPC-accede\u003c/title\u003e\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003e\n    \u003clink rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'\u003e\n\u003c/head\u003e\n\n\u003cbody\u003e\n\u003c!-- 全体をVue.js有効にする --\u003e\n\u003cdiv id=\"app\" class=\"container text-white bg-dark p-1\"\u003e\n\n  \u003c!-- タイトル --\u003e\n  \u003cdiv class=\"row text-center\"\u003e\n    \u003cdiv class=\"col-sm-6 mx-auto\"\u003e\u003ch1\u003eHPC-accede\u003c/h1\u003e\u003c/div\u003e\n  \u003c/div\u003e\n  \u003c!-- 設定 --\u003e\n  \u003cdiv class=\"form-group my-3 mx-4\"\u003e\n    \u003cdiv class=\"border-bottom col-sm-12\"\u003e\u003ch5\u003eObniz ID\u003c/h5\u003e\u003c/div\u003e\n  \u003c/div\u003e\n  \u003cdiv class=\"form-group form-inline my-3 mx-5\"\u003e\n    \u003cinput v-model:value=\"ObnizID[0]\" class=\"form-control\" type=\"text\" maxlength=\"4\" style=\"width:80px;\"\u003e\n    \u003clabel class=\"control-label mx-2\"\u003e-\u003c/label\u003e\n    \u003cinput v-model:value=\"ObnizID[1]\" class=\"form-control\" type=\"text\" maxlength=\"4\" style=\"width:80px;\"\u003e  \n  \u003c/div\u003e\n\n  \u003c!-- 即時電源ON --\u003e\n  \u003cdiv class=\"form-group my-3 mx-4\"\u003e\n    \u003cdiv class=\"border-bottom col-sm-12\"\u003e\u003ch5\u003e即時起動\u003c/h5\u003e\u003c/div\u003e\n  \u003c/div\u003e\n  \u003cdiv class=\"form-group my-3 mx-5\"\u003e\n    \u003cbutton v-on:click=\"PowerON\" class=\"btn btn-success\"\u003e電源ON\u003c/button\u003e\n  \u003c/div\u003e\n\n  \u003c!-- 曜日指定 --\u003e\n  \u003cdiv class=\"form-group my-3 mx-4\"\u003e\n    \u003cdiv class=\"border-bottom col-sm-12\"\u003e\u003ch5\u003e曜日別時間設定\u003c/h5\u003e\u003c/div\u003e\n  \u003c/div\u003e\n\n  \u003cdiv class=\"form-group form-inline col-sm-12\"\u003e\n    \u003c!-- 日曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e日曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Sun']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 月曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e月曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Mon']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 火曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e火曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Tue']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 水曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e水曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Wed']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 木曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e木曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Thu']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 金曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e金曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Fri']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n    \u003c!-- 土曜 --\u003e\n    \u003cdiv class=\"form-inline col-sm-4 mb-2\"\u003e\n      \u003clabel class=\"control-label mx-3\"\u003e土曜：\u003c/label\u003e\n      \u003cinput v-model:value=\"WeekTime['Sat']\" class=\"form-control\" type=\"time\" step=\"1\" style=\"width:130px;\"\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\u003c!-- CDN --\u003e\n\u003cscript src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js'\u003e\u003c/script\u003e\n\u003cscript src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'\u003e\u003c/script\u003e\n\u003cscript src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js'\u003e\u003c/script\u003e\n\u003cscript src='https://unpkg.com/obniz@3.9.0/obniz.js'\u003e\n\u003c/script\u003e\u003cscript  src=\"./script.js\"\u003e\u003c/script\u003e\n\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\n```javascript:script.js\n// 任意の秒数待つことができる関数\nconst sleep = (msec) =\u003e new Promise(res =\u003e setTimeout(res, msec));\n// Obniz関数\nlet obniz;\n\n// Obniz呼び出し関数\nconst connect = function(func, ob){\n  console.log(ob.connectionState);\n  // Obnizへの接続を確認\n  if (ob.connectionState === \"connected\") {\n    func();\n  } else {\n    ob.on('connect', () =\u003e {\n      func();\n    })\n  }\n}\n\nconst app = new Vue({\n  el: '#app', // Vueが管理する一番外側のDOM要素\n  data: {\n    // Vue内部で利用する変数定義\n    ObnizID: ['0000', '0000'],\n    WeekTime: [\n      {'Sun':'00:00:00'},\n      {'Mon':'00:00:00'},\n      {'Tue':'00:00:00'},\n      {'Wed':'00:00:00'},\n      {'Thu':'00:00:00'},\n      {'Fri':'00:00:00'},\n      {'Sat':'00:00:00'},\n    ],\n  },\n\n  methods: {\n    // 関数はココに記述\n    PowerON: function() {\n      // LED ON\n      // Obniz ID 指定\n      let obnizid = `${this.ObnizID[0]}-${this.ObnizID[1]}`;\n      console.log(obnizid);\n      this.obniz = new Obniz(obnizid);\n\n      let me = this; // thisを関数内で使えないので変数に代入\n      // connect関数を呼んで、connect関数内で以下のFunctionを実行\n      connect(async function() {\n        const led = me.obniz.wired('LED', { anode: 0, cathode: 1 });\n        me.obniz.display.clear();\n        me.obniz.display.print('ON');\n        led.on(); await sleep(1000); led.off();   // LED点灯 1s\n        me.obniz.display.clear();\n      }, this.obniz);\n    },\n  },\n});\n```\n\n#弟に使い勝手とかを聞いてみた\n今回はLED点灯だが、完成後はPCが起動するようになるイメージを持ってもらったうえで使ってもらった。\n\n####操作面\n* 初回実行時のLED点灯の動作がちょっとおかしい。　※コーディングミスってるかも。\n* 初期設定（ObnizID）は別メニューの方が良いと思う。\n* 電源ON を押したらすぐ起動しちゃうの？間違えて起動とか考慮したら？\n* 毎日を同じ時間にしたい場合、一つずつ設定するのは面倒では？\n* 電源OFF は出来ないんだよね？（聞いてみただけみたい。）\n* この日だけ臨時で時間設定とか出来たら良いのでは？\n* プリセット登録（パターンを予め設定できる）とかどう？\n\n####企画面\n* 自作PCじゃないから使わないな。（自作PCでしか出来ない？）\n* 同じ仕組みで遠隔起動出来ると良いかもしれないけど、思いつかないね。（私も思いつかない。）\n\n#なぜ自動起動したいか（補足）\nPCでTV録画しているからって理由。毎日同じ時間で起動はBIOSで設定できるけど、もう少し起動時間をフレキシブルに変更したいっていう私のわがまま。\n\n#想定イメージ\n今回はWebアプリとObnizの連携部分のみの実装。**LED部分をリレーと置き換え、自作PCのPowerSWと置き換えてショートさせれば電源ON出来る想定。（たぶん。）**\n\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/725039/b52cdc08-5878-4805-1737-80a5f82f9a40.png\" width=\"450\"\u003e\n\n\n\n\n\n\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:53:02+09:00",
    "group": null,
    "id": "dc265392961b2182b9b0",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "HTML",
        "versions": []
      },
      {
        "name": "JavaScript",
        "versions": []
      },
      {
        "name": "Vue.js",
        "versions": []
      },
      {
        "name": "obniz",
        "versions": []
      }
    ],
    "title": "自作PC特化だけど、リモート起動や自動起動を好きにカスタムできるWebアプリをobnizで試作してみた",
    "updated_at": "2020-11-17T21:53:52+09:00",
    "url": "https://qiita.com/PmanRabbit/items/dc265392961b2182b9b0",
    "user": {
      "description": "",
      "facebook_id": "",
      "followees_count": 8,
      "followers_count": 9,
      "github_login_name": null,
      "id": "PmanRabbit",
      "items_count": 16,
      "linkedin_id": "",
      "location": "",
      "name": "Jun Is",
      "organization": "",
      "permanent_id": 725039,
      "profile_image_url": "https://lh4.googleusercontent.com/-HiRgT9BwGhs/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucn6fEww7AM-iQ47zqz2c1L2l8N65A/s50/photo.jpg",
      "team_only": false,
      "twitter_screen_name": "PmanRabbit",
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e今回はDeviseを使ってログイン機能を作成していきます。\u003cbr\u003e\nまたDeviseの日本語化やBootstrap4の適用までを行っていきます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ rails new devise-sample \n$ rails g controller homes index\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003econfig/routes.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"no\"\u003eRails\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eroutes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edraw\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eroot\u003c/span\u003e \u003cspan class=\"s1\"\u003e'homes#index'\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ナビバーを追加しレスポンシブ対応のためのmetaタグを追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8A%E3%83%93%E3%83%90%E3%83%BC%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B7%E3%83%96%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AEmeta%E3%82%BF%E3%82%B0%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eナビバーを追加し，レスポンシブ対応のためのmetaタグを追加\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/layouts/application.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e (略)\n     \u0026lt;%= csrf_meta_tags %\u0026gt;\n     \u0026lt;%= csp_meta_tag %\u0026gt;\n     \u0026lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"\u0026gt;　　//追加\n (略)\n  \u0026lt;body\u0026gt;\n     \u0026lt;%= render 'shared/header' %\u0026gt;     //追加\n     \u0026lt;%= yield %\u0026gt;\n   \u0026lt;/body\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/homes/index.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;%= render 'shared/flash_messages' %\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"新しくsharedフォルダと各renderファイルを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%96%B0%E3%81%97%E3%81%8Fshared%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%81%A8%E5%90%84render%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e新しくsharedフォルダと各renderファイルを作成\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/shared/flash_messages.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;% flash.each do |msg_type, msg| %\u0026gt;\n  \u0026lt;div class=\"alert alert-\u0026lt;%= msg_type %\u0026gt;\" role=\"alert\" id=\"alert\"\u0026gt;\n    \u0026lt;a href=\"#\" class=\"close\" data-dismiss=\"alert\"\u0026gt;×\u0026lt;/a\u0026gt;\n    \u0026lt;%= msg %\u0026gt;\n  \u0026lt;/div\u0026gt;\n\u0026lt;% end %\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/shared/_header.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;header\u0026gt;\n  \u0026lt;nav class=\"navbar navbar-expand navbar-light\"\u0026gt;\n    \u0026lt;%= link_to \"Deviseサンプル\", root_path, class: 'navbar-brand' %\u0026gt;\n    \u0026lt;div id=\"Navber\"\u0026gt;\n      \u0026lt;ul class=\"navbar-nav\"\u0026gt;\n        \u0026lt;% if user_signed_in? %\u0026gt;\n          \u0026lt;li class=\"nav-item active\"\u0026gt;\n            \u0026lt;%= link_to 'アカウント編集', edit_user_registration_path, class: 'nav-link' %\u0026gt;\n          \u0026lt;/li\u0026gt;\n          \u0026lt;li class=\"nav-item active\"\u0026gt;\n            \u0026lt;%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: 'nav-link' %\u0026gt;\n          \u0026lt;/li\u0026gt;\n      \u0026lt;% else %\u0026gt;\n          \u0026lt;li class=\"nav-item active\"\u0026gt;\n            \u0026lt;%= link_to \"新規登録\", new_user_registration_path, class: 'nav-link' %\u0026gt;\n          \u0026lt;/li\u0026gt;\n          \u0026lt;li class=\"nav-item active\"\u0026gt;\n            \u0026lt;%= link_to \"ログイン\", new_user_session_path, class: 'nav-link' %\u0026gt;\n          \u0026lt;/li\u0026gt;\n        \u0026lt;% end %\u0026gt;\n      \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n  \u0026lt;/nav\u0026gt;\n\u0026lt;/header\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"gemの追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#gem%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGemの追加\u003c/h2\u003e\n\n\u003cp\u003eGemfileに以下を追加して\u003ccode\u003e$ bundle install\u003c/code\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"Gemfile\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e# ログイン機能に必要なGem\ngem 'devise'\n\n# 日本語化に必要なGem\ngem 'rails-i18n', '~\u0026gt; 5.1'\ngem 'devise-i18n'\n\n# Bootstrapに必要なGem\ngem 'bootstrap', '~\u0026gt; 4.4.1'\ngem 'jquery-rails'\ngem 'devise-bootstrap-views', '~\u0026gt; 1.0'\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ bundle install\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"bootstrapの導入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bootstrap%E3%81%AE%E5%B0%8E%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBootstrapの導入\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eapplication.css\u003c/code\u003eの拡張子を\u003ccode\u003escss\u003c/code\u003eに変更\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eapplication.scss\u003c/code\u003eから，\u003ccode\u003e*= require_tree .\u003c/code\u003eと\u003ccode\u003e*= require_self\u003c/code\u003eを削除\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eapplication.scss\u003c/code\u003eに\u003ccode\u003e@import \"bootstrap\";\u003c/code\u003eを追加\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eスタイルも追加\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"scss\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/assets/stylesheets/application.scss\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003e@import\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"bootstrap\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// ログイン画面\u003c/span\u003e\n\n\u003cspan class=\"nc\"\u003e.container-login\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003e@extend\u003c/span\u003e \u003cspan class=\"nc\"\u003e.container-fluid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003emax-width\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e576px\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003epadding\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e2rem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「ログインしました」などのフラッシュ用スタイル\u003c/span\u003e\n\n\u003cspan class=\"nc\"\u003e.alert-notice\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003e@extend\u003c/span\u003e \u003cspan class=\"nc\"\u003e.alert-info\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"nc\"\u003e.alert-alert\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003e@extend\u003c/span\u003e \u003cspan class=\"nc\"\u003e.alert-danger\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"applicationjsに３つ追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#applicationjs%E3%81%AB%EF%BC%93%E3%81%A4%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eapplication.jsに３つ追加\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/assets/javascripts/application.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e//= require jquery3\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//= require popper\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//= require bootstrap-sprockets\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"deviseの導入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#devise%E3%81%AE%E5%B0%8E%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDeviseの導入\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eDevise\u003c/code\u003eをインストール（userの箇所は，任意のモデル名でOKです）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ rails g devise:install\n$ rails g devise user\n$ rails db:create db:migrate\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e問題がなければ，\u003ccode\u003e$ rails s\u003c/code\u003eの後，\u003ccode\u003ehttp://localhost:3000\u003c/code\u003eからログインボタンを押せば，ログイン画面が表示されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fdd512864-c4ee-b2e8-b1ca-6b877cc8562e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c5fe6d2a81422949f78fddbedd125e75\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fdd512864-c4ee-b2e8-b1ca-6b877cc8562e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c5fe6d2a81422949f78fddbedd125e75\" alt=\"スクリーンショット 2020-11-16 15.19.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/dd512864-c4ee-b2e8-b1ca-6b877cc8562e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fdd512864-c4ee-b2e8-b1ca-6b877cc8562e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=50f77bd3c1d886ca94d161ac9fb9a268 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"deviseの日本語化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#devise%E3%81%AE%E6%97%A5%E6%9C%AC%E8%AA%9E%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDeviseの日本語化\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003econfig/application.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003emodule\u003c/span\u003e \u003cspan class=\"nn\"\u003eAssociationTutorial\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eApplication\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eRails\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eApplication\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# 以下を追加すれば日本語に\u003c/span\u003e\n    \u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ei18n\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edefault_locale\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ja\u003c/span\u003e \n    \u003cspan class=\"c1\"\u003e# タイムゾーンも変更するなら，以下を追加\u003c/span\u003e\n    \u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etime_zone\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'Asia/Tokyo'\u003c/span\u003e   \n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eサーバーを落として\u003ccode\u003e$ rails s\u003c/code\u003e\u003cbr\u003e\nで再起動すれば日本語に変更されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F23554109-48a5-ccd8-d5ae-920455fb038e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=05ab34e9e72ccf8e0c64d2320be04619\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F23554109-48a5-ccd8-d5ae-920455fb038e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=05ab34e9e72ccf8e0c64d2320be04619\" alt=\"スクリーンショット 2020-11-16 15.28.53.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/23554109-48a5-ccd8-d5ae-920455fb038e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F23554109-48a5-ccd8-d5ae-920455fb038e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8010294cc474d7873f6dd55fd44460bf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"日本語訳を変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3%E3%82%92%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e日本語訳を変更\u003c/h2\u003e\n\n\u003cp\u003e日本語訳を変更したい場合は，次のコマンドでconfig/locales/devise.views.ja.ymlを作成し，編集すればOKです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ rails g devise:i18n:locale ja\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e例えばアカウント登録を新規登録に変更したい場合は，config/locals/devise.views.ja.ymlの該当文字を置換すればOKです。\u003c/p\u003e\n\n\u003cp\u003eパスワードを忘れましたか?も違和感がありますので，パスワードの再設定に置換するのがよいと思います\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ログイン画面などの変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E7%94%BB%E9%9D%A2%E3%81%AA%E3%81%A9%E3%81%AE%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eログイン画面などの変更\u003c/h2\u003e\n\n\u003cp\u003eまず，次のコマンドでビューファイルを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e$ rails g devise:i18n:views\n$ rails g devise:views:bootstrap_templates -f\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e【参考】それぞれのコマンドの最後に例えばuserをつけることで，usersディレクトリ内にファイルを作成することもできますが，その場合は，次の3つの作業を行わないと反映されません。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003edevise.views.ja.yml\u003c/code\u003e30行目の\u003ccode\u003edevise\u003c/code\u003eを\u003ccode\u003eusers\u003c/code\u003eに変更\u003cbr\u003e\n\u003ccode\u003econfig/initializers/devise.rbにあるconfig.scoped_views = false\u003c/code\u003eのコメントアウトを外して\u003ccode\u003etrue\u003c/code\u003eに変更\u003cbr\u003e\nサーバーを落として\u003ccode\u003e$ rails s\u003c/code\u003eで再起動\u003c/p\u003e\n\n\u003cp\u003eお好みで変えていく\u003cbr\u003e\n例えば\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;div class=\"container-login\"\u0026gt;\n  # 元のプログラム\n\u0026lt;/div\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fb18e1cd9-4812-ecd1-dce6-95976cb542f3.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d6cbb801ed1ae134f813d82baa533274\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fb18e1cd9-4812-ecd1-dce6-95976cb542f3.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d6cbb801ed1ae134f813d82baa533274\" alt=\"スクリーンショット 2020-11-17 21.05.45.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/b18e1cd9-4812-ecd1-dce6-95976cb542f3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fb18e1cd9-4812-ecd1-dce6-95976cb542f3.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=900c669ace24c60c87de8d4c079d565e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"エラーメッセージの変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eエラーメッセージの変更\u003c/h2\u003e\n\n\u003cp\u003eエラーメッセージの表示がいまいちなので変更するためにオーバーライドします。\u003cbr\u003e\n\u003ccode\u003eapp/helpers/devise_helper.rb\u003c/code\u003eファイルを作成し、以下を記述。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/helpers/devise_helper.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003emodule\u003c/span\u003e \u003cspan class=\"nn\"\u003eDeviseHelper\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ebootstrap_devise_error_messages!\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eempty?\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003ehtml\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efull_messages\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_message\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003ehtml\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;-\u003c/span\u003e\u003cspan class=\"no\"\u003eEOF\u003c/span\u003e\u003cspan class=\"sh\"\u003e\n      \u0026lt;div class=\"alert alert-danger alert-dismissible\" role=\"alert\"\u0026gt;\n        \u0026lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"\u0026gt;\n          \u0026lt;span aria-hidden=\"true\"\u0026gt;\u0026amp;times;\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\"sr-only\"\u0026gt;close\u0026lt;/span\u0026gt;\n        \u0026lt;/button\u0026gt;\n        \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003eerror_message\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"sh\"\u003e\n      \u0026lt;/div\u0026gt;\n\u003c/span\u003e\u003cspan class=\"no\"\u003e      EOF\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehtml\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml_safe\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Feee35f4e-f827-84e7-3cda-465cd30c9fb1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=16183d95d96bc05c03b7682960907343\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Feee35f4e-f827-84e7-3cda-465cd30c9fb1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=16183d95d96bc05c03b7682960907343\" alt=\"スクリーンショット 2020-11-17 21.16.46.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/eee35f4e-f827-84e7-3cda-465cd30c9fb1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Feee35f4e-f827-84e7-3cda-465cd30c9fb1.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5b34a76930de4dc7bd6a57933e37480e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ログイン画面にもエラーメッセージを追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E7%94%BB%E9%9D%A2%E3%81%AB%E3%82%82%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eログイン画面にもエラーメッセージを追加\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/devise/sessions/new.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e \u0026lt;div class=\"container-login\"\u0026gt;\n   \u0026lt;h1\u0026gt;\u0026lt;%= t('.sign_in') %\u0026gt;\u0026lt;/h1\u0026gt;\n   \u0026lt;%= render 'shared/flash_messages' %\u0026gt;    //追加\n\n   \u0026lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eapp/views/devise\u003c/code\u003eディレクトリ内のファイルの\u003ccode\u003ebtn btn-primary\u003c/code\u003eを\u003ccode\u003ebtn btn-primary btn-block\u003c/code\u003eに置換すればボタンの横幅が自然になります。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F33c11bf6-9e59-f8fe-5a88-c1c783fec992.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=65c0ffc1d5225cbf46d6ff5220ccd212\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F33c11bf6-9e59-f8fe-5a88-c1c783fec992.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=65c0ffc1d5225cbf46d6ff5220ccd212\" alt=\"スクリーンショット 2020-11-17 21.21.35.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/33c11bf6-9e59-f8fe-5a88-c1c783fec992.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F33c11bf6-9e59-f8fe-5a88-c1c783fec992.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ba0212fb8d9096dc9b134586f315f30d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"バリデーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%90%E3%83%AA%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eバリデーション\u003c/h2\u003e\n\n\u003cp\u003eバリデーションはフロント側にも簡単に入れられます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003ef.email_field，f.password_field\u003c/code\u003eに\u003ccode\u003erequired: true\u003c/code\u003eを入れることで空欄投稿できなくなります。\u003c/li\u003e\n\u003cli\u003e新規登録（アカウント登録）画面では，例えば，\u003ccode\u003ef.password_field\u003c/code\u003eに\u003ccode\u003erequired: true, minlength: @minimum_password_length, maxlength: '30'\u003c/code\u003eを追加すれば，文字数のバリデーションを追加できます。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/devise/registrations/new.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e \u0026lt;div class=\"form-group\"\u0026gt;\n       \u0026lt;%= f.label :password %\u0026gt;\n-      \u0026lt;%= f.password_field :password, autocomplete: 'current-password',\n-                                      class: 'form-control' %\u0026gt;\n+      \u0026lt;%= f.password_field :password, autocomplete: 'current-password',\n+                                      class: 'form-control',\n+                                      required: true,\n+                                      minlength: @minimum_password_length,\n+                                      maxlength: '30' %\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fa6992649-7fc0-0b6d-da76-b4c14ae8d494.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=729e0dcdaef7ab5b0aacd87a4c263c6e\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fa6992649-7fc0-0b6d-da76-b4c14ae8d494.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=729e0dcdaef7ab5b0aacd87a4c263c6e\" alt=\"スクリーンショット 2020-11-17 21.33.29.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/a6992649-7fc0-0b6d-da76-b4c14ae8d494.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2Fa6992649-7fc0-0b6d-da76-b4c14ae8d494.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=97a4940b84aec2315390f8fbc20f536d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e_links.html.erb\u003c/code\u003eを編集して，一番下のリンクをボタンにしてみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;hr class=\"border-dark my-5\"\u0026gt;\n\u0026lt;div class=\"form-group\"\u0026gt;\n  \u0026lt;%- if controller_name != 'sessions' %\u0026gt;\n    \u0026lt;%= link_to t(\".sign_in\"), new_session_path(resource_name), class: 'btn btn-info btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.registerable? \u0026amp;\u0026amp; controller_name != 'registrations' %\u0026gt;\n    \u0026lt;%= link_to t(\".sign_up\"), new_registration_path(resource_name), class: 'btn btn-info btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.recoverable? \u0026amp;\u0026amp; controller_name != 'passwords' \u0026amp;\u0026amp; controller_name != 'registrations' %\u0026gt;\n    \u0026lt;%= link_to t(\".forgot_your_password\"), new_password_path(resource_name), class: 'btn btn-secondary btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.confirmable? \u0026amp;\u0026amp; controller_name != 'confirmations' %\u0026gt;\n    \u0026lt;%= link_to t('.didn_t_receive_confirmation_instructions'), new_confirmation_path(resource_name), class: 'btn btn-secondary btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.lockable? \u0026amp;\u0026amp; resource_class.unlock_strategy_enabled?(:email) \u0026amp;\u0026amp; controller_name != 'unlocks' %\u0026gt;\n    \u0026lt;%= link_to t('.didn_t_receive_unlock_instructions'), new_unlock_path(resource_name), class: 'btn btn-secondary btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.omniauthable? %\u0026gt;\n    \u0026lt;%- resource_class.omniauth_providers.each do |provider| %\u0026gt;\n      \u0026lt;%= link_to t('.sign_in_with_provider', provider: OmniAuth::Utils.camelize(provider)), omniauth_authorize_path(resource_name, provider), class: 'btn btn-info btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n    \u0026lt;% end -%\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F4ead8d0a-6e65-75e2-9529-be259698393f.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8e076bcf2d86fedf13a579d3e6d2cbd0\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F4ead8d0a-6e65-75e2-9529-be259698393f.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8e076bcf2d86fedf13a579d3e6d2cbd0\" alt=\"スクリーンショット 2020-11-17 21.37.44.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/4ead8d0a-6e65-75e2-9529-be259698393f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F4ead8d0a-6e65-75e2-9529-be259698393f.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6091e2fca1f4a97b6875ed3a08693659 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eさらに，リンクのログイン，新規登録（アカウント登録）を次のように変更してみます\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e# 上２つを次に置き換え\n\n  \u0026lt;%- if controller_name != 'sessions' %\u0026gt;\n    \u0026lt;%= link_to \"アカウントをお持ちの方\", new_session_path(resource_name), class: 'btn btn-info btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\n  \u0026lt;%- if devise_mapping.registerable? \u0026amp;\u0026amp; controller_name != 'registrations' %\u0026gt;\n    \u0026lt;%= link_to \"アカウントをお持ちでない方\", new_registration_path(resource_name), class: 'btn btn-info btn-block' %\u0026gt;\u0026lt;br /\u0026gt;\n  \u0026lt;% end -%\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html+erb\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/views/devise/registrations/edit.html.erb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026lt;!-- ここから --\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;%= t('.unhappy') %\u0026gt;\n    ? \u0026lt;%= link_to t('.cancel_my_account'), registration_path(resource_name), data: {confirm: t('.are_you_sure')}, method: :delete %\u0026gt;\n    .\u0026lt;/p\u0026gt;\n\n  \u0026lt;%= link_to t('.back'), :back %\u0026gt;\n\u0026lt;!-- ここまでを次に置き換える --\u0026gt;\n\n  \u0026lt;hr class=\"devise-link my-5\"\u0026gt;\n  \u0026lt;div class=\"form-group\"\u0026gt;\n    \u0026lt;%= link_to \"トップページ\", root_path, class: 'btn btn-info btn-block mb-4' %\u0026gt;\n    \u0026lt;%= link_to t('.cancel_my_account'), registration_path(resource_name), data: {confirm: t('.are_you_sure')}, method: :delete, class: 'btn btn-danger btn-block' %\u0026gt;\n  \u0026lt;/div\u0026gt;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F14b66ed3-4061-49b9-7e3f-d8cfdae3c8cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b1cf05c598a754f4d28f02a9c30e0777\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F14b66ed3-4061-49b9-7e3f-d8cfdae3c8cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b1cf05c598a754f4d28f02a9c30e0777\" alt=\"スクリーンショット 2020-11-17 21.47.19.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/14b66ed3-4061-49b9-7e3f-d8cfdae3c8cf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F752006%2F14b66ed3-4061-49b9-7e3f-d8cfdae3c8cf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f6b3ec32b177496e5a0878e9bbde258a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれで一応単純なスタイルは完成です。\u003cbr\u003e\nもし間違っているところがあればご教授いただけると幸いです。\u003c/p\u003e\n",
    "body": "# はじめに\n今回はDeviseを使ってログイン機能を作成していきます。\nまたDeviseの日本語化やBootstrap4の適用までを行っていきます。\n\n\n# 準備\n\n```\n$ rails new devise-sample \n$ rails g controller homes index\n```\n```config/routes.rb\nRails.application.routes.draw do\n  root 'homes#index'\nend\n```\n\n## ナビバーを追加し，レスポンシブ対応のためのmetaタグを追加\n```app/views/layouts/application.html.erb\n (略)\n     \u003c%= csrf_meta_tags %\u003e\n     \u003c%= csp_meta_tag %\u003e\n     \u003cmeta name=\"viewport\" content=\"width=device-width,initial-scale=1\"\u003e　　//追加\n (略)\n  \u003cbody\u003e\n     \u003c%= render 'shared/header' %\u003e     //追加\n     \u003c%= yield %\u003e\n   \u003c/body\u003e\n```\n\n```app/views/homes/index.html.erb\n\u003c%= render 'shared/flash_messages' %\u003e\n```\n\n### 新しくsharedフォルダと各renderファイルを作成\n\n```app/views/shared/flash_messages.html.erb\n\u003c% flash.each do |msg_type, msg| %\u003e\n  \u003cdiv class=\"alert alert-\u003c%= msg_type %\u003e\" role=\"alert\" id=\"alert\"\u003e\n    \u003ca href=\"#\" class=\"close\" data-dismiss=\"alert\"\u003e×\u003c/a\u003e\n    \u003c%= msg %\u003e\n  \u003c/div\u003e\n\u003c% end %\u003e\n```\n\n ```app/views/shared/_header.html.erb\n\u003cheader\u003e\n  \u003cnav class=\"navbar navbar-expand navbar-light\"\u003e\n    \u003c%= link_to \"Deviseサンプル\", root_path, class: 'navbar-brand' %\u003e\n    \u003cdiv id=\"Navber\"\u003e\n      \u003cul class=\"navbar-nav\"\u003e\n        \u003c% if user_signed_in? %\u003e\n          \u003cli class=\"nav-item active\"\u003e\n            \u003c%= link_to 'アカウント編集', edit_user_registration_path, class: 'nav-link' %\u003e\n          \u003c/li\u003e\n          \u003cli class=\"nav-item active\"\u003e\n            \u003c%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: 'nav-link' %\u003e\n          \u003c/li\u003e\n      \u003c% else %\u003e\n          \u003cli class=\"nav-item active\"\u003e\n            \u003c%= link_to \"新規登録\", new_user_registration_path, class: 'nav-link' %\u003e\n          \u003c/li\u003e\n          \u003cli class=\"nav-item active\"\u003e\n            \u003c%= link_to \"ログイン\", new_user_session_path, class: 'nav-link' %\u003e\n          \u003c/li\u003e\n        \u003c% end %\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  \u003c/nav\u003e\n\u003c/header\u003e\n```\n\n## Gemの追加\n\nGemfileに以下を追加して`$ bundle install`\n\n```Gemfile\n# ログイン機能に必要なGem\ngem 'devise'\n\n# 日本語化に必要なGem\ngem 'rails-i18n', '~\u003e 5.1'\ngem 'devise-i18n'\n\n# Bootstrapに必要なGem\ngem 'bootstrap', '~\u003e 4.4.1'\ngem 'jquery-rails'\ngem 'devise-bootstrap-views', '~\u003e 1.0'\n```\n```\n$ bundle install\n```\n\n##Bootstrapの導入\n\n* `application.css`の拡張子を`scss`に変更\n\n* `application.scss`から，`*= require_tree .`と`*= require_self`を削除\n\n* `application.scss`に`@import \"bootstrap\";`を追加\n\n* スタイルも追加\n\n```app/assets/stylesheets/application.scss\n@import \"bootstrap\";\n\n// ログイン画面\n\n.container-login {\n  @extend .container-fluid;\n  max-width: 576px;\n  padding: 2rem;\n}\n\n// 「ログインしました」などのフラッシュ用スタイル\n\n.alert-notice {\n  @extend .alert-info;\n}\n\n.alert-alert {\n  @extend .alert-danger;\n}\n```\n\n###application.jsに３つ追加\n\n```app/assets/javascripts/application.js\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\n```\n\n##Deviseの導入\n`Devise`をインストール（userの箇所は，任意のモデル名でOKです）\n\n```\n$ rails g devise:install\n$ rails g devise user\n$ rails db:create db:migrate\n```\n\n問題がなければ，`$ rails s`の後，`http://localhost:3000`からログインボタンを押せば，ログイン画面が表示されます。\n\n![スクリーンショット 2020-11-16 15.19.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/dd512864-c4ee-b2e8-b1ca-6b877cc8562e.png)\n\n##Deviseの日本語化\n```config/application.rb\nmodule AssociationTutorial\n  class Application \u003c Rails::Application\n    # 以下を追加すれば日本語に\n    config.i18n.default_locale = :ja \n    # タイムゾーンも変更するなら，以下を追加\n    config.time_zone = 'Asia/Tokyo'   \n  end\nend\n```\n\nサーバーを落として`$ rails s`\nで再起動すれば日本語に変更されます。\n\n![スクリーンショット 2020-11-16 15.28.53.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/23554109-48a5-ccd8-d5ae-920455fb038e.png)\n\n\n## 日本語訳を変更\n日本語訳を変更したい場合は，次のコマンドでconfig/locales/devise.views.ja.ymlを作成し，編集すればOKです。\n\n\n```\n$ rails g devise:i18n:locale ja\n```\n\n例えばアカウント登録を新規登録に変更したい場合は，config/locals/devise.views.ja.ymlの該当文字を置換すればOKです。\n\nパスワードを忘れましたか?も違和感がありますので，パスワードの再設定に置換するのがよいと思います\n\n\n##ログイン画面などの変更\nまず，次のコマンドでビューファイルを作成します。\n\n```\n$ rails g devise:i18n:views\n$ rails g devise:views:bootstrap_templates -f\n```\n\n【参考】それぞれのコマンドの最後に例えばuserをつけることで，usersディレクトリ内にファイルを作成することもできますが，その場合は，次の3つの作業を行わないと反映されません。\n\n`devise.views.ja.yml`30行目の`devise`を`users`に変更\n`config/initializers/devise.rbにあるconfig.scoped_views = false`のコメントアウトを外して`true`に変更\nサーバーを落として`$ rails s`で再起動\n\n\nお好みで変えていく\n例えば\n\n```\n\u003cdiv class=\"container-login\"\u003e\n  # 元のプログラム\n\u003c/div\u003e\n```\n![スクリーンショット 2020-11-17 21.05.45.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/b18e1cd9-4812-ecd1-dce6-95976cb542f3.png)\n\n##エラーメッセージの変更\nエラーメッセージの表示がいまいちなので変更するためにオーバーライドします。\n`app/helpers/devise_helper.rb`ファイルを作成し、以下を記述。\n\n```app/helpers/devise_helper.rb\nmodule DeviseHelper\n  def bootstrap_devise_error_messages!\n    return \"\" if resource.errors.empty?\n\n    html = \"\"\n    resource.errors.full_messages.each do |error_message|\n      html += \u003c\u003c-EOF\n      \u003cdiv class=\"alert alert-danger alert-dismissible\" role=\"alert\"\u003e\n        \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"alert\"\u003e\n          \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n          \u003cspan class=\"sr-only\"\u003eclose\u003c/span\u003e\n        \u003c/button\u003e\n        #{error_message}\n      \u003c/div\u003e\n      EOF\n    end\n    html.html_safe\n  end\nend\n```\n\n![スクリーンショット 2020-11-17 21.16.46.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/eee35f4e-f827-84e7-3cda-465cd30c9fb1.png)\n\n###ログイン画面にもエラーメッセージを追加\n\n```app/views/devise/sessions/new.html.erb\n \u003cdiv class=\"container-login\"\u003e\n   \u003ch1\u003e\u003c%= t('.sign_in') %\u003e\u003c/h1\u003e\n   \u003c%= render 'shared/flash_messages' %\u003e    //追加\n\n   \u003c%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %\u003e\n```\n\n* `app/views/devise`ディレクトリ内のファイルの`btn btn-primary`を`btn btn-primary btn-block`に置換すればボタンの横幅が自然になります。\n\n\n![スクリーンショット 2020-11-17 21.21.35.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/33c11bf6-9e59-f8fe-5a88-c1c783fec992.png)\n\n##バリデーション\nバリデーションはフロント側にも簡単に入れられます。\n\n* `f.email_field，f.password_field`に`required: true`を入れることで空欄投稿できなくなります。\n* 新規登録（アカウント登録）画面では，例えば，`f.password_field`に`required: true, minlength: @minimum_password_length, maxlength: '30'`を追加すれば，文字数のバリデーションを追加できます。\n\n\n```app/views/devise/registrations/new.html.erb\n \u003cdiv class=\"form-group\"\u003e\n       \u003c%= f.label :password %\u003e\n-      \u003c%= f.password_field :password, autocomplete: 'current-password',\n-                                      class: 'form-control' %\u003e\n+      \u003c%= f.password_field :password, autocomplete: 'current-password',\n+                                      class: 'form-control',\n+                                      required: true,\n+                                      minlength: @minimum_password_length,\n+                                      maxlength: '30' %\u003e\n```\n\n![スクリーンショット 2020-11-17 21.33.29.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/a6992649-7fc0-0b6d-da76-b4c14ae8d494.png)\n\n`_links.html.erb`を編集して，一番下のリンクをボタンにしてみます。\n\n```\n\u003chr class=\"border-dark my-5\"\u003e\n\u003cdiv class=\"form-group\"\u003e\n  \u003c%- if controller_name != 'sessions' %\u003e\n    \u003c%= link_to t(\".sign_in\"), new_session_path(resource_name), class: 'btn btn-info btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.registerable? \u0026\u0026 controller_name != 'registrations' %\u003e\n    \u003c%= link_to t(\".sign_up\"), new_registration_path(resource_name), class: 'btn btn-info btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.recoverable? \u0026\u0026 controller_name != 'passwords' \u0026\u0026 controller_name != 'registrations' %\u003e\n    \u003c%= link_to t(\".forgot_your_password\"), new_password_path(resource_name), class: 'btn btn-secondary btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.confirmable? \u0026\u0026 controller_name != 'confirmations' %\u003e\n    \u003c%= link_to t('.didn_t_receive_confirmation_instructions'), new_confirmation_path(resource_name), class: 'btn btn-secondary btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.lockable? \u0026\u0026 resource_class.unlock_strategy_enabled?(:email) \u0026\u0026 controller_name != 'unlocks' %\u003e\n    \u003c%= link_to t('.didn_t_receive_unlock_instructions'), new_unlock_path(resource_name), class: 'btn btn-secondary btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.omniauthable? %\u003e\n    \u003c%- resource_class.omniauth_providers.each do |provider| %\u003e\n      \u003c%= link_to t('.sign_in_with_provider', provider: OmniAuth::Utils.camelize(provider)), omniauth_authorize_path(resource_name, provider), class: 'btn btn-info btn-block' %\u003e\u003cbr /\u003e\n    \u003c% end -%\u003e\n  \u003c% end -%\u003e\n\u003c/div\u003e\n```\n![スクリーンショット 2020-11-17 21.37.44.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/4ead8d0a-6e65-75e2-9529-be259698393f.png)\n\nさらに，リンクのログイン，新規登録（アカウント登録）を次のように変更してみます\n\n```\n# 上２つを次に置き換え\n\n  \u003c%- if controller_name != 'sessions' %\u003e\n    \u003c%= link_to \"アカウントをお持ちの方\", new_session_path(resource_name), class: 'btn btn-info btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n\n  \u003c%- if devise_mapping.registerable? \u0026\u0026 controller_name != 'registrations' %\u003e\n    \u003c%= link_to \"アカウントをお持ちでない方\", new_registration_path(resource_name), class: 'btn btn-info btn-block' %\u003e\u003cbr /\u003e\n  \u003c% end -%\u003e\n```\n\n```app/views/devise/registrations/edit.html.erb\n\u003c!-- ここから --\u003e\n  \u003cp\u003e\u003c%= t('.unhappy') %\u003e\n    ? \u003c%= link_to t('.cancel_my_account'), registration_path(resource_name), data: {confirm: t('.are_you_sure')}, method: :delete %\u003e\n    .\u003c/p\u003e\n\n  \u003c%= link_to t('.back'), :back %\u003e\n\u003c!-- ここまでを次に置き換える --\u003e\n\n  \u003chr class=\"devise-link my-5\"\u003e\n  \u003cdiv class=\"form-group\"\u003e\n    \u003c%= link_to \"トップページ\", root_path, class: 'btn btn-info btn-block mb-4' %\u003e\n    \u003c%= link_to t('.cancel_my_account'), registration_path(resource_name), data: {confirm: t('.are_you_sure')}, method: :delete, class: 'btn btn-danger btn-block' %\u003e\n  \u003c/div\u003e\n```\n![スクリーンショット 2020-11-17 21.47.19.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/752006/14b66ed3-4061-49b9-7e3f-d8cfdae3c8cf.png)\n\nこれで一応単純なスタイルは完成です。\nもし間違っているところがあればご教授いただけると幸いです。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:50:48+09:00",
    "group": null,
    "id": "6adb01cf09dce7b6870f",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Rails",
        "versions": []
      },
      {
        "name": "devise",
        "versions": []
      }
    ],
    "title": "Deviseでログイン機能",
    "updated_at": "2020-11-17T21:50:48+09:00",
    "url": "https://qiita.com/mat827/items/6adb01cf09dce7b6870f",
    "user": {
      "description": "某プログラミングスクールに通っていました。現在は転職活動中です。 学んだことやプロダクトをアウトプットしていきます。 よろしくお願いします！",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 1,
      "github_login_name": "mat827",
      "id": "mat827",
      "items_count": 32,
      "linkedin_id": "",
      "location": "",
      "name": "Mst",
      "organization": "",
      "permanent_id": 752006,
      "profile_image_url": "https://avatars1.githubusercontent.com/u/62657297?v=4",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003eこちらの記事は以下の書籍を参考にアウトプットとして執筆しました。\u003cbr\u003e\n\u003ca href=\"https://www.amazon.co.jp/gp/product/B0787YH4L2/ref=ppx_yo_dt_b_d_asin_title_o00?ie=UTF8\u0026amp;psc=1\" rel=\"nofollow noopener\" target=\"_blank\"\u003e新・明解C++入門\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eとりあえず1章ずつ記事にしていく方向で行こうと思います。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"処理系\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%87%A6%E7%90%86%E7%B3%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e処理系\u003c/h3\u003e\n\n\u003cp\u003eC++プログラム開発に必要なソフトウェア\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eMicrosoft zVisual c++\u003c/li\u003e\n\u003cli\u003eGNU C++\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eなど\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"std名前空間の利用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#std%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%81%AE%E5%88%A9%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003estd名前空間の利用\u003c/h3\u003e\n\n\u003cp\u003estd名前空間の利用しないで\u003ccode\u003ecout\u003c/code\u003eを使用する場合、\u003ccode\u003estd::cout\u003c/code\u003eとする必要がある。\u003cbr\u003e\nいまは呪文として落とし込んでおく。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"整数接尾語\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%95%B4%E6%95%B0%E6%8E%A5%E5%B0%BE%E8%AA%9E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e整数接尾語\u003c/h3\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003c/th\u003e\n\u003cth\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eu,U\u003c/td\u003e\n\u003ctd\u003eその整数定数が符号なしである\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003el,L\u003c/td\u003e\n\u003ctd\u003eその整数定数がlongである\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例\u003c/h4\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e1000→int型で表現できる→int型\n60000→int型で表現できないがlong型で表現可能→long型\n60000U→unsigned型で表現可能→unsigned型\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"文字列の読込\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E8%AA%AD%E8%BE%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e文字列の読込\u003c/h3\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003c/th\u003e\n\u003cth\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ecin\u003c/td\u003e\n\u003ctd\u003eスペースを含まない\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003egetline(cin,変数名)\u003c/td\u003e\n\u003ctd\u003eスペースを含む\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"bool\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bool\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ebool\u003c/h3\u003e\n\n\u003cp\u003eboolalpha操作子を使うと真偽値をアルファベットで表示\u003cbr\u003e\nnoboolalphaで数値で表示\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eboolalpha\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003enoboolalpha\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"浮動小数点型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e浮動小数点型\u003c/h3\u003e\n\n\u003cp\u003e小数点以下を持つ実数のことで型は\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003efloat\u003c/li\u003e\n\u003cli\u003edouble\u003c/li\u003e\n\u003cli\u003elong double\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eの3つがある\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"浮動小数点リテラル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E3%83%AA%E3%83%86%E3%83%A9%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e浮動小数点リテラル\u003c/h4\u003e\n\n\u003cp\u003e3.14などの実数を表す定数\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"浮動小数点接尾語\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%8E%A5%E5%B0%BE%E8%AA%9E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e浮動小数点接尾語\u003c/h4\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e接尾語\u003c/th\u003e\n\u003cth\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ef,F\u003c/td\u003e\n\u003ctd\u003efloat型\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003el,L\u003c/td\u003e\n\u003ctd\u003elong double型\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e接尾語がない\u003c/td\u003e\n\u003ctd\u003edouble型\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"演算と型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BC%94%E7%AE%97%E3%81%A8%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e演算と型\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eint型+int型=int型\ndouble型+double型=double型\nint型+double型=double型\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eint型とdouble型混同では\u003cstrong\u003e暗黙の型変換\u003c/strong\u003eが起きている\u003cbr\u003e\n整数と浮動小数点の型変換には静的キャストが適している。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"列挙体\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%97%E6%8C%99%E4%BD%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e列挙体\u003c/h3\u003e\n\n\u003cp\u003e整数値の集まり\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"配列\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"定値オブジェクト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%80%A4%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定値オブジェクト\u003c/h3\u003e\n\n\u003cp\u003e配列の宣言時に大きさをconstが使えるということ\u003c/p\u003e\n",
    "body": "こちらの記事は以下の書籍を参考にアウトプットとして執筆しました。\n[新・明解C++入門](https://www.amazon.co.jp/gp/product/B0787YH4L2/ref=ppx_yo_dt_b_d_asin_title_o00?ie=UTF8\u0026psc=1)\n\nとりあえず1章ずつ記事にしていく方向で行こうと思います。\n\n\n###処理系\nC++プログラム開発に必要なソフトウェア\n\n- Microsoft zVisual c++\n- GNU C++\n\nなど\n\n###std名前空間の利用\nstd名前空間の利用しないで`cout`を使用する場合、`std::cout`とする必要がある。\nいまは呪文として落とし込んでおく。\n\n###整数接尾語\n||説明|\n|---|---|\n|u,U|その整数定数が符号なしである|\n|l,L|その整数定数がlongである|\n\n####例\n\n```\n1000→int型で表現できる→int型\n60000→int型で表現できないがlong型で表現可能→long型\n60000U→unsigned型で表現可能→unsigned型\n```\n\n\n###文字列の読込\n\n||説明|\n|---|---|\n|cin|スペースを含まない|\n|getline(cin,変数名)|スペースを含む|\n###bool\nboolalpha操作子を使うと真偽値をアルファベットで表示\nnoboolalphaで数値で表示\n\n```c++\ncout \u003c\u003c boolalpha;\ncout \u003c\u003c noboolalpha;\n```\n###浮動小数点型\n小数点以下を持つ実数のことで型は\n\n- float\n- double\n- long double\n\nの3つがある\n\n####浮動小数点リテラル\n3.14などの実数を表す定数\n####浮動小数点接尾語\n|接尾語|説明|\n|---|---|\n|f,F|float型|\n|l,L|long double型|\n|接尾語がない|double型|\n\n###演算と型\n```\nint型+int型=int型\ndouble型+double型=double型\nint型+double型=double型\n```\nint型とdouble型混同では**暗黙の型変換**が起きている\n整数と浮動小数点の型変換には静的キャストが適している。\n\n###列挙体\n整数値の集まり\n\n##配列\n###定値オブジェクト\n配列の宣言時に大きさをconstが使えるということ\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:47:47+09:00",
    "group": null,
    "id": "6013f0f3746053ed6890",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "C++",
        "versions": []
      }
    ],
    "title": "C++入門 私的まとめ",
    "updated_at": "2020-11-17T21:47:47+09:00",
    "url": "https://qiita.com/yktk435/items/6013f0f3746053ed6890",
    "user": {
      "description": "ラズパイ、IoT、chrome拡張機能開発などなど",
      "facebook_id": "",
      "followees_count": 1,
      "followers_count": 3,
      "github_login_name": "yktk435",
      "id": "yktk435",
      "items_count": 152,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 136271,
      "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/136271/profile-images/1586330549",
      "team_only": false,
      "twitter_screen_name": "manhat_gold",
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\u003cp\u003e皆さんSytemVerilogでエディタのタグジャンプ用のTAGSを作るのはどのようにしているでしょうか? ctagsに正規表現でTAGのルールを定義したファイルを食わせて生成している方がほとんどではないでしょうか。Qiitaですと\u003ca href=\"https://qiita.com/tethys_seesaa/items/6c2622d6e63607633493\" id=\"reference-0c599f3d023ea5cc1457\"\u003eここ\u003c/a\u003eに方法が書いてあります。WEB検索すると、SytemVerilogのTAGS生成方法でヒットするのはほとんどがこの方法です。\u003c/p\u003e\n\n\u003cp\u003eただ、この方法はワンラインの正規表現での定義なので構文解析に限界があります。目立つところでは\u003ccode\u003ebit a, b;\u003c/code\u003eのように一行に複数の変数が宣言された場合に対応できない、/*と*/ではさまれたコメントが複数行にわたる場合、そこもctagsに解釈されてしまうなどの問題があります。\u003c/p\u003e\n\n\u003cp\u003egithubにはuniversal-ctagsというツールが登録されています。これはツールネイティブでSystemVerilogに対応しており、前記のctagsよりもはるかに多くの書式に対応しています。とても高機能なのに、SytemVerilogのTAGS生成ツールとしてはなぜかほとんど紹介されていないようです。現在でも活発にSystemVerilogへのサポートが拡充されていますので、是非皆さん使ってみてください。\u003c/p\u003e\n\n\u003cp\u003eレポジトリは以下になります。\u003cbr\u003e\n\u003ca href=\"https://github.com/universal-ctags/ctags\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/universal-ctags/ctags\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コンパイルとインストールの方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%A8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AE%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンパイルとインストールの方法\u003c/h1\u003e\n\n\u003cp\u003e特にstable releaseとかなさそうなので、HEADをコンパイルしてしまいましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u0026gt; git clone  https://github.com/universal-ctags/ctags\n\u0026gt; cd ctags\n\u0026gt; ./autogen.sh\n\u0026gt; ./configure --program-prefix=ex --prefix=$HOME/local #インストール先を$HOME/localに設定\n\u0026gt; make\n\u0026gt; make install\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"unversal-ctagsの使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unversal-ctags%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eunversal-ctagsの使い方\u003c/h1\u003e\n\n\u003cp\u003e上記の方法でインストールすると、~/local/binにexctagsというファイルができています。使用方法はctagsと全く同じです。TAGSを作りたいソースツリーの根本まで行き、vimの場合\u003ccode\u003eexctags -R\u003c/code\u003e emacsの場合\u003ccode\u003eexctags -Re\u003c/code\u003eとなります。\u003c/p\u003e\n",
    "body": "皆さんSytemVerilogでエディタのタグジャンプ用のTAGSを作るのはどのようにしているでしょうか? ctagsに正規表現でTAGのルールを定義したファイルを食わせて生成している方がほとんどではないでしょうか。Qiitaですと[ここ](https://qiita.com/tethys_seesaa/items/6c2622d6e63607633493)に方法が書いてあります。WEB検索すると、SytemVerilogのTAGS生成方法でヒットするのはほとんどがこの方法です。\n\nただ、この方法はワンラインの正規表現での定義なので構文解析に限界があります。目立つところでは`bit a, b;`のように一行に複数の変数が宣言された場合に対応できない、/\\*と\\*/ではさまれたコメントが複数行にわたる場合、そこもctagsに解釈されてしまうなどの問題があります。\n\ngithubにはuniversal-ctagsというツールが登録されています。これはツールネイティブでSystemVerilogに対応しており、前記のctagsよりもはるかに多くの書式に対応しています。とても高機能なのに、SytemVerilogのTAGS生成ツールとしてはなぜかほとんど紹介されていないようです。現在でも活発にSystemVerilogへのサポートが拡充されていますので、是非皆さん使ってみてください。\n\nレポジトリは以下になります。\nhttps://github.com/universal-ctags/ctags\n\n# コンパイルとインストールの方法\n\n特にstable releaseとかなさそうなので、HEADをコンパイルしてしまいましょう。\n\n```\n\u003e git clone  https://github.com/universal-ctags/ctags\n\u003e cd ctags\n\u003e ./autogen.sh\n\u003e ./configure --program-prefix=ex --prefix=$HOME/local #インストール先を$HOME/localに設定\n\u003e make\n\u003e make install\n```\n\n# unversal-ctagsの使い方\n上記の方法でインストールすると、~/local/binにexctagsというファイルができています。使用方法はctagsと全く同じです。TAGSを作りたいソースツリーの根本まで行き、vimの場合`exctags -R` emacsの場合`exctags -Re`となります。\n\n\n\n\n\n\n\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:45:28+09:00",
    "group": null,
    "id": "e0c4cfc4b12e18a5095f",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Emacs",
        "versions": []
      },
      {
        "name": "Vim",
        "versions": []
      },
      {
        "name": "Verilog",
        "versions": []
      },
      {
        "name": "SystemVerilog",
        "versions": []
      }
    ],
    "title": "universal-ctagsを使おう",
    "updated_at": "2020-11-17T21:46:33+09:00",
    "url": "https://qiita.com/triggerfish/items/e0c4cfc4b12e18a5095f",
    "user": {
      "description": "ASIC職人です。デザイナですが検証もやります。ネタとしては検証のほうが書きやすいので、そちらが記事のメインになると思います。入門記事よりはプロの方が実務で役に立つような記事を目指しています。内容に不明点がありましたら遠慮なく質問をお願いいたします!",
      "facebook_id": "",
      "followees_count": 0,
      "followers_count": 9,
      "github_login_name": null,
      "id": "triggerfish",
      "items_count": 26,
      "linkedin_id": "",
      "location": "",
      "name": "",
      "organization": "",
      "permanent_id": 235449,
      "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/235449/profile-images/1534434027",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch1\u003e\n\u003cspan id=\"プログラミング勉強日記\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%8B%89%E5%BC%B7%E6%97%A5%E8%A8%98\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプログラミング勉強日記\u003c/h1\u003e\n\n\u003cp\u003e2020年11月17日\u003cbr\u003e\nコードを書いていて、\u003ccode\u003eparseInt\u003c/code\u003eと\u003ccode\u003evalueOf\u003c/code\u003eの違いがわからなかったので備忘録として残しておく。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"違い\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%95%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e違い\u003c/h1\u003e\n\n\u003cp\u003e　コードを実行したときに結果が同じになる。調べてみると\u003cb\u003e戻り値が違う\u003c/b\u003eと出てきた。具体的には、\u003ccode\u003eparseInt\u003c/code\u003eがint型やchar型などのプリミティブ型で\u003ccode\u003evalueOf\u003c/code\u003eはIntegerクラスを返す。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"java\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kd\"\u003epublic\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMain\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003epublic\u003c/span\u003e \u003cspan class=\"kd\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eString\u003c/span\u003e\u003cspan class=\"o\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"kd\"\u003ethrows\u003c/span\u003e \u003cspan class=\"nc\"\u003eException\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ehoge\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eInteger\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003evalueOf\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"12345\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eout\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehoge\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003efuga\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eInteger\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eparseInt\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"12345\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eout\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efuga\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e実行結果\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e12345\n12345\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考文献\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考文献\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"http://welovy.hatenablog.com/entry/2013/04/28/121057\" rel=\"nofollow noopener\" target=\"_blank\"\u003eparseIntとvalueOfの違い\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://tomoprog.hatenablog.com/entry/2016/02/03/182803\" rel=\"nofollow noopener\" target=\"_blank\"\u003eparseIntとvalueOfの違いって何！？\u003c/a\u003e\u003c/p\u003e\n",
    "body": "#プログラミング勉強日記\n2020年11月17日\nコードを書いていて、`parseInt`と`valueOf`の違いがわからなかったので備忘録として残しておく。\n\n#違い\n　コードを実行したときに結果が同じになる。調べてみると\u003cb\u003e戻り値が違う\u003c/b\u003eと出てきた。具体的には、`parseInt`がint型やchar型などのプリミティブ型で`valueOf`はIntegerクラスを返す。\n\n```java\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        int hoge = Integer.valueOf(\"12345\");\n        System.out.println(hoge);\n        \n        int fuga = Integer.parseInt(\"12345\");\n        System.out.println(fuga);\n    }\n}\n```\n\n```:実行結果\n12345\n12345\n```\n\n\n\n\n#参考文献\n[parseIntとvalueOfの違い](http://welovy.hatenablog.com/entry/2013/04/28/121057)\n[parseIntとvalueOfの違いって何！？](https://tomoprog.hatenablog.com/entry/2016/02/03/182803)\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:44:41+09:00",
    "group": null,
    "id": "7c9fc853c5fabed1dfb4",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "Java",
        "versions": []
      },
      {
        "name": "初心者",
        "versions": []
      },
      {
        "name": "valueOf",
        "versions": []
      },
      {
        "name": "parseInt",
        "versions": []
      },
      {
        "name": "プログラミング勉強日記",
        "versions": []
      }
    ],
    "title": "【Java】parseIntとvalueOfの違い",
    "updated_at": "2020-11-17T21:44:41+09:00",
    "url": "https://qiita.com/mzmz__02/items/7c9fc853c5fabed1dfb4",
    "user": {
      "description": "2020年5月から毎日投稿しています。\r\nフロントエンドエンジニアを目指し、独学で勉強中です。\r\n大学3年生で現在就職活動中です。",
      "facebook_id": "mai.kamihori",
      "followees_count": 1,
      "followers_count": 42,
      "github_login_name": "mzmz02",
      "id": "mzmz__02",
      "items_count": 190,
      "linkedin_id": "",
      "location": "",
      "name": "Mai",
      "organization": "",
      "permanent_id": 642821,
      "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/642821/9da7e80e79595c8e3b4abee6b0d02eae3a0ce5e8/large.png?1602584550",
      "team_only": false,
      "twitter_screen_name": "mai74747304",
      "website_url": "https://www.instagram.com/bb___m13"
    },
    "page_views_count": null
  },
  {
    "rendered_body": "\n\u003ch2\u003e\n\u003cspan id=\"google-driveの画像をどうしてもgoogle-chatに投稿したかった\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#google-drive%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%92%E3%81%A9%E3%81%86%E3%81%97%E3%81%A6%E3%82%82google-chat%E3%81%AB%E6%8A%95%E7%A8%BF%E3%81%97%E3%81%9F%E3%81%8B%E3%81%A3%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGoogle Driveの画像をどうしてもGoogle Chatに投稿したかった\u003c/h2\u003e\n\n\u003cp\u003eGoogle Apps Script で、SpreadSheet を読み込んで、そこに書かれたテキストや Google Drive に格納された画像ファイルをいい感じにまとめて Google Chat にポストしたかった。\u003cbr\u003e\n全部 Google だし、楽勝だろうと思っていたが、Google Drive の画像がなかなか表示できなかった。\u003c/p\u003e\n\n\u003cp\u003eググると、Share URL にパラメータをつければ見れる！みたいなことがそこらじゅうに書いてあったが、どれもうまく行かなかった。たぶん、かつてはうまく行っていたんだろうと思う。\u003cbr\u003e\nそこで、まずは素直に DriveApp を使ってみた。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://developers.google.com/apps-script/reference/drive/file\" rel=\"nofollow noopener\" target=\"_blank\"\u003eClass File\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eが、DriveApp で取得できる URL は、そのままでは Chat ではうまく表示できない URL（getUrl メソッド）か、ダウンロードが始まる URL（getDownloadUrl メソッド）だけで、欲しいものではなかった。\u003c/p\u003e\n\n\u003cp\u003e最終的に、Google Drive API v3 を利用して、サムネイル画像をなんとか引っ張ってきて表示することができた。サムネイルだけなのは、AWS S3 みたいに画像ストレージとしては使えないよってことなんだろうと理解した。\u003c/p\u003e\n\n\u003cp\u003eこの記事は「サムネイルじゃダメなんだ！」という方の参考にはならない。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"手っ取り早く1つのファイルのリンクだけ取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%8B%E3%81%A3%E5%8F%96%E3%82%8A%E6%97%A9%E3%81%8F1%E3%81%A4%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%A0%E3%81%91%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e手っ取り早く1つのファイルのリンクだけ取得する\u003c/h2\u003e\n\n\u003cp\u003e1つだけ分かれば良いという人は、ここ(\u003ca href=\"https://developers.google.com/apps-script/reference/drive/file\" rel=\"nofollow noopener\" target=\"_blank\"\u003eFiles: get\u003c/a\u003e)に行って、fields に thumbnailLink と入れて実行すれば良い。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2Ffad93a1b-f737-fea9-2751-fcb2a74fdf13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f76316c974d072b4349c3e737daae214\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2Ffad93a1b-f737-fea9-2751-fcb2a74fdf13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f76316c974d072b4349c3e737daae214\" width=\"400\" alt=\"Try this API\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/245908/fad93a1b-f737-fea9-2751-fcb2a74fdf13.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2Ffad93a1b-f737-fea9-2751-fcb2a74fdf13.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=50537f359dccc4ffd96a0cfd0492cb06 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eその他の値は、ここ（\u003ca href=\"https://developers.google.com/drive/api/v3/reference/files\" rel=\"nofollow noopener\" target=\"_blank\"\u003eFiles\u003c/a\u003e）に、どんなものが返ってくるか書いてあるので、それを参考に。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"google-drive-api\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#google-drive-api\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGoogle Drive API\u003c/h2\u003e\n\n\u003cp\u003eまずは、Google Drive API を使えるようにする。\u003cbr\u003e\n最初に、Google Apps Script の Editor のメニューで、Resources \u0026gt; Advanced Google Serviceにて、Drive API を On にする。\u003cbr\u003e\n次に、Token を取得する。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/iwaseasahi/items/2363dc1d246bc06baeae\" id=\"reference-354acf416b7a599cc0af\"\u003eGoogle API OAuth2.0のアクセストークン\u0026amp;リフレッシュトークン取得手順 2017年2月版\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e3年前の記事で、画面が色々と変わっていたが、だいたいこの手順でできた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"json\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"access_token\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"ya29.A0A...\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"expires_in\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e3599\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"refresh_token\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"1//0e5...\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"scope\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://www.googleapis.com/auth/drive\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"token_type\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Bearer\"\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"err\"\u003e%\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこんなようなものが返ってくる。割とすぐ Expire しちゃうので、アプリケーション内で使う場合は、リフレッシュする仕組みも実装しておかないといけない。\u003cbr\u003e\nrefresh_token はどれくらいで Expire するのか分からないが、6ヶ月くらいらしい。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/yosshi4486/items/7ec5fdd53577c8663603\" id=\"reference-a22442f3ac31a2b1af71\"\u003eアプリで「ログインしっぱなし」はどのように実現されているか？\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eここにあるように、refresh_token も毎回取り替えるのが良いようだ。Google Apps Script だと…と悩ましいところではあるが、まぁ美しくなくてもなんとかなるだろう。今回は省略。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"google-apps-script\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#google-apps-script\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGoogle Apps Script\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetDriveImageUrlById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eaccesstoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eya29.A0A...\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchUrl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ehttps://www.googleapis.com/drive/v3/files/\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e?fields=thumbnailLink\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eoption\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003emethod\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eGET\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eheaders\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eAuthorization\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eBearer \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003eaccesstoken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eAccept\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eapplication/json\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eUrlFetchApp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efetch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efetchUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eJSON\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ethumbnailLink\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eToken の取り替えは一旦忘れると、こんな感じにすればサムネイルの URL が取れる。\u003cbr\u003e\nOption は、前述の Try this API を実行すると出てくる curl コマンドの例で、API key を無視したものになっている。他の言語でも同様のことをすれば良い。\u003c/p\u003e\n\n\u003cp\u003eGoogle Drive API の戻り値は、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"json\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"thumbnailLink\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://...\"\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eという感じで、Object で返ってくるので、そのままプロパティにアクセスできるかと思ったが、parse しないとアクセスできなかった。なんか、このあたりの扱いはいまいち良く分かっていない。\u003c/p\u003e\n\n\u003cp\u003eともあれ、サムネイルの URL が取得できたので、Cards のフォーマットに整形する。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://developers.google.com/hangouts/chat/reference/message-formats/cards\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCard Formatting Messages\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eフォーマットはここを見ながら。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetCard\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ecards\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eheader\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etitle\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003esubtitle\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eHoliday Knowledge Sharing\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eimageUrl\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ehttps://....\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eimageStyle\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eIMAGE\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n        \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003esections\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ewidgets\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n              \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eimage\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                  \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eimageUrl\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eimage\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n              \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ewidgets\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n              \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etextParagraph\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                  \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etext\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003etext\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n              \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"結果と余談\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%90%E6%9E%9C%E3%81%A8%E4%BD%99%E8%AB%87\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e結果と余談\u003c/h2\u003e\n\n\u003cp\u003e上記の実行結果ではないが、結果として、こんなようなものが Google Chat にポストされる。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2F041f8942-c825-ba5d-1bc8-7f914cf4abfd.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=eb9add7d6e31f54b0d471456c74937d1\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2F041f8942-c825-ba5d-1bc8-7f914cf4abfd.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=eb9add7d6e31f54b0d471456c74937d1\" width=\"400\" alt=\"Card\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/245908/041f8942-c825-ba5d-1bc8-7f914cf4abfd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F245908%2F041f8942-c825-ba5d-1bc8-7f914cf4abfd.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4c716f90f6012ae07df18033b2877f60 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n今回の内容は、私の会社は、日本とベトナムにオフィスがあり、お互いの国の祝日の情報をシェアしようという企画で作った。\u003c/p\u003e\n\n\u003cp\u003eGlobalization の流れの中、大事だと思うのは言葉、ではなく、やはりカルチャーの相互理解である。言葉が理解出来ても、コンテキストおよびそのコンテキストが成立し得る背景が分からないと、全然何いってるのか分からないということは、しょっちゅうある。なので、こういうのは割と効く。\u003c/p\u003e\n\n\u003cp\u003eおしまい。\u003c/p\u003e\n",
    "body": "## Google Driveの画像をどうしてもGoogle Chatに投稿したかった\n\nGoogle Apps Script で、SpreadSheet を読み込んで、そこに書かれたテキストや Google Drive に格納された画像ファイルをいい感じにまとめて Google Chat にポストしたかった。\n全部 Google だし、楽勝だろうと思っていたが、Google Drive の画像がなかなか表示できなかった。\n\nググると、Share URL にパラメータをつければ見れる！みたいなことがそこらじゅうに書いてあったが、どれもうまく行かなかった。たぶん、かつてはうまく行っていたんだろうと思う。\nそこで、まずは素直に DriveApp を使ってみた。\n\n\u003e [Class File](https://developers.google.com/apps-script/reference/drive/file)\n\nが、DriveApp で取得できる URL は、そのままでは Chat ではうまく表示できない URL（getUrl メソッド）か、ダウンロードが始まる URL（getDownloadUrl メソッド）だけで、欲しいものではなかった。\n\n最終的に、Google Drive API v3 を利用して、サムネイル画像をなんとか引っ張ってきて表示することができた。サムネイルだけなのは、AWS S3 みたいに画像ストレージとしては使えないよってことなんだろうと理解した。\n\nこの記事は「サムネイルじゃダメなんだ！」という方の参考にはならない。\n\n## 手っ取り早く1つのファイルのリンクだけ取得する\n\n1つだけ分かれば良いという人は、ここ([Files: get](https://developers.google.com/apps-script/reference/drive/file))に行って、fields に thumbnailLink と入れて実行すれば良い。\n\n\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/245908/fad93a1b-f737-fea9-2751-fcb2a74fdf13.png\" width=\"400\" alt=\"Try this API\"\u003e\n\nその他の値は、ここ（[Files](https://developers.google.com/drive/api/v3/reference/files)）に、どんなものが返ってくるか書いてあるので、それを参考に。\n\n\n\n## Google Drive API\n\nまずは、Google Drive API を使えるようにする。\n最初に、Google Apps Script の Editor のメニューで、Resources \u003e Advanced Google Serviceにて、Drive API を On にする。\n次に、Token を取得する。\n\n\u003e [Google API OAuth2.0のアクセストークン\u0026リフレッシュトークン取得手順 2017年2月版](https://qiita.com/iwaseasahi/items/2363dc1d246bc06baeae)\n\n3年前の記事で、画面が色々と変わっていたが、だいたいこの手順でできた。\n\n```json\n{\n  \"access_token\": \"ya29.A0A...\",\n  \"expires_in\": 3599,\n  \"refresh_token\": \"1//0e5...\",\n  \"scope\": \"https://www.googleapis.com/auth/drive\",\n  \"token_type\": \"Bearer\"\n}%\n```\n\nこんなようなものが返ってくる。割とすぐ Expire しちゃうので、アプリケーション内で使う場合は、リフレッシュする仕組みも実装しておかないといけない。\nrefresh_token はどれくらいで Expire するのか分からないが、6ヶ月くらいらしい。\n\n\u003e [アプリで「ログインしっぱなし」はどのように実現されているか？](https://qiita.com/yosshi4486/items/7ec5fdd53577c8663603)\n\nここにあるように、refresh_token も毎回取り替えるのが良いようだ。Google Apps Script だと…と悩ましいところではあるが、まぁ美しくなくてもなんとかなるだろう。今回は省略。\n\n\n## Google Apps Script\n\n```javascript\nfunction getDriveImageUrlById(id) {\n  const accesstoken = \"ya29.A0A...\";\n  const fetchUrl = \"https://www.googleapis.com/drive/v3/files/\" + id + \"?fields=thumbnailLink\";\n  const option = {\n    \"method\": \"GET\",\n    \"headers\": {\n      \"Authorization\": \"Bearer \" + accesstoken,\n      \"Accept\": \"application/json\",\n    }\n  }\n  var response = UrlFetchApp.fetch(fetchUrl, option);\n  var result = JSON.parse(response);\n  return result[\"thumbnailLink\"];\n}\n```\n\nToken の取り替えは一旦忘れると、こんな感じにすればサムネイルの URL が取れる。\nOption は、前述の Try this API を実行すると出てくる curl コマンドの例で、API key を無視したものになっている。他の言語でも同様のことをすれば良い。\n\nGoogle Drive API の戻り値は、\n\n```json\n{\n  \"thumbnailLink\": \"https://...\"\n}\n```\n\nという感じで、Object で返ってくるので、そのままプロパティにアクセスできるかと思ったが、parse しないとアクセスできなかった。なんか、このあたりの扱いはいまいち良く分かっていない。\n\nともあれ、サムネイルの URL が取得できたので、Cards のフォーマットに整形する。\n\n\u003e [Card Formatting Messages](https://developers.google.com/hangouts/chat/reference/message-formats/cards)\n\nフォーマットはここを見ながら。\n\n```javascript\nfunction getCard(title, image, text) {\n  return {\n    \"cards\": [\n      {\n        \"header\": {\n          \"title\": title,\n          \"subtitle\": \"Holiday Knowledge Sharing\",\n          \"imageUrl\": \"https://....\",\n          \"imageStyle\": \"IMAGE\"\n        },\n        \"sections\": [\n          {\n            \"widgets\": [\n              {\n                \"image\": {\n                  \"imageUrl\": image\n                }\n              }\n            ]\n          },\n          {\n            \"widgets\": [\n              {\n                \"textParagraph\": {\n                  \"text\": text\n                }\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## 結果と余談\n\n上記の実行結果ではないが、結果として、こんなようなものが Google Chat にポストされる。\n\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/245908/041f8942-c825-ba5d-1bc8-7f914cf4abfd.png\" width=\"400\" alt=\"Card\"\u003e\n今回の内容は、私の会社は、日本とベトナムにオフィスがあり、お互いの国の祝日の情報をシェアしようという企画で作った。\n\nGlobalization の流れの中、大事だと思うのは言葉、ではなく、やはりカルチャーの相互理解である。言葉が理解出来ても、コンテキストおよびそのコンテキストが成立し得る背景が分からないと、全然何いってるのか分からないということは、しょっちゅうある。なので、こういうのは割と効く。\n\nおしまい。\n",
    "coediting": false,
    "comments_count": 0,
    "created_at": "2020-11-17T21:42:14+09:00",
    "group": null,
    "id": "9c692e26d689bee3e093",
    "likes_count": 0,
    "private": false,
    "reactions_count": 0,
    "tags": [
      {
        "name": "GoogleAppsScript",
        "versions": []
      },
      {
        "name": "GoogleDriveAPI",
        "versions": []
      },
      {
        "name": "HangoutsChat",
        "versions": []
      },
      {
        "name": "GoogleChat",
        "versions": []
      }
    ],
    "title": "Google Drive上の画像（のサムネイル）URLを取得する方法",
    "updated_at": "2020-11-17T21:42:14+09:00",
    "url": "https://qiita.com/kurab/items/9c692e26d689bee3e093",
    "user": {
      "description": "最近はコードはあんまり書きません。",
      "facebook_id": "",
      "followees_count": 1,
      "followers_count": 4,
      "github_login_name": "kurab",
      "id": "kurab",
      "items_count": 28,
      "linkedin_id": "hiroshi-kurabayashi-b0359924/",
      "location": "Tokyo",
      "name": "倉林 寛至",
      "organization": "",
      "permanent_id": 245908,
      "profile_image_url": "https://avatars2.githubusercontent.com/u/9692738?v=4",
      "team_only": false,
      "twitter_screen_name": null,
      "website_url": ""
    },
    "page_views_count": null
  }
]
